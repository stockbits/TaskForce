import{u as Xa,a as tr,b as qo,G as Qc,T as eu,R as tu,D as nu,c as iu,d as Mi,e as Ya,f as ou,s as su,g as Vt,h as Ut,i as Dt,j as ze,k as it,l as Ct,m as Lt,P as ht,n as kt,o as Gs,p as Lo,q as Qn,r as ru,C as au,A as lu,t as St,v as Ko,w as ei,x as Y,y as Ci,z as ri,B as aa,E as As,I as cn,F as Ei,H as ao,J as Qa,K as Xo,L as el,M as nr,N as tl,O as Eo,Q as nl,S as $t,U as oo,V as il,W as cu,X as ue,Y as uu,Z as du,_ as Yo,$ as ir,a0 as la,a1 as pu,a2 as or,a3 as hu,a4 as Fo,a5 as mu,a6 as fu,a7 as Co,a8 as ca,a9 as Wo,aa as Te,ab as ve,ac as Jt,ad as Mt,ae as ol,af as Wt,ag as yn,ah as Di,ai as gu,aj as yu,ak as ks,al as Ps,am as vu,an as Qi,ao as eo,ap as to,aq as Qo,ar as wo,as as Is,at as sl,au as xu,av as bu,aw as _u,ax as Su,ay as Cu}from"./index-BuHN3_he.js";import{r as d,j as a,m as mn,A as di,R as Nn,a as wu}from"./vendor-motion-BQO2KiUE.js";import{U as es,C as Tu,X as no,a as sr,S as Au,b as ku,c as Pu,L as ts,d as Js,E as rl,T as rr,e as Iu,f as ns,M as Mu,g as Du,h as Lu,I as Eu,i as ar,j as Ru,k as Nu,l as Zo,m as al,G as ll,n as cl,o as ul,p as Ou,B as zu,q as ju,r as Bu,s as Fu,F as Ro}from"./vendor-icons-DpRKXeVT.js";import{g as Wu}from"./vendor-react-DJG_os-6.js";const Zu=n=>{const i=d.useRef({});return d.useEffect(()=>{i.current=n}),i.current},dl=d.createContext(null);function lr(){return d.useContext(dl)}const $u=typeof Symbol=="function"&&Symbol.for,Hu=$u?Symbol.for("mui.nested"):"__THEME_NESTED__";function Gu(n,i){return typeof i=="function"?i(n):{...n,...i}}function Ju(n){const{children:i,theme:s}=n,l=lr(),p=d.useMemo(()=>{const h=l===null?{...s}:Gu(l,s);return h!=null&&(h[Hu]=l!==null),h},[s,l]);return a.jsx(dl.Provider,{value:p,children:i})}function Vu(n){const i=Xa(),s=tr()||"",{modularCssLayers:l}=n;let p="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!l||i!==null?p="":typeof l=="string"?p=l.replace(/mui(?!\.)/g,p):p=`@layer ${p};`,qo(()=>{var m,g;const h=document.querySelector("head");if(!h)return;const u=h.firstChild;if(p){if(u&&((m=u.hasAttribute)!=null&&m.call(u,"data-mui-layer-order"))&&u.getAttribute("data-mui-layer-order")===s)return;const b=document.createElement("style");b.setAttribute("data-mui-layer-order",s),b.textContent=p,h.prepend(b)}else(g=h.querySelector(`style[data-mui-layer-order="${s}"]`))==null||g.remove()},[p,s]),p?a.jsx(Qc,{styles:p}):null}const ua={};function da(n,i,s,l=!1){return d.useMemo(()=>{const p=n&&i[n]||i;if(typeof s=="function"){const h=s(p),u=n?{...i,[n]:h}:h;return l?()=>u:u}return n?{...i,[n]:s}:{...i,...s}},[n,i,s,l])}function pl(n){const{children:i,theme:s,themeId:l}=n,p=Xa(ua),h=lr()||ua,u=da(l,p,s),m=da(l,h,s,!0),g=(l?u[l]:u).direction==="rtl",b=Vu(u);return a.jsx(Ju,{theme:m,children:a.jsx(eu.Provider,{value:u,children:a.jsx(tu,{value:g,children:a.jsxs(nu,{value:l?u[l].components:u.components,children:[b,i]})})})})}const cr="mode",ur="color-scheme",Uu="data-color-scheme";function qu(n){const{defaultMode:i="system",defaultLightColorScheme:s="light",defaultDarkColorScheme:l="dark",modeStorageKey:p=cr,colorSchemeStorageKey:h=ur,attribute:u=Uu,colorSchemeNode:m="document.documentElement",nonce:g}=n||{};let b="",v=u;if(u==="class"&&(v=".%s"),u==="data"&&(v="[data-%s]"),v.startsWith(".")){const y=v.substring(1);b+=`${m}.classList.remove('${y}'.replace('%s', light), '${y}'.replace('%s', dark));
      ${m}.classList.add('${y}'.replace('%s', colorScheme));`}const x=v.match(/\[([^\]]+)\]/);if(x){const[y,S]=x[1].split("=");S||(b+=`${m}.removeAttribute('${y}'.replace('%s', light));
      ${m}.removeAttribute('${y}'.replace('%s', dark));`),b+=`
      ${m}.setAttribute('${y}'.replace('%s', colorScheme), ${S?`${S}.replace('%s', colorScheme)`:'""'});`}else b+=`${m}.setAttribute('${v}', colorScheme);`;return a.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?g:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${p}') || '${i}';
  const dark = localStorage.getItem('${h}-dark') || '${l}';
  const light = localStorage.getItem('${h}-light') || '${s}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${b}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function Ku(){}const Xu=({key:n,storageWindow:i})=>(!i&&typeof window<"u"&&(i=window),{get(s){if(typeof window>"u")return;if(!i)return s;let l;try{l=i.localStorage.getItem(n)}catch{}return l||s},set:s=>{if(i)try{i.localStorage.setItem(n,s)}catch{}},subscribe:s=>{if(!i)return Ku;const l=p=>{const h=p.newValue;p.key===n&&s(h)};return i.addEventListener("storage",l),()=>{i.removeEventListener("storage",l)}}});function Ms(){}function pa(n){if(typeof window<"u"&&typeof window.matchMedia=="function"&&n==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function hl(n,i){if(n.mode==="light"||n.mode==="system"&&n.systemMode==="light")return i("light");if(n.mode==="dark"||n.mode==="system"&&n.systemMode==="dark")return i("dark")}function Yu(n){return hl(n,i=>{if(i==="light")return n.lightColorScheme;if(i==="dark")return n.darkColorScheme})}function Qu(n){const{defaultMode:i="light",defaultLightColorScheme:s,defaultDarkColorScheme:l,supportedColorSchemes:p=[],modeStorageKey:h=cr,colorSchemeStorageKey:u=ur,storageWindow:m=typeof window>"u"?void 0:window,storageManager:g=Xu,noSsr:b=!1}=n,v=p.join(","),x=p.length>1,y=d.useMemo(()=>g==null?void 0:g({key:h,storageWindow:m}),[g,h,m]),S=d.useMemo(()=>g==null?void 0:g({key:`${u}-light`,storageWindow:m}),[g,u,m]),T=d.useMemo(()=>g==null?void 0:g({key:`${u}-dark`,storageWindow:m}),[g,u,m]),[k,w]=d.useState(()=>{const oe=(y==null?void 0:y.get(i))||i,W=(S==null?void 0:S.get(s))||s,te=(T==null?void 0:T.get(l))||l;return{mode:oe,systemMode:pa(oe),lightColorScheme:W,darkColorScheme:te}}),[P,F]=d.useState(b||!x);d.useEffect(()=>{F(!0)},[]);const D=Yu(k),z=d.useCallback(oe=>{w(W=>{if(oe===W.mode)return W;const te=oe??i;return y==null||y.set(te),{...W,mode:te,systemMode:pa(te)}})},[y,i]),j=d.useCallback(oe=>{oe?typeof oe=="string"?oe&&!v.includes(oe)?console.error(`\`${oe}\` does not exist in \`theme.colorSchemes\`.`):w(W=>{const te={...W};return hl(W,q=>{q==="light"&&(S==null||S.set(oe),te.lightColorScheme=oe),q==="dark"&&(T==null||T.set(oe),te.darkColorScheme=oe)}),te}):w(W=>{const te={...W},q=oe.light===null?s:oe.light,B=oe.dark===null?l:oe.dark;return q&&(v.includes(q)?(te.lightColorScheme=q,S==null||S.set(q)):console.error(`\`${q}\` does not exist in \`theme.colorSchemes\`.`)),B&&(v.includes(B)?(te.darkColorScheme=B,T==null||T.set(B)):console.error(`\`${B}\` does not exist in \`theme.colorSchemes\`.`)),te}):w(W=>(S==null||S.set(s),T==null||T.set(l),{...W,lightColorScheme:s,darkColorScheme:l}))},[v,S,T,s,l]),K=d.useCallback(oe=>{k.mode==="system"&&w(W=>{const te=oe!=null&&oe.matches?"dark":"light";return W.systemMode===te?W:{...W,systemMode:te}})},[k.mode]),H=d.useRef(K);return H.current=K,d.useEffect(()=>{if(typeof window.matchMedia!="function"||!x)return;const oe=(...te)=>H.current(...te),W=window.matchMedia("(prefers-color-scheme: dark)");return W.addListener(oe),oe(W),()=>{W.removeListener(oe)}},[x]),d.useEffect(()=>{if(x){const oe=(y==null?void 0:y.subscribe(q=>{(!q||["light","dark","system"].includes(q))&&z(q||i)}))||Ms,W=(S==null?void 0:S.subscribe(q=>{(!q||v.match(q))&&j({light:q})}))||Ms,te=(T==null?void 0:T.subscribe(q=>{(!q||v.match(q))&&j({dark:q})}))||Ms;return()=>{oe(),W(),te()}}},[j,z,v,i,m,x,y,S,T]),{...k,mode:P?k.mode:void 0,systemMode:P?k.systemMode:void 0,colorScheme:P?D:void 0,setMode:z,setColorScheme:j}}const ed="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function td(n){const{themeId:i,theme:s={},modeStorageKey:l=cr,colorSchemeStorageKey:p=ur,disableTransitionOnChange:h=!1,defaultColorScheme:u,resolveTheme:m}=n,g={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},b=d.createContext(void 0),v=()=>d.useContext(b)||g,x={},y={};function S(P){var ut,gt,jt,Et;const{children:F,theme:D,modeStorageKey:z=l,colorSchemeStorageKey:j=p,disableTransitionOnChange:K=h,storageManager:H,storageWindow:oe=typeof window>"u"?void 0:window,documentNode:W=typeof document>"u"?void 0:document,colorSchemeNode:te=typeof document>"u"?void 0:document.documentElement,disableNestedContext:q=!1,disableStyleSheetGeneration:B=!1,defaultMode:ce="system",noSsr:re}=P,Se=d.useRef(!1),ye=lr(),Me=d.useContext(b),X=!!Me&&!q,Ae=d.useMemo(()=>D||(typeof s=="function"?s():s),[D]),ae=Ae[i],pe=ae||Ae,{colorSchemes:Z=x,components:N=y,cssVarPrefix:V}=pe,M=Object.keys(Z).filter(Ve=>!!Z[Ve]).join(","),O=d.useMemo(()=>M.split(","),[M]),se=typeof u=="string"?u:u.light,le=typeof u=="string"?u:u.dark,Ce=Z[se]&&Z[le]?ce:((gt=(ut=Z[pe.defaultColorScheme])==null?void 0:ut.palette)==null?void 0:gt.mode)||((jt=pe.palette)==null?void 0:jt.mode),{mode:We,setMode:ct,systemMode:Ne,lightColorScheme:Be,darkColorScheme:je,colorScheme:Ge,setColorScheme:wt}=Qu({supportedColorSchemes:O,defaultLightColorScheme:se,defaultDarkColorScheme:le,modeStorageKey:z,colorSchemeStorageKey:j,defaultMode:Ce,storageManager:H,storageWindow:oe,noSsr:re});let me=We,Pe=Ge;X&&(me=Me.mode,Pe=Me.colorScheme);const ke=d.useMemo(()=>{var mt;const Ve=Pe||pe.defaultColorScheme,He=((mt=pe.generateThemeVars)==null?void 0:mt.call(pe))||pe.vars,Ee={...pe,components:N,colorSchemes:Z,cssVarPrefix:V,vars:He};if(typeof Ee.generateSpacing=="function"&&(Ee.spacing=Ee.generateSpacing()),Ve){const dt=Z[Ve];dt&&typeof dt=="object"&&Object.keys(dt).forEach(yt=>{dt[yt]&&typeof dt[yt]=="object"?Ee[yt]={...Ee[yt],...dt[yt]}:Ee[yt]=dt[yt]})}return m?m(Ee):Ee},[pe,Pe,N,Z,V]),bt=pe.colorSchemeSelector;qo(()=>{if(Pe&&te&&bt&&bt!=="media"){const Ve=bt;let He=bt;if(Ve==="class"&&(He=".%s"),Ve==="data"&&(He="[data-%s]"),Ve!=null&&Ve.startsWith("data-")&&!Ve.includes("%s")&&(He=`[${Ve}="%s"]`),He.startsWith("."))te.classList.remove(...O.map(Ee=>He.substring(1).replace("%s",Ee))),te.classList.add(He.substring(1).replace("%s",Pe));else{const Ee=He.replace("%s",Pe).match(/\[([^\]]+)\]/);if(Ee){const[mt,dt]=Ee[1].split("=");dt||O.forEach(yt=>{te.removeAttribute(mt.replace(Pe,yt))}),te.setAttribute(mt,dt?dt.replace(/"|'/g,""):"")}else te.setAttribute(He,Pe)}}},[Pe,bt,te,O]),d.useEffect(()=>{let Ve;if(K&&Se.current&&W){const He=W.createElement("style");He.appendChild(W.createTextNode(ed)),W.head.appendChild(He),window.getComputedStyle(W.body),Ve=setTimeout(()=>{W.head.removeChild(He)},1)}return()=>{clearTimeout(Ve)}},[Pe,K,W]),d.useEffect(()=>(Se.current=!0,()=>{Se.current=!1}),[]);const st=d.useMemo(()=>({allColorSchemes:O,colorScheme:Pe,darkColorScheme:je,lightColorScheme:Be,mode:me,setColorScheme:wt,setMode:ct,systemMode:Ne}),[O,Pe,je,Be,me,wt,ct,Ne,ke.colorSchemeSelector]);let _t=!0;(B||pe.cssVariables===!1||X&&(ye==null?void 0:ye.cssVarPrefix)===V)&&(_t=!1);const At=a.jsxs(d.Fragment,{children:[a.jsx(pl,{themeId:ae?i:void 0,theme:ke,children:F}),_t&&a.jsx(iu,{styles:((Et=ke.generateStyleSheets)==null?void 0:Et.call(ke))||[]})]});return X?At:a.jsx(b.Provider,{value:st,children:At})}const T=typeof u=="string"?u:u.light,k=typeof u=="string"?u:u.dark;return{CssVarsProvider:S,useColorScheme:v,getInitColorSchemeScript:P=>qu({colorSchemeStorageKey:p,defaultLightColorScheme:T,defaultDarkColorScheme:k,modeStorageKey:l,...P})}}function nd({theme:n,...i}){const s=Mi in n?n[Mi]:void 0;return a.jsx(pl,{...i,themeId:s?Mi:void 0,theme:s||n})}const To={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:id}=td({themeId:Mi,theme:()=>Ya({cssVariables:!0}),colorSchemeStorageKey:To.colorSchemeStorageKey,modeStorageKey:To.modeStorageKey,defaultColorScheme:{light:To.defaultLightColorScheme,dark:To.defaultDarkColorScheme},resolveTheme:n=>{const i={...n,typography:ou(n.palette,n.typography)};return i.unstable_sx=function(l){return su({sx:l,theme:this})},i}}),od=id;function sd({theme:n,...i}){const s=d.useMemo(()=>{if(typeof n=="function")return n;const l=Mi in n?n[Mi]:n;return"colorSchemes"in l?null:"vars"in l?n:{...n,vars:null}},[n]);return s?a.jsx(nd,{theme:s,...i}):a.jsx(od,{theme:n,...i})}function rd(n){return Vt("MuiAppBar",n)}Ut("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const ad=n=>{const{color:i,position:s,classes:l}=n,p={root:["root",`color${Ct(i)}`,`position${Ct(s)}`]};return Lt(p,rd,l)},ha=(n,i)=>n?`${n==null?void 0:n.replace(")","")}, ${i})`:i,ld=ze(ht,{name:"MuiAppBar",slot:"Root",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[i.root,i[`position${Ct(s.position)}`],i[`color${Ct(s.color)}`]]}})(kt(({theme:n})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(n.vars||n).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(n.vars||n).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(n.vars||n).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":n.vars?n.vars.palette.AppBar.defaultBg:n.palette.grey[100],"--AppBar-color":n.vars?n.vars.palette.text.primary:n.palette.getContrastText(n.palette.grey[100]),...n.applyStyles("dark",{"--AppBar-background":n.vars?n.vars.palette.AppBar.defaultBg:n.palette.grey[900],"--AppBar-color":n.vars?n.vars.palette.text.primary:n.palette.getContrastText(n.palette.grey[900])})}},...Object.entries(n.palette).filter(Gs(["contrastText"])).map(([i])=>({props:{color:i},style:{"--AppBar-background":(n.vars??n).palette[i].main,"--AppBar-color":(n.vars??n).palette[i].contrastText}})),{props:i=>i.enableColorOnDark===!0&&!["inherit","transparent"].includes(i.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:i=>i.enableColorOnDark===!1&&!["inherit","transparent"].includes(i.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...n.applyStyles("dark",{backgroundColor:n.vars?ha(n.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:n.vars?ha(n.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...n.applyStyles("dark",{backgroundImage:"none"})}}]}))),cd=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiAppBar"}),{className:p,color:h="primary",enableColorOnDark:u=!1,position:m="fixed",...g}=l,b={...l,color:h,position:m,enableColorOnDark:u},v=ad(b);return a.jsx(ld,{square:!0,component:"header",ownerState:b,elevation:4,className:it(v.root,p,m==="fixed"&&"mui-fixed"),ref:s,...g})});function ma(n){return n.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function ud(n={}){const{ignoreAccents:i=!0,ignoreCase:s=!0,limit:l,matchFrom:p="any",stringify:h,trim:u=!1}=n;return(m,{inputValue:g,getOptionLabel:b})=>{let v=u?g.trim():g;s&&(v=v.toLowerCase()),i&&(v=ma(v));const x=v?m.filter(y=>{let S=(h||b)(y);return s&&(S=S.toLowerCase()),i&&(S=ma(S)),p==="start"?S.startsWith(v):S.includes(v)}):m;return typeof l=="number"?x.slice(0,l):x}}const dd=ud(),fa=5,pd=n=>{var i;return n.current!==null&&((i=n.current.parentElement)==null?void 0:i.contains(document.activeElement))},hd=[];function ga(n,i,s){if(i||n==null)return"";const l=s(n);return typeof l=="string"?l:""}function md(n){const{unstable_isActiveElementInListbox:i=pd,unstable_classNamePrefix:s="Mui",autoComplete:l=!1,autoHighlight:p=!1,autoSelect:h=!1,blurOnSelect:u=!1,clearOnBlur:m=!n.freeSolo,clearOnEscape:g=!1,componentName:b="useAutocomplete",defaultValue:v=n.multiple?hd:null,disableClearable:x=!1,disableCloseOnSelect:y=!1,disabled:S,disabledItemsFocusable:T=!1,disableListWrap:k=!1,filterOptions:w=dd,filterSelectedOptions:P=!1,freeSolo:F=!1,getOptionDisabled:D,getOptionKey:z,getOptionLabel:j=J=>J.label??J,groupBy:K,handleHomeEndKeys:H=!n.freeSolo,id:oe,includeInputInList:W=!1,inputValue:te,isOptionEqualToValue:q=(J,$)=>J===$,multiple:B=!1,onChange:ce,onClose:re,onHighlightChange:Se,onInputChange:ye,onOpen:Me,open:X,openOnFocus:Ae=!1,options:ae,readOnly:pe=!1,selectOnFocus:Z=!n.freeSolo,value:N}=n,V=tr(oe);let M=j;M=J=>{const $=j(J);return typeof $!="string"?String($):$};const O=d.useRef(!1),se=d.useRef(!0),le=d.useRef(null),Ce=d.useRef(null),[We,ct]=d.useState(null),[Ne,Be]=d.useState(-1),je=p?0:-1,Ge=d.useRef(je),wt=d.useRef(ga(v??N,B,M)).current,[me,Pe]=Lo({controlled:N,default:v,name:b}),[ke,bt]=Lo({controlled:te,default:wt,name:b,state:"inputValue"}),[st,_t]=d.useState(!1),At=d.useCallback((J,$,be)=>{if(!(B?me.length<$.length:$!==null)&&!m)return;const Ye=ga($,B,M);ke!==Ye&&(bt(Ye),ye&&ye(J,Ye,be))},[M,ke,B,ye,bt,m,me]),[ut,gt]=Lo({controlled:X,default:!1,name:b,state:"open"}),[jt,Et]=d.useState(!0),Ve=!B&&me!=null&&ke===M(me),He=ut&&!pe,Ee=He?w(ae.filter(J=>!(P&&(B?me:[me]).some($=>$!==null&&q(J,$)))),{inputValue:Ve&&jt?"":ke,getOptionLabel:M}):[],mt=Zu({filteredOptions:Ee,value:me,inputValue:ke});d.useEffect(()=>{const J=me!==mt.value;st&&!J||F&&!J||At(null,me,"reset")},[me,At,st,mt.value,F]);const dt=ut&&Ee.length>0&&!pe,yt=Qn(J=>{J===-1?le.current.focus():We.querySelector(`[data-tag-index="${J}"]`).focus()});d.useEffect(()=>{B&&Ne>me.length-1&&(Be(-1),yt(-1))},[me,B,Ne,yt]);function Xt(J,$){if(!Ce.current||J<0||J>=Ee.length)return-1;let be=J;for(;;){const Fe=Ce.current.querySelector(`[data-option-index="${be}"]`),Ye=T?!1:!Fe||Fe.disabled||Fe.getAttribute("aria-disabled")==="true";if(Fe&&Fe.hasAttribute("tabindex")&&!Ye)return be;if($==="next"?be=(be+1)%Ee.length:be=(be-1+Ee.length)%Ee.length,be===J)return-1}}const vt=Qn(({event:J,index:$,reason:be})=>{if(Ge.current=$,$===-1?le.current.removeAttribute("aria-activedescendant"):le.current.setAttribute("aria-activedescendant",`${V}-option-${$}`),Se&&["mouse","keyboard","touch"].includes(be)&&Se(J,$===-1?null:Ee[$],be),!Ce.current)return;const Fe=Ce.current.querySelector(`[role="option"].${s}-focused`);Fe&&(Fe.classList.remove(`${s}-focused`),Fe.classList.remove(`${s}-focusVisible`));let Ye=Ce.current;if(Ce.current.getAttribute("role")!=="listbox"&&(Ye=Ce.current.parentElement.querySelector('[role="listbox"]')),!Ye)return;if($===-1){Ye.scrollTop=0;return}const rt=Ce.current.querySelector(`[data-option-index="${$}"]`);if(rt&&(rt.classList.add(`${s}-focused`),be==="keyboard"&&rt.classList.add(`${s}-focusVisible`),Ye.scrollHeight>Ye.clientHeight&&be!=="mouse"&&be!=="touch")){const Pt=rt,sn=Ye.clientHeight+Ye.scrollTop,Pn=Pt.offsetTop+Pt.offsetHeight;Pn>sn?Ye.scrollTop=Pn-Ye.clientHeight:Pt.offsetTop-Pt.offsetHeight*(K?1.3:0)<Ye.scrollTop&&(Ye.scrollTop=Pt.offsetTop-Pt.offsetHeight*(K?1.3:0))}}),Bt=Qn(({event:J,diff:$,direction:be="next",reason:Fe})=>{if(!He)return;const rt=Xt((()=>{const Pt=Ee.length-1;if($==="reset")return je;if($==="start")return 0;if($==="end")return Pt;const sn=Ge.current+$;return sn<0?sn===-1&&W?-1:k&&Ge.current!==-1||Math.abs($)>1?0:Pt:sn>Pt?sn===Pt+1&&W?-1:k||Math.abs($)>1?Pt:0:sn})(),be);if(vt({index:rt,reason:Fe,event:J}),l&&$!=="reset")if(rt===-1)le.current.value=ke;else{const Pt=M(Ee[rt]);le.current.value=Pt,Pt.toLowerCase().indexOf(ke.toLowerCase())===0&&ke.length>0&&le.current.setSelectionRange(ke.length,Pt.length)}}),Yt=()=>{const J=($,be)=>{const Fe=$?M($):"",Ye=be?M(be):"";return Fe===Ye};if(Ge.current!==-1&&mt.filteredOptions&&mt.filteredOptions.length!==Ee.length&&mt.inputValue===ke&&(B?me.length===mt.value.length&&mt.value.every(($,be)=>M(me[be])===M($)):J(mt.value,me))){const $=mt.filteredOptions[Ge.current];if($)return Ee.findIndex(be=>M(be)===M($))}return-1},on=d.useCallback(()=>{if(!He)return;const J=Yt();if(J!==-1){Ge.current=J;return}const $=B?me[0]:me;if(Ee.length===0||$==null){Bt({diff:"reset"});return}if(Ce.current){if($!=null){const be=Ee[Ge.current];if(B&&be&&me.findIndex(Ye=>q(be,Ye))!==-1)return;const Fe=Ee.findIndex(Ye=>q(Ye,$));Fe===-1?Bt({diff:"reset"}):vt({index:Fe});return}if(Ge.current>=Ee.length-1){vt({index:Ee.length-1});return}vt({index:Ge.current})}},[Ee.length,B?!1:me,P,Bt,vt,He,ke,B]),qt=Qn(J=>{ru(Ce,J),J&&on()});d.useEffect(()=>{on()},[on]);const Ft=J=>{ut||(gt(!0),Et(!0),Me&&Me(J))},de=(J,$)=>{ut&&(gt(!1),re&&re(J,$))},A=(J,$,be,Fe)=>{if(B){if(me.length===$.length&&me.every((Ye,rt)=>Ye===$[rt]))return}else if(me===$)return;ce&&ce(J,$,be,Fe),Pe($)},U=d.useRef(!1),xe=(J,$,be="selectOption",Fe="options")=>{let Ye=be,rt=$;if(B){rt=Array.isArray(me)?me.slice():[];const Pt=rt.findIndex(sn=>q($,sn));Pt===-1?rt.push($):Fe!=="freeSolo"&&(rt.splice(Pt,1),Ye="removeOption")}At(J,rt,Ye),A(J,rt,Ye,{option:$}),!y&&(!J||!J.ctrlKey&&!J.metaKey)&&de(J,Ye),(u===!0||u==="touch"&&U.current||u==="mouse"&&!U.current)&&le.current.blur()};function Ke(J,$){if(J===-1)return-1;let be=J;for(;;){if($==="next"&&be===me.length||$==="previous"&&be===-1)return-1;const Fe=We.querySelector(`[data-tag-index="${be}"]`);if(!Fe||!Fe.hasAttribute("tabindex")||Fe.disabled||Fe.getAttribute("aria-disabled")==="true")be+=$==="next"?1:-1;else return be}}const Ze=(J,$)=>{if(!B)return;ke===""&&de(J,"toggleInput");let be=Ne;Ne===-1?ke===""&&$==="previous"&&(be=me.length-1):(be+=$==="next"?1:-1,be<0&&(be=0),be===me.length&&(be=-1)),be=Ke(be,$),Be(be),yt(be)},De=J=>{O.current=!0,bt(""),ye&&ye(J,"","clear"),A(J,B?[]:null,"clear")},Ue=J=>$=>{if(J.onKeyDown&&J.onKeyDown($),!$.defaultMuiPrevented&&(Ne!==-1&&!["ArrowLeft","ArrowRight"].includes($.key)&&(Be(-1),yt(-1)),$.which!==229))switch($.key){case"Home":He&&H&&($.preventDefault(),Bt({diff:"start",direction:"next",reason:"keyboard",event:$}));break;case"End":He&&H&&($.preventDefault(),Bt({diff:"end",direction:"previous",reason:"keyboard",event:$}));break;case"PageUp":$.preventDefault(),Bt({diff:-fa,direction:"previous",reason:"keyboard",event:$}),Ft($);break;case"PageDown":$.preventDefault(),Bt({diff:fa,direction:"next",reason:"keyboard",event:$}),Ft($);break;case"ArrowDown":$.preventDefault(),Bt({diff:1,direction:"next",reason:"keyboard",event:$}),Ft($);break;case"ArrowUp":$.preventDefault(),Bt({diff:-1,direction:"previous",reason:"keyboard",event:$}),Ft($);break;case"ArrowLeft":Ze($,"previous");break;case"ArrowRight":Ze($,"next");break;case"Enter":if(Ge.current!==-1&&He){const be=Ee[Ge.current],Fe=D?D(be):!1;if($.preventDefault(),Fe)return;xe($,be,"selectOption"),l&&le.current.setSelectionRange(le.current.value.length,le.current.value.length)}else F&&ke!==""&&Ve===!1&&(B&&$.preventDefault(),xe($,ke,"createOption","freeSolo"));break;case"Escape":He?($.preventDefault(),$.stopPropagation(),de($,"escape")):g&&(ke!==""||B&&me.length>0)&&($.preventDefault(),$.stopPropagation(),De($));break;case"Backspace":if(B&&!pe&&ke===""&&me.length>0){const be=Ne===-1?me.length-1:Ne,Fe=me.slice();Fe.splice(be,1),A($,Fe,"removeOption",{option:me[be]})}break;case"Delete":if(B&&!pe&&ke===""&&me.length>0&&Ne!==-1){const be=Ne,Fe=me.slice();Fe.splice(be,1),A($,Fe,"removeOption",{option:me[be]})}break}},Q=J=>{_t(!0),Ae&&!O.current&&Ft(J)},G=J=>{if(i(Ce)){le.current.focus();return}_t(!1),se.current=!0,O.current=!1,h&&Ge.current!==-1&&He?xe(J,Ee[Ge.current],"blur"):h&&F&&ke!==""?xe(J,ke,"blur","freeSolo"):m&&At(J,me,"blur"),de(J,"blur")},ee=J=>{const $=J.target.value;ke!==$&&(bt($),Et(!1),ye&&ye(J,$,"input")),$===""?!x&&!B&&A(J,null,"clear"):Ft(J)},ie=J=>{const $=Number(J.currentTarget.getAttribute("data-option-index"));Ge.current!==$&&vt({event:J,index:$,reason:"mouse"})},Je=J=>{vt({event:J,index:Number(J.currentTarget.getAttribute("data-option-index")),reason:"touch"}),U.current=!0},tt=J=>{const $=Number(J.currentTarget.getAttribute("data-option-index"));xe(J,Ee[$],"selectOption"),U.current=!1},fe=J=>$=>{const be=me.slice();be.splice(J,1),A($,be,"removeOption",{option:me[J]})},Ht=J=>{ut?de(J,"toggleInput"):Ft(J)},xt=J=>{J.currentTarget.contains(J.target)&&J.target.getAttribute("id")!==V&&J.preventDefault()},lt=J=>{J.currentTarget.contains(J.target)&&(le.current.focus(),Z&&se.current&&le.current.selectionEnd-le.current.selectionStart===0&&le.current.select(),se.current=!1)},Xe=J=>{!S&&(ke===""||!ut)&&Ht(J)};let Qt=F&&ke.length>0;Qt=Qt||(B?me.length>0:me!==null);let xn=Ee;return K&&(xn=Ee.reduce((J,$,be)=>{const Fe=K($);return J.length>0&&J[J.length-1].group===Fe?J[J.length-1].options.push($):J.push({key:be,index:be,group:Fe,options:[$]}),J},[])),S&&st&&G(),{getRootProps:(J={})=>({...J,onKeyDown:Ue(J),onMouseDown:xt,onClick:lt}),getInputLabelProps:()=>({id:`${V}-label`,htmlFor:V}),getInputProps:()=>({id:V,value:ke,onBlur:G,onFocus:Q,onChange:ee,onMouseDown:Xe,"aria-activedescendant":He?"":null,"aria-autocomplete":l?"both":"list","aria-controls":dt?`${V}-listbox`:void 0,"aria-expanded":dt,autoComplete:"off",ref:le,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:S}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:De}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Ht}),getTagProps:({index:J})=>({key:J,"data-tag-index":J,tabIndex:-1,...!pe&&{onDelete:fe(J)}}),getListboxProps:()=>({role:"listbox",id:`${V}-listbox`,"aria-labelledby":`${V}-label`,ref:qt,onMouseDown:J=>{J.preventDefault()}}),getOptionProps:({index:J,option:$})=>{const be=(B?me:[me]).some(Ye=>Ye!=null&&q($,Ye)),Fe=D?D($):!1;return{key:(z==null?void 0:z($))??M($),tabIndex:-1,role:"option",id:`${V}-option-${J}`,onMouseMove:ie,onClick:tt,onTouchStart:Je,"data-option-index":J,"aria-disabled":Fe,"aria-selected":be}},id:V,inputValue:ke,value:me,dirty:Qt,expanded:He&&We,popupOpen:He,focused:st||Ne!==-1,anchorEl:We,setAnchorEl:ct,focusedTag:Ne,groupedOptions:xn}}function fd(n){return Vt("MuiListSubheader",n)}Ut("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]);const gd=n=>{const{classes:i,color:s,disableGutters:l,inset:p,disableSticky:h}=n,u={root:["root",s!=="default"&&`color${Ct(s)}`,!l&&"gutters",p&&"inset",!h&&"sticky"]};return Lt(u,fd,i)},yd=ze("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[i.root,s.color!=="default"&&i[`color${Ct(s.color)}`],!s.disableGutters&&i.gutters,s.inset&&i.inset,!s.disableSticky&&i.sticky]}})(kt(({theme:n})=>({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(n.vars||n).palette.text.secondary,fontFamily:n.typography.fontFamily,fontWeight:n.typography.fontWeightMedium,fontSize:n.typography.pxToRem(14),variants:[{props:{color:"primary"},style:{color:(n.vars||n).palette.primary.main}},{props:{color:"inherit"},style:{color:"inherit"}},{props:({ownerState:i})=>!i.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:i})=>i.inset,style:{paddingLeft:72}},{props:({ownerState:i})=>!i.disableSticky,style:{position:"sticky",top:0,zIndex:1,backgroundColor:(n.vars||n).palette.background.paper}}]}))),Vs=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiListSubheader"}),{className:p,color:h="default",component:u="li",disableGutters:m=!1,disableSticky:g=!1,inset:b=!1,...v}=l,x={...l,color:h,component:u,disableGutters:m,disableSticky:g,inset:b},y=gd(x);return a.jsx(yd,{as:u,className:it(y.root,p),ref:s,ownerState:x,...v})});Vs&&(Vs.muiSkipListHighlight=!0);function vd(n){return Vt("MuiAutocomplete",n)}const Qe=Ut("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]);var ya,va;const xd=n=>{const{classes:i,disablePortal:s,expanded:l,focused:p,fullWidth:h,hasClearIcon:u,hasPopupIcon:m,inputFocused:g,popupOpen:b,size:v}=n,x={root:["root",l&&"expanded",p&&"focused",h&&"fullWidth",u&&"hasClearIcon",m&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",g&&"inputFocused"],tag:["tag",`tagSize${Ct(v)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",b&&"popupIndicatorOpen"],popper:["popper",s&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return Lt(x,vd,i)},bd=ze("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(n,i)=>{const{ownerState:s}=n,{fullWidth:l,hasClearIcon:p,hasPopupIcon:h,inputFocused:u,size:m}=s;return[{[`& .${Qe.tag}`]:i.tag},{[`& .${Qe.tag}`]:i[`tagSize${Ct(m)}`]},{[`& .${Qe.inputRoot}`]:i.inputRoot},{[`& .${Qe.input}`]:i.input},{[`& .${Qe.input}`]:u&&i.inputFocused},i.root,l&&i.fullWidth,h&&i.hasPopupIcon,p&&i.hasClearIcon]}})({[`&.${Qe.focused} .${Qe.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${Qe.clearIndicator}`]:{visibility:"visible"}},[`& .${Qe.tag}`]:{margin:3,maxWidth:"calc(100% - 6px)"},[`& .${Qe.inputRoot}`]:{[`.${Qe.hasPopupIcon}&, .${Qe.hasClearIcon}&`]:{paddingRight:30},[`.${Qe.hasPopupIcon}.${Qe.hasClearIcon}&`]:{paddingRight:56},[`& .${Qe.input}`]:{width:0,minWidth:30}},[`& .${As.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${As.root}.${ri.sizeSmall}`]:{[`& .${As.input}`]:{padding:"2px 4px 3px 0"}},[`& .${aa.root}`]:{padding:9,[`.${Qe.hasPopupIcon}&, .${Qe.hasClearIcon}&`]:{paddingRight:39},[`.${Qe.hasPopupIcon}.${Qe.hasClearIcon}&`]:{paddingRight:65},[`& .${Qe.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${Qe.endAdornment}`]:{right:9}},[`& .${aa.root}.${ri.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${Qe.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${Ci.root}`]:{paddingTop:19,paddingLeft:8,[`.${Qe.hasPopupIcon}&, .${Qe.hasClearIcon}&`]:{paddingRight:39},[`.${Qe.hasPopupIcon}.${Qe.hasClearIcon}&`]:{paddingRight:65},[`& .${Ci.input}`]:{padding:"7px 4px"},[`& .${Qe.endAdornment}`]:{right:9}},[`& .${Ci.root}.${ri.sizeSmall}`]:{paddingBottom:1,[`& .${Ci.input}`]:{padding:"2.5px 4px"}},[`& .${ri.hiddenLabel}`]:{paddingTop:8},[`& .${Ci.root}.${ri.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${Qe.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${Ci.root}.${ri.hiddenLabel}.${ri.sizeSmall}`]:{[`& .${Qe.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${Qe.input}`]:{flexGrow:1,textOverflow:"ellipsis",opacity:0},variants:[{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{[`& .${Qe.tag}`]:{margin:2,maxWidth:"calc(100% - 4px)"}}},{props:{inputFocused:!0},style:{[`& .${Qe.input}`]:{opacity:1}}},{props:{multiple:!0},style:{[`& .${Qe.inputRoot}`]:{flexWrap:"wrap"}}}]}),_d=ze("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(n,i)=>i.endAdornment})({position:"absolute",right:0,top:"50%",transform:"translate(0, -50%)"}),Sd=ze(cn,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(n,i)=>i.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),Cd=ze(cn,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[i.popupIndicator,s.popupOpen&&i.popupIndicatorOpen]}})({padding:2,marginRight:-2,variants:[{props:{popupOpen:!0},style:{transform:"rotate(180deg)"}}]}),wd=ze(Ko,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[{[`& .${Qe.option}`]:i.option},i.popper,s.disablePortal&&i.popperDisablePortal]}})(kt(({theme:n})=>({zIndex:(n.vars||n).zIndex.modal,variants:[{props:{disablePortal:!0},style:{position:"absolute"}}]}))),Td=ze(ht,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(n,i)=>i.paper})(kt(({theme:n})=>({...n.typography.body1,overflow:"auto"}))),Ad=ze("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(n,i)=>i.loading})(kt(({theme:n})=>({color:(n.vars||n).palette.text.secondary,padding:"14px 16px"}))),kd=ze("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(n,i)=>i.noOptions})(kt(({theme:n})=>({color:(n.vars||n).palette.text.secondary,padding:"14px 16px"}))),Pd=ze("ul",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(n,i)=>i.listbox})(kt(({theme:n})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${Qe.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[n.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${Qe.focused}`]:{backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(n.vars||n).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${Qe.focusVisible}`]:{backgroundColor:(n.vars||n).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.selectedOpacity})`:Y(n.palette.primary.main,n.palette.action.selectedOpacity),[`&.${Qe.focused}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.hoverOpacity}))`:Y(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(n.vars||n).palette.action.selected}},[`&.${Qe.focusVisible}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.focusOpacity}))`:Y(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}}}}))),Id=ze(Vs,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(n,i)=>i.groupLabel})(kt(({theme:n})=>({backgroundColor:(n.vars||n).palette.background.paper,top:-8}))),Md=ze("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(n,i)=>i.groupUl})({padding:0,[`& .${Qe.option}`]:{paddingLeft:24}}),$o=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiAutocomplete"}),{autoComplete:p=!1,autoHighlight:h=!1,autoSelect:u=!1,blurOnSelect:m=!1,ChipProps:g,className:b,clearIcon:v=ya||(ya=a.jsx(au,{fontSize:"small"})),clearOnBlur:x=!l.freeSolo,clearOnEscape:y=!1,clearText:S="Clear",closeText:T="Close",componentsProps:k,defaultValue:w=l.multiple?[]:null,disableClearable:P=!1,disableCloseOnSelect:F=!1,disabled:D=!1,disabledItemsFocusable:z=!1,disableListWrap:j=!1,disablePortal:K=!1,filterOptions:H,filterSelectedOptions:oe=!1,forcePopupIcon:W="auto",freeSolo:te=!1,fullWidth:q=!1,getLimitTagsText:B=ot=>`+${ot}`,getOptionDisabled:ce,getOptionKey:re,getOptionLabel:Se,isOptionEqualToValue:ye,groupBy:Me,handleHomeEndKeys:X=!l.freeSolo,id:Ae,includeInputInList:ae=!1,inputValue:pe,limitTags:Z=-1,ListboxComponent:N,ListboxProps:V,loading:M=!1,loadingText:O="Loadingâ€¦",multiple:se=!1,noOptionsText:le="No options",onChange:Ce,onClose:We,onHighlightChange:ct,onInputChange:Ne,onOpen:Be,open:je,openOnFocus:Ge=!1,openText:wt="Open",options:me,PaperComponent:Pe,PopperComponent:ke,popupIcon:bt=va||(va=a.jsx(lu,{})),readOnly:st=!1,renderGroup:_t,renderInput:At,renderOption:ut,renderTags:gt,selectOnFocus:jt=!l.freeSolo,size:Et="medium",slots:Ve={},slotProps:He={},value:Ee,...mt}=l,{getRootProps:dt,getInputProps:yt,getInputLabelProps:Xt,getPopupIndicatorProps:vt,getClearProps:Bt,getTagProps:Yt,getListboxProps:on,getOptionProps:qt,value:Ft,dirty:de,expanded:A,id:U,popupOpen:xe,focused:Ke,focusedTag:Ze,anchorEl:De,setAnchorEl:Ue,inputValue:Q,groupedOptions:G}=md({...l,componentName:"Autocomplete"}),ee=!P&&!D&&de&&!st,ie=(!te||W===!0)&&W!==!1,{onMouseDown:Je}=yt(),{ref:tt,...fe}=on(),xt=Se||(ot=>ot.label??ot),lt={...l,disablePortal:K,expanded:A,focused:Ke,fullWidth:q,getOptionLabel:xt,hasClearIcon:ee,hasPopupIcon:ie,inputFocused:Ze===-1,popupOpen:xe,size:Et},Xe=xd(lt),Qt={slots:{paper:Pe,popper:ke,...Ve},slotProps:{chip:g,listbox:V,...k,...He}},[xn,J]=St("listbox",{elementType:Pd,externalForwardedProps:Qt,ownerState:lt,className:Xe.listbox,additionalProps:fe,ref:tt}),[$,be]=St("paper",{elementType:ht,externalForwardedProps:Qt,ownerState:lt,className:Xe.paper}),[Fe,Ye]=St("popper",{elementType:Ko,externalForwardedProps:Qt,ownerState:lt,className:Xe.popper,additionalProps:{disablePortal:K,style:{width:De?De.clientWidth:null},role:"presentation",anchorEl:De,open:xe}});let rt;if(se&&Ft.length>0){const ot=rn=>({className:Xe.tag,disabled:D,...Yt(rn)});gt?rt=gt(Ft,ot,lt):rt=Ft.map((rn,Rt)=>{const{key:Cn,...wn}=ot({index:Rt});return a.jsx(ei,{label:xt(rn),size:Et,...wn,...Qt.slotProps.chip},Cn)})}if(Z>-1&&Array.isArray(rt)){const ot=rt.length-Z;!Ke&&ot>0&&(rt=rt.splice(0,Z),rt.push(a.jsx("span",{className:Xe.tag,children:B(ot)},rt.length)))}const sn=_t||(ot=>a.jsxs("li",{children:[a.jsx(Id,{className:Xe.groupLabel,ownerState:lt,component:"div",children:ot.group}),a.jsx(Md,{className:Xe.groupUl,ownerState:lt,children:ot.children})]},ot.key)),zn=ut||((ot,rn)=>{const{key:Rt,...Cn}=ot;return a.jsx("li",{...Cn,children:xt(rn)},Rt)}),en=(ot,rn)=>{const Rt=qt({option:ot,index:rn});return zn({...Rt,className:Xe.option},ot,{selected:Rt["aria-selected"],index:rn,inputValue:Q},lt)},Gt=Qt.slotProps.clearIndicator,fn=Qt.slotProps.popupIndicator;return a.jsxs(d.Fragment,{children:[a.jsx(bd,{ref:s,className:it(Xe.root,b),ownerState:lt,...dt(mt),children:At({id:U,disabled:D,fullWidth:!0,size:Et==="small"?"small":void 0,InputLabelProps:Xt(),InputProps:{ref:Ue,className:Xe.inputRoot,startAdornment:rt,onMouseDown:ot=>{ot.target===ot.currentTarget&&Je(ot)},...(ee||ie)&&{endAdornment:a.jsxs(_d,{className:Xe.endAdornment,ownerState:lt,children:[ee?a.jsx(Sd,{...Bt(),"aria-label":S,title:S,ownerState:lt,...Gt,className:it(Xe.clearIndicator,Gt==null?void 0:Gt.className),children:v}):null,ie?a.jsx(Cd,{...vt(),disabled:D,"aria-label":xe?T:wt,title:xe?T:wt,ownerState:lt,...fn,className:it(Xe.popupIndicator,fn==null?void 0:fn.className),children:bt}):null]})}},inputProps:{className:Xe.input,disabled:D,readOnly:st,...yt()}})}),De?a.jsx(wd,{as:Fe,...Ye,children:a.jsxs(Td,{as:$,...be,children:[M&&G.length===0?a.jsx(Ad,{className:Xe.loading,ownerState:lt,children:O}):null,G.length===0&&!te&&!M?a.jsx(kd,{className:Xe.noOptions,ownerState:lt,role:"presentation",onMouseDown:ot=>{ot.preventDefault()},children:le}):null,G.length>0?a.jsx(xn,{as:N,...J,children:G.map((ot,rn)=>Me?sn({key:ot.key,group:ot.group,children:ot.options.map((Rt,Cn)=>en(Rt,ot.index+Cn))}):en(ot,rn))}):null]})}):null]})}),Dd=Ei(a.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function Ld(n){return Vt("MuiAvatar",n)}Ut("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Ed=n=>{const{classes:i,variant:s,colorDefault:l}=n;return Lt({root:["root",s,l&&"colorDefault"],img:["img"],fallback:["fallback"]},Ld,i)},Rd=ze("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[i.root,i[s.variant],s.colorDefault&&i.colorDefault]}})(kt(({theme:n})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:n.typography.fontFamily,fontSize:n.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(n.vars||n).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(n.vars||n).palette.background.default,...n.vars?{backgroundColor:n.vars.palette.Avatar.defaultBg}:{backgroundColor:n.palette.grey[400],...n.applyStyles("dark",{backgroundColor:n.palette.grey[600]})}}}]}))),Nd=ze("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(n,i)=>i.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Od=ze(Dd,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(n,i)=>i.fallback})({width:"75%",height:"75%"});function zd({crossOrigin:n,referrerPolicy:i,src:s,srcSet:l}){const[p,h]=d.useState(!1);return d.useEffect(()=>{if(!s&&!l)return;h(!1);let u=!0;const m=new Image;return m.onload=()=>{u&&h("loaded")},m.onerror=()=>{u&&h("error")},m.crossOrigin=n,m.referrerPolicy=i,m.src=s,l&&(m.srcset=l),()=>{u=!1}},[n,i,s,l]),p}const jd=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiAvatar"}),{alt:p,children:h,className:u,component:m="div",slots:g={},slotProps:b={},imgProps:v,sizes:x,src:y,srcSet:S,variant:T="circular",...k}=l;let w=null;const P={...l,component:m,variant:T},F=zd({...v,...typeof b.img=="function"?b.img(P):b.img,src:y,srcSet:S}),D=y||S,z=D&&F!=="error";P.colorDefault=!z,delete P.ownerState;const j=Ed(P),[K,H]=St("img",{className:j.img,elementType:Nd,externalForwardedProps:{slots:g,slotProps:{img:{...v,...b.img}}},additionalProps:{alt:p,src:y,srcSet:S,sizes:x},ownerState:P});return z?w=a.jsx(K,{...H}):h||h===0?w=h:D&&p?w=p[0]:w=a.jsx(Od,{ownerState:P,className:j.fallback}),a.jsx(Rd,{as:m,className:it(j.root,u),ref:s,...k,ownerState:P,children:w})});function Bd(n){return Vt("MuiCard",n)}Ut("MuiCard",["root"]);const Fd=n=>{const{classes:i}=n;return Lt({root:["root"]},Bd,i)},Wd=ze(ht,{name:"MuiCard",slot:"Root",overridesResolver:(n,i)=>i.root})({overflow:"hidden"}),ml=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiCard"}),{className:p,raised:h=!1,...u}=l,m={...l,raised:h},g=Fd(m);return a.jsx(Wd,{className:it(g.root,p),elevation:h?8:void 0,ref:s,ownerState:m,...u})});function Zd(n){return Vt("MuiCardActionArea",n)}const Ds=Ut("MuiCardActionArea",["root","focusVisible","focusHighlight"]),$d=n=>{const{classes:i}=n;return Lt({root:["root"],focusHighlight:["focusHighlight"]},Zd,i)},Hd=ze(ao,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(n,i)=>i.root})(kt(({theme:n})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${Ds.focusHighlight}`]:{opacity:(n.vars||n).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${Ds.focusVisible} .${Ds.focusHighlight}`]:{opacity:(n.vars||n).palette.action.focusOpacity}}))),Gd=ze("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(n,i)=>i.focusHighlight})(kt(({theme:n})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:n.transitions.create("opacity",{duration:n.transitions.duration.short})}))),Jd=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiCardActionArea"}),{children:p,className:h,focusVisibleClassName:u,slots:m={},slotProps:g={},...b}=l,v=l,x=$d(v),y={slots:m,slotProps:g},[S,T]=St("root",{elementType:Hd,externalForwardedProps:{...y,...b},shouldForwardComponentProp:!0,ownerState:v,ref:s,className:it(x.root,h),additionalProps:{focusVisibleClassName:it(u,x.focusVisible)}}),[k,w]=St("focusHighlight",{elementType:Gd,externalForwardedProps:y,ownerState:v,ref:s,className:x.focusHighlight});return a.jsxs(S,{...T,children:[p,a.jsx(k,{...w})]})});function Vd(n){return Vt("MuiCardActions",n)}Ut("MuiCardActions",["root","spacing"]);const Ud=n=>{const{classes:i,disableSpacing:s}=n;return Lt({root:["root",!s&&"spacing"]},Vd,i)},qd=ze("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[i.root,!s.disableSpacing&&i.spacing]}})({display:"flex",alignItems:"center",padding:8,variants:[{props:{disableSpacing:!1},style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Kd=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiCardActions"}),{disableSpacing:p=!1,className:h,...u}=l,m={...l,disableSpacing:p},g=Ud(m);return a.jsx(qd,{className:it(g.root,h),ownerState:m,ref:s,...u})});function Xd(n){return Vt("MuiCardContent",n)}Ut("MuiCardContent",["root"]);const Yd=n=>{const{classes:i}=n;return Lt({root:["root"]},Xd,i)},Qd=ze("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(n,i)=>i.root})({padding:16,"&:last-child":{paddingBottom:24}}),fl=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiCardContent"}),{className:p,component:h="div",...u}=l,m={...l,component:h},g=Yd(m);return a.jsx(Qd,{as:h,className:it(g.root,p),ownerState:m,ref:s,...u})});function ep(n){return Vt("PrivateSwitchBase",n)}Ut("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const tp=n=>{const{classes:i,checked:s,disabled:l,edge:p}=n,h={root:["root",s&&"checked",l&&"disabled",p&&`edge${Ct(p)}`],input:["input"]};return Lt(h,ep,i)},np=ze(ao,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:n,ownerState:i})=>n==="start"&&i.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:n,ownerState:i})=>n==="end"&&i.size!=="small",style:{marginRight:-12}}]}),ip=ze("input",{name:"MuiSwitchBase",shouldForwardProp:Xo})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),op=d.forwardRef(function(i,s){const{autoFocus:l,checked:p,checkedIcon:h,defaultChecked:u,disabled:m,disableFocusRipple:g=!1,edge:b=!1,icon:v,id:x,inputProps:y,inputRef:S,name:T,onBlur:k,onChange:w,onFocus:P,readOnly:F,required:D=!1,tabIndex:z,type:j,value:K,slots:H={},slotProps:oe={},...W}=i,[te,q]=Lo({controlled:p,default:!!u,name:"SwitchBase",state:"checked"}),B=Qa(),ce=M=>{P&&P(M),B&&B.onFocus&&B.onFocus(M)},re=M=>{k&&k(M),B&&B.onBlur&&B.onBlur(M)},Se=M=>{if(M.nativeEvent.defaultPrevented)return;const O=M.target.checked;q(O),w&&w(M,O)};let ye=m;B&&typeof ye>"u"&&(ye=B.disabled);const Me=j==="checkbox"||j==="radio",X={...i,checked:te,disabled:ye,disableFocusRipple:g,edge:b},Ae=tp(X),ae={slots:H,slotProps:{input:y,...oe}},[pe,Z]=St("root",{ref:s,elementType:np,className:Ae.root,shouldForwardComponentProp:!0,externalForwardedProps:{...ae,component:"span",...W},getSlotProps:M=>({...M,onFocus:O=>{var se;(se=M.onFocus)==null||se.call(M,O),ce(O)},onBlur:O=>{var se;(se=M.onBlur)==null||se.call(M,O),re(O)}}),ownerState:X,additionalProps:{centerRipple:!0,focusRipple:!g,disabled:ye,role:void 0,tabIndex:null}}),[N,V]=St("input",{ref:S,elementType:ip,className:Ae.input,externalForwardedProps:ae,getSlotProps:M=>({onChange:O=>{var se;(se=M.onChange)==null||se.call(M,O),Se(O)}}),ownerState:X,additionalProps:{autoFocus:l,checked:p,defaultChecked:u,disabled:ye,id:Me?x:void 0,name:T,readOnly:F,required:D,tabIndex:z,type:j,...j==="checkbox"&&K===void 0?{}:{value:K}}});return a.jsxs(pe,{...Z,children:[a.jsx(N,{...V}),te?h:v]})}),sp=Ei(a.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),rp=Ei(a.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),ap=Ei(a.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function lp(n){return Vt("MuiCheckbox",n)}const Ls=Ut("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),cp=n=>{const{classes:i,indeterminate:s,color:l,size:p}=n,h={root:["root",s&&"indeterminate",`color${Ct(l)}`,`size${Ct(p)}`]},u=Lt(h,lp,i);return{...i,...u}},up=ze(op,{shouldForwardProp:n=>Xo(n)||n==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[i.root,s.indeterminate&&i.indeterminate,i[`size${Ct(s.size)}`],s.color!=="default"&&i[`color${Ct(s.color)}`]]}})(kt(({theme:n})=>({color:(n.vars||n).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette.action.activeChannel} / ${n.vars.palette.action.hoverOpacity})`:Y(n.palette.action.active,n.palette.action.hoverOpacity)}}},...Object.entries(n.palette).filter(Gs()).map(([i])=>({props:{color:i,disableRipple:!1},style:{"&:hover":{backgroundColor:n.vars?`rgba(${n.vars.palette[i].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Y(n.palette[i].main,n.palette.action.hoverOpacity)}}})),...Object.entries(n.palette).filter(Gs()).map(([i])=>({props:{color:i},style:{[`&.${Ls.checked}, &.${Ls.indeterminate}`]:{color:(n.vars||n).palette[i].main},[`&.${Ls.disabled}`]:{color:(n.vars||n).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),dp=a.jsx(rp,{}),pp=a.jsx(sp,{}),hp=a.jsx(ap,{}),Ho=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiCheckbox"}),{checkedIcon:p=dp,color:h="primary",icon:u=pp,indeterminate:m=!1,indeterminateIcon:g=hp,inputProps:b,size:v="medium",disableRipple:x=!1,className:y,slots:S={},slotProps:T={},...k}=l,w=m?g:u,P=m?g:p,F={...l,disableRipple:x,color:h,indeterminate:m,size:v},D=cp(F),z=T.input??b,[j,K]=St("root",{ref:s,elementType:up,className:it(D.root,y),shouldForwardComponentProp:!0,externalForwardedProps:{slots:S,slotProps:T,...k},ownerState:F,additionalProps:{type:"checkbox",icon:d.cloneElement(w,{fontSize:w.props.fontSize??v}),checkedIcon:d.cloneElement(P,{fontSize:P.props.fontSize??v}),disableRipple:x,slots:S,slotProps:{input:el(typeof z=="function"?z(F):z,{"data-indeterminate":m})}}});return a.jsx(j,{...K,classes:D})});function xa(n){return n.substring(2).toLowerCase()}function mp(n,i){return i.documentElement.clientWidth<n.clientX||i.documentElement.clientHeight<n.clientY}function gl(n){const{children:i,disableReactTree:s=!1,mouseEvent:l="onClick",onClickAway:p,touchEvent:h="onTouchEnd"}=n,u=d.useRef(!1),m=d.useRef(null),g=d.useRef(!1),b=d.useRef(!1);d.useEffect(()=>(setTimeout(()=>{g.current=!0},0),()=>{g.current=!1}),[]);const v=nr(tl(i),m),x=Qn(T=>{const k=b.current;b.current=!1;const w=Eo(m.current);if(!g.current||!m.current||"clientX"in T&&mp(T,w))return;if(u.current){u.current=!1;return}let P;T.composedPath?P=T.composedPath().includes(m.current):P=!w.documentElement.contains(T.target)||m.current.contains(T.target),!P&&(s||!k)&&p(T)}),y=T=>k=>{b.current=!0;const w=i.props[T];w&&w(k)},S={ref:v};return h!==!1&&(S[h]=y(h)),d.useEffect(()=>{if(h!==!1){const T=xa(h),k=Eo(m.current),w=()=>{u.current=!0};return k.addEventListener(T,x),k.addEventListener("touchmove",w),()=>{k.removeEventListener(T,x),k.removeEventListener("touchmove",w)}}},[x,h]),l!==!1&&(S[l]=y(l)),d.useEffect(()=>{if(l!==!1){const T=xa(l),k=Eo(m.current);return k.addEventListener(T,x),()=>{k.removeEventListener(T,x)}}},[x,l]),d.cloneElement(i,S)}const Us=typeof nl({})=="function",fp=(n,i)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...i&&!n.vars&&{colorScheme:n.palette.mode}}),gp=n=>({color:(n.vars||n).palette.text.primary,...n.typography.body1,backgroundColor:(n.vars||n).palette.background.default,"@media print":{backgroundColor:(n.vars||n).palette.common.white}}),yl=(n,i=!1)=>{var h,u;const s={};i&&n.colorSchemes&&typeof n.getColorSchemeSelector=="function"&&Object.entries(n.colorSchemes).forEach(([m,g])=>{var v,x;const b=n.getColorSchemeSelector(m);b.startsWith("@")?s[b]={":root":{colorScheme:(v=g.palette)==null?void 0:v.mode}}:s[b.replace(/\s*&/,"")]={colorScheme:(x=g.palette)==null?void 0:x.mode}});let l={html:fp(n,i),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:n.typography.fontWeightBold},body:{margin:0,...gp(n),"&::backdrop":{backgroundColor:(n.vars||n).palette.background.default}},...s};const p=(u=(h=n.components)==null?void 0:h.MuiCssBaseline)==null?void 0:u.styleOverrides;return p&&(l=[l,p]),l},No="mui-ecs",yp=n=>{const i=yl(n,!1),s=Array.isArray(i)?i[0]:i;return!n.vars&&s&&(s.html[`:root:has(${No})`]={colorScheme:n.palette.mode}),n.colorSchemes&&Object.entries(n.colorSchemes).forEach(([l,p])=>{var u,m;const h=n.getColorSchemeSelector(l);h.startsWith("@")?s[h]={[`:root:not(:has(.${No}))`]:{colorScheme:(u=p.palette)==null?void 0:u.mode}}:s[h.replace(/\s*&/,"")]={[`&:not(:has(.${No}))`]:{colorScheme:(m=p.palette)==null?void 0:m.mode}}}),i},vp=nl(Us?({theme:n,enableColorScheme:i})=>yl(n,i):({theme:n})=>yp(n));function xp(n){const i=Dt({props:n,name:"MuiCssBaseline"}),{children:s,enableColorScheme:l=!1}=i;return a.jsxs(d.Fragment,{children:[Us&&a.jsx(vp,{enableColorScheme:l}),!Us&&!l&&a.jsx("span",{className:No,style:{display:"none"}}),s]})}function bp(n){return Vt("MuiDialog",n)}const Es=Ut("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),vl=d.createContext({}),_p=ze(cu,{name:"MuiDialog",slot:"Backdrop",overrides:(n,i)=>i.backdrop})({zIndex:-1}),Sp=n=>{const{classes:i,scroll:s,maxWidth:l,fullWidth:p,fullScreen:h}=n,u={root:["root"],container:["container",`scroll${Ct(s)}`],paper:["paper",`paperScroll${Ct(s)}`,`paperWidth${Ct(String(l))}`,p&&"paperFullWidth",h&&"paperFullScreen"]};return Lt(u,bp,i)},Cp=ze(il,{name:"MuiDialog",slot:"Root",overridesResolver:(n,i)=>i.root})({"@media print":{position:"absolute !important"}}),wp=ze("div",{name:"MuiDialog",slot:"Container",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[i.container,i[`scroll${Ct(s.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),Tp=ze(ht,{name:"MuiDialog",slot:"Paper",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[i.paper,i[`scrollPaper${Ct(s.scroll)}`],i[`paperWidth${Ct(String(s.maxWidth))}`],s.fullWidth&&i.paperFullWidth,s.fullScreen&&i.paperFullScreen]}})(kt(({theme:n})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:i})=>!i.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:n.breakpoints.unit==="px"?Math.max(n.breakpoints.values.xs,444):`max(${n.breakpoints.values.xs}${n.breakpoints.unit}, 444px)`,[`&.${Es.paperScrollBody}`]:{[n.breakpoints.down(Math.max(n.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(n.breakpoints.values).filter(i=>i!=="xs").map(i=>({props:{maxWidth:i},style:{maxWidth:`${n.breakpoints.values[i]}${n.breakpoints.unit}`,[`&.${Es.paperScrollBody}`]:{[n.breakpoints.down(n.breakpoints.values[i]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:i})=>i.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:i})=>i.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Es.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),Rs=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiDialog"}),p=$t(),h={enter:p.transitions.duration.enteringScreen,exit:p.transitions.duration.leavingScreen},{"aria-describedby":u,"aria-labelledby":m,"aria-modal":g=!0,BackdropComponent:b,BackdropProps:v,children:x,className:y,disableEscapeKeyDown:S=!1,fullScreen:T=!1,fullWidth:k=!1,maxWidth:w="sm",onBackdropClick:P,onClick:F,onClose:D,open:z,PaperComponent:j=ht,PaperProps:K={},scroll:H="paper",slots:oe={},slotProps:W={},TransitionComponent:te=oo,transitionDuration:q=h,TransitionProps:B,...ce}=l,re={...l,disableEscapeKeyDown:S,fullScreen:T,fullWidth:k,maxWidth:w,scroll:H},Se=Sp(re),ye=d.useRef(),Me=je=>{ye.current=je.target===je.currentTarget},X=je=>{F&&F(je),ye.current&&(ye.current=null,P&&P(je),D&&D(je,"backdropClick"))},Ae=tr(m),ae=d.useMemo(()=>({titleId:Ae}),[Ae]),pe={transition:te,...oe},Z={transition:B,paper:K,backdrop:v,...W},N={slots:pe,slotProps:Z},[V,M]=St("root",{elementType:Cp,shouldForwardComponentProp:!0,externalForwardedProps:N,ownerState:re,className:it(Se.root,y),ref:s}),[O,se]=St("backdrop",{elementType:_p,shouldForwardComponentProp:!0,externalForwardedProps:N,ownerState:re}),[le,Ce]=St("paper",{elementType:Tp,shouldForwardComponentProp:!0,externalForwardedProps:N,ownerState:re,className:it(Se.paper,K.className)}),[We,ct]=St("container",{elementType:wp,externalForwardedProps:N,ownerState:re,className:it(Se.container)}),[Ne,Be]=St("transition",{elementType:oo,externalForwardedProps:N,ownerState:re,additionalProps:{appear:!0,in:z,timeout:q,role:"presentation"}});return a.jsx(V,{closeAfterTransition:!0,slots:{backdrop:O},slotProps:{backdrop:{transitionDuration:q,as:b,...se}},disableEscapeKeyDown:S,onClose:D,open:z,onClick:X,...M,...ce,children:a.jsx(Ne,{...Be,children:a.jsx(We,{onMouseDown:Me,...ct,children:a.jsx(le,{as:j,elevation:24,role:"dialog","aria-describedby":u,"aria-labelledby":Ae,"aria-modal":g,...Ce,children:a.jsx(vl.Provider,{value:ae,children:x})})})})})});function Ap(n){return Vt("MuiDialogActions",n)}Ut("MuiDialogActions",["root","spacing"]);const kp=n=>{const{classes:i,disableSpacing:s}=n;return Lt({root:["root",!s&&"spacing"]},Ap,i)},Pp=ze("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[i.root,!s.disableSpacing&&i.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:n})=>!n.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Ns=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiDialogActions"}),{className:p,disableSpacing:h=!1,...u}=l,m={...l,disableSpacing:h},g=kp(m);return a.jsx(Pp,{className:it(g.root,p),ownerState:m,ref:s,...u})});function Ip(n){return Vt("MuiDialogContent",n)}Ut("MuiDialogContent",["root","dividers"]);function Mp(n){return Vt("MuiDialogTitle",n)}const Dp=Ut("MuiDialogTitle",["root"]),Lp=n=>{const{classes:i,dividers:s}=n;return Lt({root:["root",s&&"dividers"]},Ip,i)},Ep=ze("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[i.root,s.dividers&&i.dividers]}})(kt(({theme:n})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:i})=>i.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(n.vars||n).palette.divider}`,borderBottom:`1px solid ${(n.vars||n).palette.divider}`}},{props:({ownerState:i})=>!i.dividers,style:{[`.${Dp.root} + &`]:{paddingTop:0}}}]}))),Os=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiDialogContent"}),{className:p,dividers:h=!1,...u}=l,m={...l,dividers:h},g=Lp(m);return a.jsx(Ep,{className:it(g.root,p),ownerState:m,ref:s,...u})}),Rp=n=>{const{classes:i}=n;return Lt({root:["root"]},Mp,i)},Np=ze(ue,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(n,i)=>i.root})({padding:"16px 24px",flex:"0 0 auto"}),zs=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiDialogTitle"}),{className:p,id:h,...u}=l,m=l,g=Rp(m),{titleId:b=h}=d.useContext(vl);return a.jsx(Np,{component:"h2",className:it(g.root,p),ownerState:m,ref:s,variant:"h6",id:h??b,...u})}),Op=n=>{const{absolute:i,children:s,classes:l,flexItem:p,light:h,orientation:u,textAlign:m,variant:g}=n;return Lt({root:["root",i&&"absolute",g,h&&"light",u==="vertical"&&"vertical",p&&"flexItem",s&&"withChildren",s&&u==="vertical"&&"withChildrenVertical",m==="right"&&u!=="vertical"&&"textAlignRight",m==="left"&&u!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",u==="vertical"&&"wrapperVertical"]},uu,l)},zp=ze("div",{name:"MuiDivider",slot:"Root",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[i.root,s.absolute&&i.absolute,i[s.variant],s.light&&i.light,s.orientation==="vertical"&&i.vertical,s.flexItem&&i.flexItem,s.children&&i.withChildren,s.children&&s.orientation==="vertical"&&i.withChildrenVertical,s.textAlign==="right"&&s.orientation!=="vertical"&&i.textAlignRight,s.textAlign==="left"&&s.orientation!=="vertical"&&i.textAlignLeft]}})(kt(({theme:n})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(n.vars||n).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:n.vars?`rgba(${n.vars.palette.dividerChannel} / 0.08)`:Y(n.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:n.spacing(2),marginRight:n.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:n.spacing(1),marginBottom:n.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:i})=>!!i.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:i})=>i.children&&i.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(n.vars||n).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:i})=>i.orientation==="vertical"&&i.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(n.vars||n).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:i})=>i.textAlign==="right"&&i.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:i})=>i.textAlign==="left"&&i.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),jp=ze("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[i.wrapper,s.orientation==="vertical"&&i.wrapperVertical]}})(kt(({theme:n})=>({display:"inline-block",paddingLeft:`calc(${n.spacing(1)} * 1.2)`,paddingRight:`calc(${n.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${n.spacing(1)} * 1.2)`,paddingBottom:`calc(${n.spacing(1)} * 1.2)`}}]}))),On=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiDivider"}),{absolute:p=!1,children:h,className:u,orientation:m="horizontal",component:g=h||m==="vertical"?"div":"hr",flexItem:b=!1,light:v=!1,role:x=g!=="hr"?"separator":void 0,textAlign:y="center",variant:S="fullWidth",...T}=l,k={...l,absolute:p,component:g,flexItem:b,light:v,orientation:m,role:x,textAlign:y,variant:S},w=Op(k);return a.jsx(zp,{as:g,className:it(w.root,u),role:x,ref:s,ownerState:k,"aria-orientation":x==="separator"&&(g!=="hr"||m==="vertical")?m:void 0,...T,children:h?a.jsx(jp,{className:w.wrapper,ownerState:k,children:h}):null})});On&&(On.muiSkipListHighlight=!0);function Bp(n,i,s){const l=i.getBoundingClientRect(),p=s&&s.getBoundingClientRect(),h=Yo(i);let u;if(i.fakeTransform)u=i.fakeTransform;else{const b=h.getComputedStyle(i);u=b.getPropertyValue("-webkit-transform")||b.getPropertyValue("transform")}let m=0,g=0;if(u&&u!=="none"&&typeof u=="string"){const b=u.split("(")[1].split(")")[0].split(",");m=parseInt(b[4],10),g=parseInt(b[5],10)}return n==="left"?p?`translateX(${p.right+m-l.left}px)`:`translateX(${h.innerWidth+m-l.left}px)`:n==="right"?p?`translateX(-${l.right-p.left-m}px)`:`translateX(-${l.left+l.width-m}px)`:n==="up"?p?`translateY(${p.bottom+g-l.top}px)`:`translateY(${h.innerHeight+g-l.top}px)`:p?`translateY(-${l.top-p.top+l.height-g}px)`:`translateY(-${l.top+l.height-g}px)`}function Fp(n){return typeof n=="function"?n():n}function Ao(n,i,s){const l=Fp(s),p=Bp(n,i,l);p&&(i.style.webkitTransform=p,i.style.transform=p)}const Wp=d.forwardRef(function(i,s){const l=$t(),p={enter:l.transitions.easing.easeOut,exit:l.transitions.easing.sharp},h={enter:l.transitions.duration.enteringScreen,exit:l.transitions.duration.leavingScreen},{addEndListener:u,appear:m=!0,children:g,container:b,direction:v="down",easing:x=p,in:y,onEnter:S,onEntered:T,onEntering:k,onExit:w,onExited:P,onExiting:F,style:D,timeout:z=h,TransitionComponent:j=du,...K}=i,H=d.useRef(null),oe=nr(tl(g),H,s),W=X=>Ae=>{X&&(Ae===void 0?X(H.current):X(H.current,Ae))},te=W((X,Ae)=>{Ao(v,X,b),pu(X),S&&S(X,Ae)}),q=W((X,Ae)=>{const ae=la({timeout:z,style:D,easing:x},{mode:"enter"});X.style.webkitTransition=l.transitions.create("-webkit-transform",{...ae}),X.style.transition=l.transitions.create("transform",{...ae}),X.style.webkitTransform="none",X.style.transform="none",k&&k(X,Ae)}),B=W(T),ce=W(F),re=W(X=>{const Ae=la({timeout:z,style:D,easing:x},{mode:"exit"});X.style.webkitTransition=l.transitions.create("-webkit-transform",Ae),X.style.transition=l.transitions.create("transform",Ae),Ao(v,X,b),w&&w(X)}),Se=W(X=>{X.style.webkitTransition="",X.style.transition="",P&&P(X)}),ye=X=>{u&&u(H.current,X)},Me=d.useCallback(()=>{H.current&&Ao(v,H.current,b)},[v,b]);return d.useEffect(()=>{if(y||v==="down"||v==="right")return;const X=ir(()=>{H.current&&Ao(v,H.current,b)}),Ae=Yo(H.current);return Ae.addEventListener("resize",X),()=>{X.clear(),Ae.removeEventListener("resize",X)}},[v,y,b]),d.useEffect(()=>{y||Me()},[y,Me]),a.jsx(j,{nodeRef:H,onEnter:te,onEntered:B,onEntering:q,onExit:re,onExited:Se,onExiting:ce,addEndListener:ye,appear:m,in:y,timeout:z,...K,children:(X,{ownerState:Ae,...ae})=>d.cloneElement(g,{ref:oe,style:{visibility:X==="exited"&&!y?"hidden":void 0,...D,...g.props.style},...ae})})});function Zp(n){return Vt("MuiDrawer",n)}Ut("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const xl=(n,i)=>{const{ownerState:s}=n;return[i.root,(s.variant==="permanent"||s.variant==="persistent")&&i.docked,i.modal]},$p=n=>{const{classes:i,anchor:s,variant:l}=n,p={root:["root",`anchor${Ct(s)}`],docked:[(l==="permanent"||l==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Ct(s)}`,l!=="temporary"&&`paperAnchorDocked${Ct(s)}`]};return Lt(p,Zp,i)},Hp=ze(il,{name:"MuiDrawer",slot:"Root",overridesResolver:xl})(kt(({theme:n})=>({zIndex:(n.vars||n).zIndex.drawer}))),Gp=ze("div",{shouldForwardProp:Xo,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:xl})({flex:"0 0 auto"}),Jp=ze(ht,{name:"MuiDrawer",slot:"Paper",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[i.paper,i[`paperAnchor${Ct(s.anchor)}`],s.variant!=="temporary"&&i[`paperAnchorDocked${Ct(s.anchor)}`]]}})(kt(({theme:n})=>({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(n.vars||n).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:({ownerState:i})=>i.anchor==="left"&&i.variant!=="temporary",style:{borderRight:`1px solid ${(n.vars||n).palette.divider}`}},{props:({ownerState:i})=>i.anchor==="top"&&i.variant!=="temporary",style:{borderBottom:`1px solid ${(n.vars||n).palette.divider}`}},{props:({ownerState:i})=>i.anchor==="right"&&i.variant!=="temporary",style:{borderLeft:`1px solid ${(n.vars||n).palette.divider}`}},{props:({ownerState:i})=>i.anchor==="bottom"&&i.variant!=="temporary",style:{borderTop:`1px solid ${(n.vars||n).palette.divider}`}}]}))),bl={left:"right",right:"left",top:"down",bottom:"up"};function Vp(n){return["left","right"].includes(n)}function Up({direction:n},i){return n==="rtl"&&Vp(i)?bl[i]:i}const qp=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiDrawer"}),p=$t(),h=or(),u={enter:p.transitions.duration.enteringScreen,exit:p.transitions.duration.leavingScreen},{anchor:m="left",BackdropProps:g,children:b,className:v,elevation:x=16,hideBackdrop:y=!1,ModalProps:{BackdropProps:S,...T}={},onClose:k,open:w=!1,PaperProps:P={},SlideProps:F,TransitionComponent:D,transitionDuration:z=u,variant:j="temporary",slots:K={},slotProps:H={},...oe}=l,W=d.useRef(!1);d.useEffect(()=>{W.current=!0},[]);const te=Up({direction:h?"rtl":"ltr"},m),B={...l,anchor:m,elevation:x,open:w,variant:j,...oe},ce=$p(B),re={slots:{transition:D,...K},slotProps:{paper:P,transition:F,...H,backdrop:el(H.backdrop||{...g,...S},{transitionDuration:z})}},[Se,ye]=St("root",{ref:s,elementType:Hp,className:it(ce.root,ce.modal,v),shouldForwardComponentProp:!0,ownerState:B,externalForwardedProps:{...re,...oe,...T},additionalProps:{open:w,onClose:k,hideBackdrop:y,slots:{backdrop:re.slots.backdrop},slotProps:{backdrop:re.slotProps.backdrop}}}),[Me,X]=St("paper",{elementType:Jp,shouldForwardComponentProp:!0,className:it(ce.paper,P.className),ownerState:B,externalForwardedProps:re,additionalProps:{elevation:j==="temporary"?x:0,square:!0}}),[Ae,ae]=St("docked",{elementType:Gp,ref:s,className:it(ce.root,ce.docked,v),ownerState:B,externalForwardedProps:re,additionalProps:oe}),[pe,Z]=St("transition",{elementType:Wp,ownerState:B,externalForwardedProps:re,additionalProps:{in:w,direction:bl[te],timeout:z,appear:W.current}}),N=a.jsx(Me,{...X,children:b});if(j==="permanent")return a.jsx(Ae,{...ae,children:N});const V=a.jsx(pe,{...Z,children:N});return j==="persistent"?a.jsx(Ae,{...ae,children:V}):a.jsx(Se,{...ye,children:V})});function Kp(n){return Vt("MuiFormControlLabel",n)}const Vi=Ut("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Xp=n=>{const{classes:i,disabled:s,labelPlacement:l,error:p,required:h}=n,u={root:["root",s&&"disabled",`labelPlacement${Ct(l)}`,p&&"error",h&&"required"],label:["label",s&&"disabled"],asterisk:["asterisk",p&&"error"]};return Lt(u,Kp,i)},Yp=ze("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[{[`& .${Vi.label}`]:i.label},i.root,i[`labelPlacement${Ct(s.labelPlacement)}`]]}})(kt(({theme:n})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Vi.disabled}`]:{cursor:"default"},[`& .${Vi.label}`]:{[`&.${Vi.disabled}`]:{color:(n.vars||n).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:i})=>i==="start"||i==="top"||i==="bottom",style:{marginLeft:16}}]}))),Qp=ze("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(n,i)=>i.asterisk})(kt(({theme:n})=>({[`&.${Vi.error}`]:{color:(n.vars||n).palette.error.main}}))),eh=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiFormControlLabel"}),{checked:p,className:h,componentsProps:u={},control:m,disabled:g,disableTypography:b,inputRef:v,label:x,labelPlacement:y="end",name:S,onChange:T,required:k,slots:w={},slotProps:P={},value:F,...D}=l,z=Qa(),j=g??m.props.disabled??(z==null?void 0:z.disabled),K=k??m.props.required,H={disabled:j,required:K};["checked","name","onChange","value","inputRef"].forEach(Se=>{typeof m.props[Se]>"u"&&typeof l[Se]<"u"&&(H[Se]=l[Se])});const oe=hu({props:l,muiFormControl:z,states:["error"]}),W={...l,disabled:j,labelPlacement:y,required:K,error:oe.error},te=Xp(W),q={slots:w,slotProps:{...u,...P}},[B,ce]=St("typography",{elementType:ue,externalForwardedProps:q,ownerState:W});let re=x;return re!=null&&re.type!==ue&&!b&&(re=a.jsx(B,{component:"span",...ce,className:it(te.label,ce==null?void 0:ce.className),children:re})),a.jsxs(Yp,{className:it(te.root,h),ownerState:W,ref:s,...D,children:[d.cloneElement(m,H),K?a.jsxs("div",{children:[re,a.jsxs(Qp,{ownerState:W,"aria-hidden":!0,className:te.asterisk,children:["â€‰","*"]})]}):re]})});function th(n){return Vt("MuiListItemButton",n)}const Gi=Ut("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),nh=(n,i)=>{const{ownerState:s}=n;return[i.root,s.dense&&i.dense,s.alignItems==="flex-start"&&i.alignItemsFlexStart,s.divider&&i.divider,!s.disableGutters&&i.gutters]},ih=n=>{const{alignItems:i,classes:s,dense:l,disabled:p,disableGutters:h,divider:u,selected:m}=n,b=Lt({root:["root",l&&"dense",!h&&"gutters",u&&"divider",p&&"disabled",i==="flex-start"&&"alignItemsFlexStart",m&&"selected"]},th,s);return{...s,...b}},oh=ze(ao,{shouldForwardProp:n=>Xo(n)||n==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:nh})(kt(({theme:n})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:n.transitions.create("background-color",{duration:n.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(n.vars||n).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Gi.selected}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.selectedOpacity})`:Y(n.palette.primary.main,n.palette.action.selectedOpacity),[`&.${Gi.focusVisible}`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.focusOpacity}))`:Y(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.focusOpacity)}},[`&.${Gi.selected}:hover`]:{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / calc(${n.vars.palette.action.selectedOpacity} + ${n.vars.palette.action.hoverOpacity}))`:Y(n.palette.primary.main,n.palette.action.selectedOpacity+n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:n.vars?`rgba(${n.vars.palette.primary.mainChannel} / ${n.vars.palette.action.selectedOpacity})`:Y(n.palette.primary.main,n.palette.action.selectedOpacity)}},[`&.${Gi.focusVisible}`]:{backgroundColor:(n.vars||n).palette.action.focus},[`&.${Gi.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity},variants:[{props:({ownerState:i})=>i.divider,style:{borderBottom:`1px solid ${(n.vars||n).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:i})=>!i.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:i})=>i.dense,style:{paddingTop:4,paddingBottom:4}}]}))),_l=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiListItemButton"}),{alignItems:p="center",autoFocus:h=!1,component:u="div",children:m,dense:g=!1,disableGutters:b=!1,divider:v=!1,focusVisibleClassName:x,selected:y=!1,className:S,...T}=l,k=d.useContext(Fo),w=d.useMemo(()=>({dense:g||k.dense||!1,alignItems:p,disableGutters:b}),[p,k.dense,g,b]),P=d.useRef(null);qo(()=>{h&&P.current&&P.current.focus()},[h]);const F={...l,alignItems:p,dense:w.dense,disableGutters:b,divider:v,selected:y},D=ih(F),z=nr(P,s);return a.jsx(Fo.Provider,{value:w,children:a.jsx(oh,{ref:z,href:T.href||T.to,component:(T.href||T.to)&&u==="div"?"button":u,focusVisibleClassName:it(D.focusVisible,x),ownerState:F,className:it(D.root,S),...T,classes:D,children:m})})}),sh=n=>{const{alignItems:i,classes:s}=n;return Lt({root:["root",i==="flex-start"&&"alignItemsFlexStart"]},mu,s)},rh=ze("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[i.root,s.alignItems==="flex-start"&&i.alignItemsFlexStart]}})(kt(({theme:n})=>({minWidth:56,color:(n.vars||n).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),qs=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiListItemIcon"}),{className:p,...h}=l,u=d.useContext(Fo),m={...l,alignItems:u.alignItems},g=sh(m);return a.jsx(rh,{className:it(g.root,p),ownerState:m,ref:s,...h})}),ah=n=>{const{classes:i,inset:s,primary:l,secondary:p,dense:h}=n;return Lt({root:["root",s&&"inset",h&&"dense",l&&p&&"multiline"],primary:["primary"],secondary:["secondary"]},fu,i)},lh=ze("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[{[`& .${Co.primary}`]:i.primary},{[`& .${Co.secondary}`]:i.secondary},i.root,s.inset&&i.inset,s.primary&&s.secondary&&i.multiline,s.dense&&i.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${ca.root}:where(& .${Co.primary})`]:{display:"block"},[`.${ca.root}:where(& .${Co.secondary})`]:{display:"block"},variants:[{props:({ownerState:n})=>n.primary&&n.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:n})=>n.inset,style:{paddingLeft:56}}]}),Go=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiListItemText"}),{children:p,className:h,disableTypography:u=!1,inset:m=!1,primary:g,primaryTypographyProps:b,secondary:v,secondaryTypographyProps:x,slots:y={},slotProps:S={},...T}=l,{dense:k}=d.useContext(Fo);let w=g??p,P=v;const F={...l,disableTypography:u,inset:m,primary:!!w,secondary:!!P,dense:k},D=ah(F),z={slots:y,slotProps:{primary:b,secondary:x,...S}},[j,K]=St("root",{className:it(D.root,h),elementType:lh,externalForwardedProps:{...z,...T},ownerState:F,ref:s}),[H,oe]=St("primary",{className:D.primary,elementType:ue,externalForwardedProps:z,ownerState:F}),[W,te]=St("secondary",{className:D.secondary,elementType:ue,externalForwardedProps:z,ownerState:F});return w!=null&&w.type!==ue&&!u&&(w=a.jsx(H,{variant:k?"body2":"body1",component:oe!=null&&oe.variant?void 0:"span",...oe,children:w})),P!=null&&P.type!==ue&&!u&&(P=a.jsx(W,{variant:"body2",color:"textSecondary",...te,children:P})),a.jsxs(j,{...K,children:[w,P]})});function ch(n){return Vt("MuiTab",n)}const Sn=Ut("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),uh=n=>{const{classes:i,textColor:s,fullWidth:l,wrapped:p,icon:h,label:u,selected:m,disabled:g}=n,b={root:["root",h&&u&&"labelIcon",`textColor${Ct(s)}`,l&&"fullWidth",p&&"wrapped",m&&"selected",g&&"disabled"],icon:["iconWrapper","icon"]};return Lt(b,ch,i)},dh=ze(ao,{name:"MuiTab",slot:"Root",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[i.root,s.label&&s.icon&&i.labelIcon,i[`textColor${Ct(s.textColor)}`],s.fullWidth&&i.fullWidth,s.wrapped&&i.wrapped,{[`& .${Sn.iconWrapper}`]:i.iconWrapper},{[`& .${Sn.icon}`]:i.icon}]}})(kt(({theme:n})=>({...n.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:({ownerState:i})=>i.label&&(i.iconPosition==="top"||i.iconPosition==="bottom"),style:{flexDirection:"column"}},{props:({ownerState:i})=>i.label&&i.iconPosition!=="top"&&i.iconPosition!=="bottom",style:{flexDirection:"row"}},{props:({ownerState:i})=>i.icon&&i.label,style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:({ownerState:i,iconPosition:s})=>i.icon&&i.label&&s==="top",style:{[`& > .${Sn.icon}`]:{marginBottom:6}}},{props:({ownerState:i,iconPosition:s})=>i.icon&&i.label&&s==="bottom",style:{[`& > .${Sn.icon}`]:{marginTop:6}}},{props:({ownerState:i,iconPosition:s})=>i.icon&&i.label&&s==="start",style:{[`& > .${Sn.icon}`]:{marginRight:n.spacing(1)}}},{props:({ownerState:i,iconPosition:s})=>i.icon&&i.label&&s==="end",style:{[`& > .${Sn.icon}`]:{marginLeft:n.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,[`&.${Sn.selected}`]:{opacity:1},[`&.${Sn.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(n.vars||n).palette.text.secondary,[`&.${Sn.selected}`]:{color:(n.vars||n).palette.primary.main},[`&.${Sn.disabled}`]:{color:(n.vars||n).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(n.vars||n).palette.text.secondary,[`&.${Sn.selected}`]:{color:(n.vars||n).palette.secondary.main},[`&.${Sn.disabled}`]:{color:(n.vars||n).palette.text.disabled}}},{props:({ownerState:i})=>i.fullWidth,style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:({ownerState:i})=>i.wrapped,style:{fontSize:n.typography.pxToRem(12)}}]}))),ba=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiTab"}),{className:p,disabled:h=!1,disableFocusRipple:u=!1,fullWidth:m,icon:g,iconPosition:b="top",indicator:v,label:x,onChange:y,onClick:S,onFocus:T,selected:k,selectionFollowsFocus:w,textColor:P="inherit",value:F,wrapped:D=!1,...z}=l,j={...l,disabled:h,disableFocusRipple:u,selected:k,icon:!!g,iconPosition:b,label:!!x,fullWidth:m,textColor:P,wrapped:D},K=uh(j),H=g&&x&&d.isValidElement(g)?d.cloneElement(g,{className:it(K.icon,g.props.className)}):g,oe=te=>{!k&&y&&y(te,F),S&&S(te)},W=te=>{w&&!k&&y&&y(te,F),T&&T(te)};return a.jsxs(dh,{focusRipple:!u,className:it(K.root,p),ref:s,role:"tab","aria-selected":k,disabled:h,onClick:oe,onFocus:W,ownerState:j,tabIndex:k?0:-1,...z,children:[b==="top"||b==="start"?a.jsxs(d.Fragment,{children:[H,x]}):a.jsxs(d.Fragment,{children:[x,H]}),v]})});function ph(n){return Vt("MuiToolbar",n)}Ut("MuiToolbar",["root","gutters","regular","dense"]);const hh=n=>{const{classes:i,disableGutters:s,variant:l}=n;return Lt({root:["root",!s&&"gutters",l]},ph,i)},mh=ze("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[i.root,!s.disableGutters&&i.gutters,i[s.variant]]}})(kt(({theme:n})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:i})=>!i.disableGutters,style:{paddingLeft:n.spacing(2),paddingRight:n.spacing(2),[n.breakpoints.up("sm")]:{paddingLeft:n.spacing(3),paddingRight:n.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:n.mixins.toolbar}]}))),fh=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiToolbar"}),{className:p,component:h="div",disableGutters:u=!1,variant:m="regular",...g}=l,b={...l,component:h,disableGutters:u,variant:m},v=hh(b);return a.jsx(mh,{as:h,className:it(v.root,p),ref:s,ownerState:b,...g})}),gh=Ei(a.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),yh=Ei(a.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function vh(n){return(1+Math.sin(Math.PI*n-Math.PI/2))/2}function xh(n,i,s,l={},p=()=>{}){const{ease:h=vh,duration:u=300}=l;let m=null;const g=i[n];let b=!1;const v=()=>{b=!0},x=y=>{if(b){p(new Error("Animation cancelled"));return}m===null&&(m=y);const S=Math.min(1,(y-m)/u);if(i[n]=h(S)*(s-g)+g,S>=1){requestAnimationFrame(()=>{p(null)});return}requestAnimationFrame(x)};return g===s?(p(new Error("Element already at target position")),v):(requestAnimationFrame(x),v)}const bh={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function _h(n){const{onChange:i,...s}=n,l=d.useRef(),p=d.useRef(null),h=()=>{l.current=p.current.offsetHeight-p.current.clientHeight};return qo(()=>{const u=ir(()=>{const g=l.current;h(),g!==l.current&&i(l.current)}),m=Yo(p.current);return m.addEventListener("resize",u),()=>{u.clear(),m.removeEventListener("resize",u)}},[i]),d.useEffect(()=>{h(),i(l.current)},[i]),a.jsx("div",{style:bh,...s,ref:p})}function Sh(n){return Vt("MuiTabScrollButton",n)}const Ch=Ut("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),wh=n=>{const{classes:i,orientation:s,disabled:l}=n;return Lt({root:["root",s,l&&"disabled"]},Sh,i)},Th=ze(ao,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[i.root,s.orientation&&i[s.orientation]]}})({width:40,flexShrink:0,opacity:.8,[`&.${Ch.disabled}`]:{opacity:0},variants:[{props:{orientation:"vertical"},style:{width:"100%",height:40,"& svg":{transform:"var(--TabScrollButton-svgRotate)"}}}]}),Ah=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiTabScrollButton"}),{className:p,slots:h={},slotProps:u={},direction:m,orientation:g,disabled:b,...v}=l,x=or(),y={isRtl:x,...l},S=wh(y),T=h.StartScrollButtonIcon??gh,k=h.EndScrollButtonIcon??yh,w=Wo({elementType:T,externalSlotProps:u.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:y}),P=Wo({elementType:k,externalSlotProps:u.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:y});return a.jsx(Th,{component:"div",className:it(S.root,p),ref:s,role:null,ownerState:y,tabIndex:null,...v,style:{...v.style,...g==="vertical"&&{"--TabScrollButton-svgRotate":`rotate(${x?-90:90}deg)`}},children:m==="left"?a.jsx(T,{...w}):a.jsx(k,{...P})})});function kh(n){return Vt("MuiTabs",n)}const js=Ut("MuiTabs",["root","vertical","list","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),_a=(n,i)=>n===i?n.firstChild:i&&i.nextElementSibling?i.nextElementSibling:n.firstChild,Sa=(n,i)=>n===i?n.lastChild:i&&i.previousElementSibling?i.previousElementSibling:n.lastChild,ko=(n,i,s)=>{let l=!1,p=s(n,i);for(;p;){if(p===n.firstChild){if(l)return;l=!0}const h=p.disabled||p.getAttribute("aria-disabled")==="true";if(!p.hasAttribute("tabindex")||h)p=s(n,p);else{p.focus();return}}},Ph=n=>{const{vertical:i,fixed:s,hideScrollbar:l,scrollableX:p,scrollableY:h,centered:u,scrollButtonsHideMobile:m,classes:g}=n;return Lt({root:["root",i&&"vertical"],scroller:["scroller",s&&"fixed",l&&"hideScrollbar",p&&"scrollableX",h&&"scrollableY"],list:["list","flexContainer",i&&"flexContainerVertical",i&&"vertical",u&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",m&&"scrollButtonsHideMobile"],scrollableX:[p&&"scrollableX"],hideScrollbar:[l&&"hideScrollbar"]},kh,g)},Ih=ze("div",{name:"MuiTabs",slot:"Root",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[{[`& .${js.scrollButtons}`]:i.scrollButtons},{[`& .${js.scrollButtons}`]:s.scrollButtonsHideMobile&&i.scrollButtonsHideMobile},i.root,s.vertical&&i.vertical]}})(kt(({theme:n})=>({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex",variants:[{props:({ownerState:i})=>i.vertical,style:{flexDirection:"column"}},{props:({ownerState:i})=>i.scrollButtonsHideMobile,style:{[`& .${js.scrollButtons}`]:{[n.breakpoints.down("sm")]:{display:"none"}}}}]}))),Mh=ze("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[i.scroller,s.fixed&&i.fixed,s.hideScrollbar&&i.hideScrollbar,s.scrollableX&&i.scrollableX,s.scrollableY&&i.scrollableY]}})({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap",variants:[{props:({ownerState:n})=>n.fixed,style:{overflowX:"hidden",width:"100%"}},{props:({ownerState:n})=>n.hideScrollbar,style:{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}},{props:({ownerState:n})=>n.scrollableX,style:{overflowX:"auto",overflowY:"hidden"}},{props:({ownerState:n})=>n.scrollableY,style:{overflowY:"auto",overflowX:"hidden"}}]}),Dh=ze("div",{name:"MuiTabs",slot:"List",overridesResolver:(n,i)=>{const{ownerState:s}=n;return[i.list,i.flexContainer,s.vertical&&i.flexContainerVertical,s.centered&&i.centered]}})({display:"flex",variants:[{props:({ownerState:n})=>n.vertical,style:{flexDirection:"column"}},{props:({ownerState:n})=>n.centered,style:{justifyContent:"center"}}]}),Lh=ze("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(n,i)=>i.indicator})(kt(({theme:n})=>({position:"absolute",height:2,bottom:0,width:"100%",transition:n.transitions.create(),variants:[{props:{indicatorColor:"primary"},style:{backgroundColor:(n.vars||n).palette.primary.main}},{props:{indicatorColor:"secondary"},style:{backgroundColor:(n.vars||n).palette.secondary.main}},{props:({ownerState:i})=>i.vertical,style:{height:"100%",width:2,right:0}}]}))),Eh=ze(_h)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),Ca={},Rh=d.forwardRef(function(i,s){const l=Dt({props:i,name:"MuiTabs"}),p=$t(),h=or(),{"aria-label":u,"aria-labelledby":m,action:g,centered:b=!1,children:v,className:x,component:y="div",allowScrollButtonsMobile:S=!1,indicatorColor:T="primary",onChange:k,orientation:w="horizontal",ScrollButtonComponent:P,scrollButtons:F="auto",selectionFollowsFocus:D,slots:z={},slotProps:j={},TabIndicatorProps:K={},TabScrollButtonProps:H={},textColor:oe="primary",value:W,variant:te="standard",visibleScrollbar:q=!1,...B}=l,ce=te==="scrollable",re=w==="vertical",Se=re?"scrollTop":"scrollLeft",ye=re?"top":"left",Me=re?"bottom":"right",X=re?"clientHeight":"clientWidth",Ae=re?"height":"width",ae={...l,component:y,allowScrollButtonsMobile:S,indicatorColor:T,orientation:w,vertical:re,scrollButtons:F,textColor:oe,variant:te,visibleScrollbar:q,fixed:!ce,hideScrollbar:ce&&!q,scrollableX:ce&&!re,scrollableY:ce&&re,centered:b&&!ce,scrollButtonsHideMobile:!S},pe=Ph(ae),Z=Wo({elementType:z.StartScrollButtonIcon,externalSlotProps:j.startScrollButtonIcon,ownerState:ae}),N=Wo({elementType:z.EndScrollButtonIcon,externalSlotProps:j.endScrollButtonIcon,ownerState:ae}),[V,M]=d.useState(!1),[O,se]=d.useState(Ca),[le,Ce]=d.useState(!1),[We,ct]=d.useState(!1),[Ne,Be]=d.useState(!1),[je,Ge]=d.useState({overflow:"hidden",scrollbarWidth:0}),wt=new Map,me=d.useRef(null),Pe=d.useRef(null),ke={slots:z,slotProps:{indicator:K,scrollButton:H,...j}},bt=()=>{const Q=me.current;let G;if(Q){const ie=Q.getBoundingClientRect();G={clientWidth:Q.clientWidth,scrollLeft:Q.scrollLeft,scrollTop:Q.scrollTop,scrollWidth:Q.scrollWidth,top:ie.top,bottom:ie.bottom,left:ie.left,right:ie.right}}let ee;if(Q&&W!==!1){const ie=Pe.current.children;if(ie.length>0){const Je=ie[wt.get(W)];ee=Je?Je.getBoundingClientRect():null}}return{tabsMeta:G,tabMeta:ee}},st=Qn(()=>{const{tabsMeta:Q,tabMeta:G}=bt();let ee=0,ie;re?(ie="top",G&&Q&&(ee=G.top-Q.top+Q.scrollTop)):(ie=h?"right":"left",G&&Q&&(ee=(h?-1:1)*(G[ie]-Q[ie]+Q.scrollLeft)));const Je={[ie]:ee,[Ae]:G?G[Ae]:0};if(typeof O[ie]!="number"||typeof O[Ae]!="number")se(Je);else{const tt=Math.abs(O[ie]-Je[ie]),fe=Math.abs(O[Ae]-Je[Ae]);(tt>=1||fe>=1)&&se(Je)}}),_t=(Q,{animation:G=!0}={})=>{G?xh(Se,me.current,Q,{duration:p.transitions.duration.standard}):me.current[Se]=Q},At=Q=>{let G=me.current[Se];re?G+=Q:G+=Q*(h?-1:1),_t(G)},ut=()=>{const Q=me.current[X];let G=0;const ee=Array.from(Pe.current.children);for(let ie=0;ie<ee.length;ie+=1){const Je=ee[ie];if(G+Je[X]>Q){ie===0&&(G=Q);break}G+=Je[X]}return G},gt=()=>{At(-1*ut())},jt=()=>{At(ut())},[Et,{onChange:Ve,...He}]=St("scrollbar",{className:it(pe.scrollableX,pe.hideScrollbar),elementType:Eh,shouldForwardComponentProp:!0,externalForwardedProps:ke,ownerState:ae}),Ee=d.useCallback(Q=>{Ve==null||Ve(Q),Ge({overflow:null,scrollbarWidth:Q})},[Ve]),[mt,dt]=St("scrollButtons",{className:it(pe.scrollButtons,H.className),elementType:Ah,externalForwardedProps:ke,ownerState:ae,additionalProps:{orientation:w,slots:{StartScrollButtonIcon:z.startScrollButtonIcon||z.StartScrollButtonIcon,EndScrollButtonIcon:z.endScrollButtonIcon||z.EndScrollButtonIcon},slotProps:{startScrollButtonIcon:Z,endScrollButtonIcon:N}}}),yt=()=>{const Q={};Q.scrollbarSizeListener=ce?a.jsx(Et,{...He,onChange:Ee}):null;const ee=ce&&(F==="auto"&&(le||We)||F===!0);return Q.scrollButtonStart=ee?a.jsx(mt,{direction:h?"right":"left",onClick:gt,disabled:!le,...dt}):null,Q.scrollButtonEnd=ee?a.jsx(mt,{direction:h?"left":"right",onClick:jt,disabled:!We,...dt}):null,Q},Xt=Qn(Q=>{const{tabsMeta:G,tabMeta:ee}=bt();if(!(!ee||!G)){if(ee[ye]<G[ye]){const ie=G[Se]+(ee[ye]-G[ye]);_t(ie,{animation:Q})}else if(ee[Me]>G[Me]){const ie=G[Se]+(ee[Me]-G[Me]);_t(ie,{animation:Q})}}}),vt=Qn(()=>{ce&&F!==!1&&Be(!Ne)});d.useEffect(()=>{const Q=ir(()=>{me.current&&st()});let G;const ee=tt=>{tt.forEach(fe=>{fe.removedNodes.forEach(Ht=>{G==null||G.unobserve(Ht)}),fe.addedNodes.forEach(Ht=>{G==null||G.observe(Ht)})}),Q(),vt()},ie=Yo(me.current);ie.addEventListener("resize",Q);let Je;return typeof ResizeObserver<"u"&&(G=new ResizeObserver(Q),Array.from(Pe.current.children).forEach(tt=>{G.observe(tt)})),typeof MutationObserver<"u"&&(Je=new MutationObserver(ee),Je.observe(Pe.current,{childList:!0})),()=>{Q.clear(),ie.removeEventListener("resize",Q),Je==null||Je.disconnect(),G==null||G.disconnect()}},[st,vt]),d.useEffect(()=>{const Q=Array.from(Pe.current.children),G=Q.length;if(typeof IntersectionObserver<"u"&&G>0&&ce&&F!==!1){const ee=Q[0],ie=Q[G-1],Je={root:me.current,threshold:.99},tt=lt=>{Ce(!lt[0].isIntersecting)},fe=new IntersectionObserver(tt,Je);fe.observe(ee);const Ht=lt=>{ct(!lt[0].isIntersecting)},xt=new IntersectionObserver(Ht,Je);return xt.observe(ie),()=>{fe.disconnect(),xt.disconnect()}}},[ce,F,Ne,v==null?void 0:v.length]),d.useEffect(()=>{M(!0)},[]),d.useEffect(()=>{st()}),d.useEffect(()=>{Xt(Ca!==O)},[Xt,O]),d.useImperativeHandle(g,()=>({updateIndicator:st,updateScrollButtons:vt}),[st,vt]);const[Bt,Yt]=St("indicator",{className:it(pe.indicator,K.className),elementType:Lh,externalForwardedProps:ke,ownerState:ae,additionalProps:{style:O}}),on=a.jsx(Bt,{...Yt});let qt=0;const Ft=d.Children.map(v,Q=>{if(!d.isValidElement(Q))return null;const G=Q.props.value===void 0?qt:Q.props.value;wt.set(G,qt);const ee=G===W;return qt+=1,d.cloneElement(Q,{fullWidth:te==="fullWidth",indicator:ee&&!V&&on,selected:ee,selectionFollowsFocus:D,onChange:k,textColor:oe,value:G,...qt===1&&W===!1&&!Q.props.tabIndex?{tabIndex:0}:{}})}),de=Q=>{if(Q.altKey||Q.shiftKey||Q.ctrlKey||Q.metaKey)return;const G=Pe.current,ee=Eo(G).activeElement;if(ee.getAttribute("role")!=="tab")return;let Je=w==="horizontal"?"ArrowLeft":"ArrowUp",tt=w==="horizontal"?"ArrowRight":"ArrowDown";switch(w==="horizontal"&&h&&(Je="ArrowRight",tt="ArrowLeft"),Q.key){case Je:Q.preventDefault(),ko(G,ee,Sa);break;case tt:Q.preventDefault(),ko(G,ee,_a);break;case"Home":Q.preventDefault(),ko(G,null,_a);break;case"End":Q.preventDefault(),ko(G,null,Sa);break}},A=yt(),[U,xe]=St("root",{ref:s,className:it(pe.root,x),elementType:Ih,externalForwardedProps:{...ke,...B,component:y},ownerState:ae}),[Ke,Ze]=St("scroller",{ref:me,className:pe.scroller,elementType:Mh,externalForwardedProps:ke,ownerState:ae,additionalProps:{style:{overflow:je.overflow,[re?`margin${h?"Left":"Right"}`:"marginBottom"]:q?void 0:-je.scrollbarWidth}}}),[De,Ue]=St("list",{ref:Pe,className:it(pe.list,pe.flexContainer),elementType:Dh,externalForwardedProps:ke,ownerState:ae,getSlotProps:Q=>({...Q,onKeyDown:G=>{var ee;de(G),(ee=Q.onKeyDown)==null||ee.call(Q,G)}})});return a.jsxs(U,{...xe,children:[A.scrollButtonStart,A.scrollbarSizeListener,a.jsxs(Ke,{...Ze,children:[a.jsx(De,{"aria-label":u,"aria-labelledby":m,"aria-orientation":w==="vertical"?"vertical":null,role:"tablist",...Ue,children:Ft}),V&&on]}),A.scrollButtonEnd]})}),Nh=mn(Te),wa=mn(ht),Oh=({allResources:n,calloutGroups:i,onStart:s,onDismiss:l})=>{const p=$t(),[h,u]=d.useState(""),[m,g]=d.useState(""),[b,v]=d.useState(!1),x=d.useRef(null),y=h?n.filter(w=>w.calloutGroup===h):[],S=d.useMemo(()=>{if(!m.trim())return i;const w=m.toLowerCase();return i.filter(P=>P.toLowerCase().includes(w))},[i,m]),T=d.useMemo(()=>{const w=new Map;for(const P of n){const F=P.calloutGroup??"";F&&w.set(F,(w.get(F)??0)+1)}return w},[n]);d.useEffect(()=>{if(!h){g("");return}g(h)},[h]),d.useEffect(()=>{const w=F=>{x.current&&(x.current.contains(F.target)||l())};document.addEventListener("mousedown",w);const P=F=>{F.key==="Escape"&&l()};return document.addEventListener("keydown",P),()=>{document.removeEventListener("mousedown",w),document.removeEventListener("keydown",P)}},[l]);const k=!h;return a.jsx(Nh,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},sx:{position:"fixed",inset:0,zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(5,20,40,0.6)",backdropFilter:"blur(8px)"},onClick:l,children:a.jsx(wa,{ref:x,elevation:18,onClick:w=>w.stopPropagation(),sx:{width:"100%",maxWidth:960,mx:2,borderRadius:4,px:{xs:3,md:6},py:{xs:4,md:6},border:`1px solid ${Y(p.palette.primary.main,.18)}`,boxShadow:"0 24px 55px rgba(10,74,122,0.28)",backgroundImage:"none"},children:a.jsxs(ve,{spacing:6,children:[a.jsxs(ve,{direction:"row",spacing:3,alignItems:"center",children:[a.jsx(Te,{sx:{height:44,width:44,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:p.palette.primary.main,color:p.palette.primary.contrastText,boxShadow:"0 12px 28px rgba(10,74,122,0.35)"},children:a.jsx(es,{size:20})}),a.jsxs(ve,{spacing:.75,children:[a.jsx(ue,{variant:"h6",fontWeight:600,color:"text.primary",children:"Select Callout List"}),a.jsx(ue,{variant:"body2",color:"text.secondary",children:"Choose a callout group to begin the workflow."})]})]}),a.jsxs(ve,{spacing:1.5,children:[a.jsx(ue,{variant:"overline",sx:{fontWeight:700,letterSpacing:1.2,color:Y(p.palette.primary.main,.8)},children:"Callout Group"}),a.jsx($o,{fullWidth:!0,open:b,onOpen:()=>v(!0),onClose:()=>v(!1),value:h||null,inputValue:m,onChange:(w,P)=>{const F=P??"";u(F),g(F),v(!1),F&&s(F)},onInputChange:(w,P)=>{g(P),P||u("")},options:i,filterOptions:(w,P)=>{const F=P.inputValue.trim().toLowerCase();return F?w.filter(D=>D.toLowerCase().includes(F)):w},renderInput:w=>a.jsx(Jt,{...w,placeholder:"Select groupâ€¦",size:"small",InputProps:{...w.InputProps,sx:{borderRadius:2,"& .MuiOutlinedInput-notchedOutline":{borderColor:Y(p.palette.primary.main,.25)},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:Y(p.palette.primary.main,.55)}}}}),renderOption:(w,P)=>{const F=T.get(P)??0;return d.createElement("li",{...w,key:P},a.jsxs(ve,{direction:"row",spacing:1.5,alignItems:"center",justifyContent:"space-between",sx:{width:"100%"},children:[a.jsx(ue,{variant:"body2",color:"text.primary",children:P}),a.jsxs(ue,{variant:"caption",color:"text.secondary",children:[F," ",F===1?"resource":"resources"]})]}))},ListboxProps:{sx:{borderRadius:2,boxShadow:"0 18px 36px rgba(10,74,122,0.16)","& .MuiAutocomplete-option":{px:2.25,py:1.25,borderBottom:`1px solid ${Y(p.palette.primary.main,.08)}`,"&:last-of-type":{borderBottom:"none"}}}},clearOnBlur:!1,selectOnFocus:!0,handleHomeEndKeys:!0,onKeyDown:w=>{if(w.key==="Enter"){const P=S[0];P&&(u(P),g(P),v(!1),s(P))}}})]}),a.jsx(Te,{sx:{minHeight:64},children:a.jsx(di,{mode:"wait",children:h&&a.jsx(wa,{elevation:0,initial:{opacity:0,y:-6},animate:{opacity:1,y:0},exit:{opacity:0,y:-6},transition:{duration:.18},sx:{display:"inline-flex",alignItems:"center",gap:1,px:3,py:2,borderRadius:2,border:`1px solid ${Y(p.palette.primary.main,.25)}`,bgcolor:Y(p.palette.primary.main,.08),color:p.palette.primary.main,fontSize:"0.95rem",fontWeight:600},children:a.jsxs(ue,{variant:"body2",color:"inherit",children:[a.jsx(Te,{component:"span",sx:{fontWeight:700},children:y.length})," ",y.length===1?"resource":"resources"," in this callout group."]})},h)})}),a.jsx(ve,{direction:"row",justifyContent:"flex-end",children:a.jsx(Mt,{onClick:()=>{v(!1),s(h)},disabled:k,variant:"contained",endIcon:a.jsx(Tu,{size:16}),sx:{textTransform:"none",fontWeight:600,px:3,py:1.25,borderRadius:2},children:"Continue"})})]})})})},tn=JSON.parse('[{"taskId":"RG-AB30001","division":"Admin","taskStatus":"Not Assigned (ACT)","pwa":"ZB-ALPHA-12","taskType":"Admin Review","primarySkill":"ADMIN1","capabilities":["ADMIN1"],"importanceScore":97,"msc":"Y","taskCreated":"Mon 6 Jan, 10:40 AM","groupCode":"Admin Group","systemType":"FSM","employeeId":"T6344","resourceName":"Dylan Lewis","asset":"OFF-8247","assetName":"Document Verification Queue","commitmentDate":"Fri 7 Jan, 1:15 PM","commitmentType":"Complete By","arrivedAtDate":"","domain":"CF","estimatedDuration":150,"lastProgression":"On Site","category":"Administration","description":"Administration task for broadband/FTTP service in local area.","responseCode":"AD02","postCode":"CF44 8AU","appointmentStartDate":"","linkedTask":"","customerAddress":"","expectedStartDate":"Sat 7 Jan, 8:15 AM","expectedFinishDate":"Wed 8 Jan, 10:45 AM","externalQueueId":"EXT-441440","workId":"WK-790218","estimateNumber":"EST-55784","startDate":"","lat":51.70832,"lng":-3.44613,"expectedWindow":"8amâ€“10:30am","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 8AU\\n- Type Admin Review\\n- Skill ADMIN1\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Not Assigned (ACT)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Not Assigned (ACT)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30002","division":"Service Delivery","taskStatus":"Assigned (ACT)","pwa":"ZB-OMEGA-09","taskType":"Survey","primarySkill":"RISDN2","capabilities":["RISDN2"],"importanceScore":45,"msc":"Y","taskCreated":"Thu 7 Jan, 10:40 AM","groupCode":"Service Delivery","systemType":"NW","employeeId":"T7690","resourceName":"John Edwards","asset":"MH-5541","assetName":"Route Survey Node","commitmentDate":"Fri 10 Jan, 3:30 PM","commitmentType":"Future","arrivedAtDate":"","domain":"MN","estimatedDuration":90,"lastProgression":"On Site","category":"Survey","description":"Survey task for broadband/FTTP service in local area.","responseCode":"SH05","postCode":"CF44 7IW","appointmentStartDate":"","linkedTask":"","customerAddress":"111 Hirwaun Road, Aberdare","expectedStartDate":"Sat 8 Jan, 10:40 AM","expectedFinishDate":"Thu 11 Jan, 11:10 AM","externalQueueId":"EXT-441998","workId":"WK-729320","estimateNumber":"EST-55739","startDate":"","lat":51.70624,"lng":-3.44051,"expectedWindow":"10amâ€“11:30am","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7IW\\n- Type Survey\\n- Skill RISDN2\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Assigned (ACT)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Assigned (ACT)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30003","division":"Service Delivery","taskStatus":"Dispatched (AWI)","pwa":"ZB-ALPHA-02","taskType":"Repair","primarySkill":"RISDN2","capabilities":["RISDN2"],"importanceScore":90,"msc":"N","taskCreated":"Wed 11 Jan, 10:40 AM","groupCode":"Service Delivery","systemType":"OR","employeeId":"T6721","resourceName":"Ryan Jenkins","asset":"CAB-8837","assetName":"DP Pole","commitmentDate":"Wed 13 Jan, 11:20 AM","commitmentType":"Future","arrivedAtDate":"Thu 11 Jan, 8:15 AM","domain":"SE","estimatedDuration":120,"lastProgression":"On Site","category":"Repair","description":"Repair task for broadband/FTTP service in local area.","responseCode":"SH03","postCode":"CF44 7SL","appointmentStartDate":"","linkedTask":"","customerAddress":"108 Victoria Street, Aberdare","expectedStartDate":"Sat 11 Jan, 8:15 AM","expectedFinishDate":"Wed 14 Jan, 10:15 AM","externalQueueId":"EXT-441215","workId":"WK-703093","estimateNumber":"EST-55777","startDate":"Sat 11 Jan, 8:15 AM","lat":51.7204,"lng":-3.44196,"expectedWindow":"8amâ€“10am","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7SL\\n- Type Repair\\n- Skill RISDN2\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Dispatched (AWI)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Dispatched (AWI)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30004","division":"Complex Engineering","taskStatus":"Accepted (ISS)","pwa":"ZB-GAMMA-05","taskType":"Survey","primarySkill":"RFTTP1","capabilities":["RFTTP1"],"importanceScore":54,"msc":"Y","taskCreated":"Fri 3 Jan, 3:30 PM","groupCode":"Complex Engineering","systemType":"NW","employeeId":"T8224","resourceName":"Nia Brown","asset":"AS-1941","assetName":"Joint Box","commitmentDate":"Mon 5 Jan, 8:15 AM","commitmentType":"Start By","arrivedAtDate":"Mon 6 Jan, 4:10 PM","domain":"CF","estimatedDuration":45,"lastProgression":"Completed","category":"Survey","description":"Survey task for broadband/FTTP service in local area.","responseCode":"SH01","postCode":"CF44 6IQ","appointmentStartDate":"","linkedTask":"","customerAddress":"28 Aberaman Road, Aberdare","expectedStartDate":"Wed 7 Jan, 3:30 PM","expectedFinishDate":"Fri 10 Jan, 4:15 PM","externalQueueId":"EXT-441801","workId":"WK-746808","estimateNumber":"EST-55786","startDate":"Wed 7 Jan, 3:30 PM","lat":51.70576,"lng":-3.43954,"expectedWindow":"3pmâ€“3:45pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 6IQ\\n- Type Survey\\n- Skill RFTTP1\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Accepted (ISS)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Accepted (ISS)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30005","division":"Admin","taskStatus":"In Progress (EXC)","pwa":"ZB-OMEGA-06","taskType":"Admin Review","primarySkill":"ADMIN2","capabilities":["ADMIN2"],"importanceScore":64,"msc":"Y","taskCreated":"Fri 13 Jan, 9:05 AM","groupCode":"Admin Group","systemType":"OR","employeeId":"T7544","resourceName":"Harvey Rees","asset":"OFF-3588","assetName":"Document Verification Queue","commitmentDate":"Sat 15 Jan, 3:30 PM","commitmentType":"Complete By","arrivedAtDate":"Wed 16 Jan, 11:20 AM","domain":"SE","estimatedDuration":60,"lastProgression":"Accepted","category":"Administration","description":"Administration task for broadband/FTTP service in local area.","responseCode":"AD02","postCode":"CF44 7NZ","appointmentStartDate":"","linkedTask":"","customerAddress":"","expectedStartDate":"Thu 16 Jan, 11:20 AM","expectedFinishDate":"Fri 19 Jan, 12:20 PM","externalQueueId":"EXT-441383","workId":"WK-734734","estimateNumber":"EST-55767","startDate":"Thu 16 Jan, 11:20 AM","lat":51.70775,"lng":-3.44796,"expectedWindow":"11amâ€“12pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7NZ\\n- Type Admin Review\\n- Skill ADMIN2\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"In Progress (EXC)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"In Progress (EXC)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30006","division":"Admin","taskStatus":"Completed (COM)","pwa":"ZB-GAMMA-07","taskType":"Admin Review","primarySkill":"ADMIN1","capabilities":["ADMIN1"],"importanceScore":56,"msc":"Y","taskCreated":"Thu 10 Jan, 9:05 AM","groupCode":"Admin Group","systemType":"FSM","employeeId":"T5414","resourceName":"Ffion Davies","asset":"OFF-8718","assetName":"Admin Processing Queue","commitmentDate":"Fri 13 Jan, 11:20 AM","commitmentType":"Appointment","arrivedAtDate":"Sat 16 Jan, 4:10 PM","domain":"MN","estimatedDuration":90,"lastProgression":"Completed","category":"Administration","description":"Administration task for broadband/FTTP service in local area.","responseCode":"AD01","postCode":"CF44 7TJ","appointmentStartDate":"Sun 16 Jan, 8:15 AM","linkedTask":"","customerAddress":"","expectedStartDate":"Sat 16 Jan, 8:15 AM","expectedFinishDate":"Thu 19 Jan, 9:45 AM","externalQueueId":"EXT-441404","workId":"WK-728071","estimateNumber":"EST-55763","startDate":"Sat 16 Jan, 8:15 AM","lat":51.70737,"lng":-3.45195,"expectedWindow":"8amâ€“9:30am","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7TJ\\n- Type Admin Review\\n- Skill ADMIN1\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Completed (COM)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Completed (COM)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30007","division":"Complex Engineering","taskStatus":"Not Assigned (ACT)","pwa":"ZB-DELTA-07","taskType":"Survey","primarySkill":"ADMIN1","capabilities":["ADMIN1"],"importanceScore":74,"msc":"Y","taskCreated":"Mon 12 Jan, 8:15 AM","groupCode":"Complex Engineering","systemType":"OR","employeeId":"T1258","resourceName":"Nia Hughes","asset":"CAB-1922","assetName":"Route Survey Node","commitmentDate":"Tue 14 Jan, 2:00 PM","commitmentType":"Complete By","arrivedAtDate":"","domain":"SE","estimatedDuration":120,"lastProgression":"En Route","category":"Survey","description":"Survey task for broadband/FTTP service in local area.","responseCode":"SH05","postCode":"CF44 6XQ","appointmentStartDate":"","linkedTask":"","customerAddress":"75 Cardiff Road, Aberdare","expectedStartDate":"Fri 14 Jan, 2:00 PM","expectedFinishDate":"Sun 17 Jan, 4:00 PM","externalQueueId":"EXT-441499","workId":"WK-781809","estimateNumber":"EST-55797","startDate":"","lat":51.71928,"lng":-3.44445,"expectedWindow":"2pmâ€“4pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 6XQ\\n- Type Survey\\n- Skill ADMIN1\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Not Assigned (ACT)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Not Assigned (ACT)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30008","division":"Service Delivery","taskStatus":"Assigned (ACT)","pwa":"ZB-GAMMA-10","taskType":"Emergency","primarySkill":"RISDN3","capabilities":["RISDN3"],"importanceScore":89,"msc":"N","taskCreated":"Sat 8 Jan, 10:40 AM","groupCode":"Service Delivery","systemType":"OR","employeeId":"T9306","resourceName":"Ryan Lewis","asset":"AS-4107","assetName":"Backhaul Joint","commitmentDate":"Tue 10 Jan, 2:00 PM","commitmentType":"Future","arrivedAtDate":"","domain":"MN","estimatedDuration":90,"lastProgression":"On Site","category":"Emergency","description":"Emergency task for broadband/FTTP service in local area.","responseCode":"SH01","postCode":"CF44 8IN","appointmentStartDate":"","linkedTask":"RG-AB30003","customerAddress":"63 Brook Street, Aberdare","expectedStartDate":"Thu 10 Jan, 2:00 PM","expectedFinishDate":"Sun 13 Jan, 3:30 PM","externalQueueId":"EXT-441318","workId":"WK-764130","estimateNumber":"EST-55734","startDate":"","lat":51.70599,"lng":-3.44795,"expectedWindow":"2pmâ€“3:30pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 8IN\\n- Type Emergency\\n- Skill RISDN3\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Assigned (ACT)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Assigned (ACT)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30009","division":"Service Delivery","taskStatus":"Dispatched (AWI)","pwa":"ZB-ALPHA-06","taskType":"Emergency","primarySkill":"RISDN1","capabilities":["RISDN1"],"importanceScore":77,"msc":"Y","taskCreated":"Wed 8 Jan, 7:30 AM","groupCode":"Service Delivery","systemType":"OR","employeeId":"T2730","resourceName":"Nia Edwards","asset":"AS-1363","assetName":"Backhaul Joint","commitmentDate":"Thu 10 Jan, 7:30 AM","commitmentType":"Appointment","arrivedAtDate":"Thu 10 Jan, 11:20 AM","domain":"SE","estimatedDuration":150,"lastProgression":"On Site","category":"Emergency","description":"Emergency task for broadband/FTTP service in local area.","responseCode":"SH01","postCode":"CF44 7MH","appointmentStartDate":"Fri 10 Jan, 7:30 AM","linkedTask":"RG-AB30006","customerAddress":"71 Gadlys Road, Aberdare","expectedStartDate":"Fri 10 Jan, 7:30 AM","expectedFinishDate":"Sun 13 Jan, 10:00 AM","externalQueueId":"EXT-441511","workId":"WK-797851","estimateNumber":"EST-55735","startDate":"Fri 10 Jan, 7:30 AM","lat":51.7155,"lng":-3.45247,"expectedWindow":"7amâ€“9:30am","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7MH\\n- Type Emergency\\n- Skill RISDN1\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Dispatched (AWI)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Dispatched (AWI)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30010","division":"Complex Engineering","taskStatus":"Accepted (ISS)","pwa":"ZB-DELTA-05","taskType":"Inspection","primarySkill":"RISDN3","capabilities":["RISDN3"],"importanceScore":97,"msc":"Y","taskCreated":"Tue 11 Jan, 4:10 PM","groupCode":"Complex Engineering","systemType":"FSM","employeeId":"T9864","resourceName":"Nia Jenkins","asset":"AS-5489","assetName":"Distribution Point","commitmentDate":"Tue 13 Jan, 2:00 PM","commitmentType":"Appointment","arrivedAtDate":"Thu 15 Jan, 11:20 AM","domain":"MN","estimatedDuration":90,"lastProgression":"On Site","category":"Inspection","description":"Inspection task for broadband/FTTP service in local area.","responseCode":"SH04","postCode":"CF44 8JK","appointmentStartDate":"Thu 15 Jan, 2:00 PM","linkedTask":"","customerAddress":"91 Robertstown Road, Aberdare","expectedStartDate":"Thu 15 Jan, 2:00 PM","expectedFinishDate":"Sat 18 Jan, 3:30 PM","externalQueueId":"EXT-441812","workId":"WK-728959","estimateNumber":"EST-55777","startDate":"Thu 15 Jan, 2:00 PM","lat":51.70787,"lng":-3.44639,"expectedWindow":"2pmâ€“3:30pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 8JK\\n- Type Inspection\\n- Skill RISDN3\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Accepted (ISS)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Accepted (ISS)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30011","division":"Admin","taskStatus":"In Progress (EXC)","pwa":"ZB-OMEGA-02","taskType":"Admin Review","primarySkill":"ADMIN2","capabilities":["ADMIN2"],"importanceScore":45,"msc":"Y","taskCreated":"Wed 3 Jan, 10:40 AM","groupCode":"Admin Group","systemType":"FSM","employeeId":"T8103","resourceName":"Rhys Hughes","asset":"OFF-7322","assetName":"Document Verification Queue","commitmentDate":"Thu 5 Jan, 2:00 PM","commitmentType":"Appointment","arrivedAtDate":"Fri 8 Jan, 11:20 AM","domain":"CF","estimatedDuration":60,"lastProgression":"Completed","category":"Administration","description":"Administration task for broadband/FTTP service in local area.","responseCode":"AD01","postCode":"CF44 7JR","appointmentStartDate":"Sat 8 Jan, 2:00 PM","linkedTask":"RG-AB30003","customerAddress":"","expectedStartDate":"Sat 8 Jan, 2:00 PM","expectedFinishDate":"Tue 11 Jan, 3:00 PM","externalQueueId":"EXT-441888","workId":"WK-775917","estimateNumber":"EST-55728","startDate":"Sat 8 Jan, 2:00 PM","lat":51.7254,"lng":-3.50534,"expectedWindow":"2pmâ€“3pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7JR\\n- Type Admin Review\\n- Skill ADMIN2\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"In Progress (EXC)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"In Progress (EXC)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30012","division":"Complex Engineering","taskStatus":"Completed (COM)","pwa":"ZB-ALPHA-04","taskType":"Inspection","primarySkill":"RFTTP2","capabilities":["RFTTP2"],"importanceScore":49,"msc":"Y","taskCreated":"Sat 11 Jan, 9:05 AM","groupCode":"Complex Engineering","systemType":"NW","employeeId":"T8443","resourceName":"Lowri Jenkins","asset":"AS-8859","assetName":"Distribution Point","commitmentDate":"Sat 14 Jan, 1:15 PM","commitmentType":"Complete By","arrivedAtDate":"Mon 16 Jan, 4:10 PM","domain":"MN","estimatedDuration":90,"lastProgression":"Completed","category":"Inspection","description":"Inspection task for broadband/FTTP service in local area.","responseCode":"SH05","postCode":"CF44 7DZ","appointmentStartDate":"","linkedTask":"RG-AB30007","customerAddress":"109 High Street, Aberdare","expectedStartDate":"Tue 16 Jan, 4:10 PM","expectedFinishDate":"Fri 19 Jan, 5:40 PM","externalQueueId":"EXT-441590","workId":"WK-758165","estimateNumber":"EST-55792","startDate":"Tue 16 Jan, 4:10 PM","lat":51.72091,"lng":-3.52057,"expectedWindow":"4pmâ€“5:30pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7DZ\\n- Type Inspection\\n- Skill RFTTP2\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Completed (COM)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Completed (COM)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30013","division":"Service Delivery","taskStatus":"Not Assigned (ACT)","pwa":"ZB-ALPHA-04","taskType":"Inspection","primarySkill":"RISDN2","capabilities":["RISDN2"],"importanceScore":82,"msc":"Y","taskCreated":"Tue 7 Jan, 10:40 AM","groupCode":"Service Delivery","systemType":"NW","employeeId":"T9526","resourceName":"Lauren Evans","asset":"AS-9446","assetName":"Underground Joint Chamber","commitmentDate":"Wed 9 Jan, 11:20 AM","commitmentType":"Appointment","arrivedAtDate":"","domain":"CF","estimatedDuration":120,"lastProgression":"On Site","category":"Inspection","description":"Inspection task for broadband/FTTP service in local area.","responseCode":"SH01","postCode":"CF44 6EV","appointmentStartDate":"Thu 9 Jan, 11:20 AM","linkedTask":"RG-AB30003","customerAddress":"81 Cardiff Road, Aberdare","expectedStartDate":"Thu 9 Jan, 11:20 AM","expectedFinishDate":"Sun 12 Jan, 1:20 PM","externalQueueId":"EXT-441954","workId":"WK-790116","estimateNumber":"EST-55766","startDate":"","lat":51.72224,"lng":-3.51289,"expectedWindow":"11amâ€“1pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 6EV\\n- Type Inspection\\n- Skill RISDN2\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Not Assigned (ACT)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Not Assigned (ACT)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30014","division":"Complex Engineering","taskStatus":"Assigned (ACT)","pwa":"ZB-GAMMA-02","taskType":"Emergency","primarySkill":"RISDN3","capabilities":["RISDN3"],"importanceScore":88,"msc":"N","taskCreated":"Wed 13 Jan, 9:05 AM","groupCode":"Complex Engineering","systemType":"OR","employeeId":"T5309","resourceName":"Aled Evans","asset":"AS-9906","assetName":"Priority Splice Enclosure","commitmentDate":"Thu 16 Jan, 11:20 AM","commitmentType":"Appointment","arrivedAtDate":"","domain":"CF","estimatedDuration":90,"lastProgression":"Allocated","category":"Emergency","description":"Emergency task for broadband/FTTP service in local area.","responseCode":"SH05","postCode":"CF44 7AV","appointmentStartDate":"Fri 16 Jan, 11:20 AM","linkedTask":"","customerAddress":"77 Canon Street, Aberdare","expectedStartDate":"Fri 16 Jan, 11:20 AM","expectedFinishDate":"Mon 19 Jan, 12:50 PM","externalQueueId":"EXT-441587","workId":"WK-785274","estimateNumber":"EST-55720","startDate":"","lat":51.71383,"lng":-3.44986,"expectedWindow":"11amâ€“12:30pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7AV\\n- Type Emergency\\n- Skill RISDN3\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Assigned (ACT)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Assigned (ACT)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30015","division":"Service Delivery","taskStatus":"Dispatched (AWI)","pwa":"ZB-GAMMA-04","taskType":"Repair","primarySkill":"RISDN1","capabilities":["RISDN1"],"importanceScore":76,"msc":"N","taskCreated":"Sat 3 Jan, 7:30 AM","groupCode":"Service Delivery","systemType":"OR","employeeId":"T8571","resourceName":"Ffion Hughes","asset":"AS-8163","assetName":"Drop Wire","commitmentDate":"Mon 6 Jan, 9:05 AM","commitmentType":"Complete By","arrivedAtDate":"Wed 8 Jan, 10:40 AM","domain":"SE","estimatedDuration":60,"lastProgression":"Completed","category":"Repair","description":"Repair task for broadband/FTTP service in local area.","responseCode":"SH05","postCode":"CF44 8BQ","appointmentStartDate":"","linkedTask":"","customerAddress":"86 Albert Street, Aberdare","expectedStartDate":"Thu 8 Jan, 10:40 AM","expectedFinishDate":"Sun 11 Jan, 11:40 AM","externalQueueId":"EXT-441968","workId":"WK-703787","estimateNumber":"EST-55733","startDate":"Thu 8 Jan, 10:40 AM","lat":51.71159,"lng":-3.44429,"expectedWindow":"10amâ€“11am","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 8BQ\\n- Type Repair\\n- Skill RISDN1\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Dispatched (AWI)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Dispatched (AWI)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30016","division":"Complex Engineering","taskStatus":"Accepted (ISS)","pwa":"ZB-ALPHA-02","taskType":"Survey","primarySkill":"RFTTP1","capabilities":["RFTTP1"],"importanceScore":60,"msc":"Y","taskCreated":"Tue 5 Jan, 2:00 PM","groupCode":"Complex Engineering","systemType":"NW","employeeId":"T7749","resourceName":"Ryan Morgan","asset":"MH-8437","assetName":"Manhole Access Point","commitmentDate":"Wed 7 Jan, 3:30 PM","commitmentType":"Start By","arrivedAtDate":"Thu 9 Jan, 11:20 AM","domain":"MN","estimatedDuration":150,"lastProgression":"On Site","category":"Survey","description":"Survey task for broadband/FTTP service in local area.","responseCode":"SH05","postCode":"CF44 8WX","appointmentStartDate":"","linkedTask":"","customerAddress":"44 Commercial Street, Aberdare","expectedStartDate":"Thu 9 Jan, 11:20 AM","expectedFinishDate":"Sun 12 Jan, 1:50 PM","externalQueueId":"EXT-441720","workId":"WK-723933","estimateNumber":"EST-55754","startDate":"Thu 9 Jan, 11:20 AM","lat":51.71966,"lng":-3.44275,"expectedWindow":"11amâ€“1:30pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 8WX\\n- Type Survey\\n- Skill RFTTP1\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Accepted (ISS)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Accepted (ISS)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30017","division":"Admin","taskStatus":"In Progress (EXC)","pwa":"ZB-OMEGA-01","taskType":"Admin Review","primarySkill":"ADMIN2","capabilities":["ADMIN2"],"importanceScore":86,"msc":"Y","taskCreated":"Wed 7 Jan, 1:15 PM","groupCode":"Admin Group","systemType":"OR","employeeId":"T9344","resourceName":"Lauren Roberts","asset":"OFF-4090","assetName":"Admin Processing Queue","commitmentDate":"Thu 9 Jan, 3:30 PM","commitmentType":"Future","arrivedAtDate":"Sat 11 Jan, 11:20 AM","domain":"SE","estimatedDuration":40,"lastProgression":"Allocated","category":"Administration","description":"Administration task for broadband/FTTP service in local area.","responseCode":"AD02","postCode":"CF44 8PT","appointmentStartDate":"","linkedTask":"","customerAddress":"","expectedStartDate":"Sun 11 Jan, 11:20 AM","expectedFinishDate":"Wed 14 Jan, 12:00 PM","externalQueueId":"EXT-441249","workId":"WK-705434","estimateNumber":"EST-55758","startDate":"Sun 11 Jan, 11:20 AM","lat":51.7063,"lng":-3.50452,"expectedWindow":"11amâ€“12pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 8PT\\n- Type Admin Review\\n- Skill ADMIN2\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"In Progress (EXC)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"In Progress (EXC)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30018","division":"Service Delivery","taskStatus":"Completed (COM)","pwa":"ZB-OMEGA-11","taskType":"Emergency","primarySkill":"RISDN1","capabilities":["RISDN1"],"importanceScore":68,"msc":"Y","taskCreated":"Wed 9 Jan, 1:15 PM","groupCode":"Service Delivery","systemType":"OR","employeeId":"T9810","resourceName":"Ffion Smith","asset":"AS-7197","assetName":"Priority Splice Enclosure","commitmentDate":"Fri 11 Jan, 2:00 PM","commitmentType":"Future","arrivedAtDate":"Sun 13 Jan, 8:15 AM","domain":"CF","estimatedDuration":150,"lastProgression":"Completed","category":"Emergency","description":"Emergency task for broadband/FTTP service in local area.","responseCode":"SH01","postCode":"CF44 7WA","appointmentStartDate":"","linkedTask":"","customerAddress":"29 Robertstown Road, Aberdare","expectedStartDate":"Mon 13 Jan, 8:15 AM","expectedFinishDate":"Thu 16 Jan, 10:45 AM","externalQueueId":"EXT-441790","workId":"WK-772532","estimateNumber":"EST-55737","startDate":"Mon 13 Jan, 8:15 AM","lat":51.70622,"lng":-3.5041,"expectedWindow":"8amâ€“10:30am","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7WA\\n- Type Emergency\\n- Skill RISDN1\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Completed (COM)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Completed (COM)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30019","division":"Admin","taskStatus":"Assigned (ACT)","pwa":"ZB-GAMMA-09","taskType":"Admin Review","primarySkill":"ADMIN2","capabilities":["ADMIN2"],"importanceScore":71,"msc":"N","taskCreated":"Thu 13 Jan, 11:20 AM","groupCode":"Admin Group","systemType":"NW","employeeId":"T6541","resourceName":"Chloe Jenkins","asset":"OFF-1456","assetName":"Document Verification Queue","commitmentDate":"Fri 15 Jan, 2:00 PM","commitmentType":"Appointment","arrivedAtDate":"","domain":"SE","estimatedDuration":60,"lastProgression":"On Site","category":"Administration","description":"Administration task for broadband/FTTP service in local area.","responseCode":"AD02","postCode":"CF44 7XT","appointmentStartDate":"Sat 15 Jan, 2:00 PM","linkedTask":"","customerAddress":"","expectedStartDate":"Sat 15 Jan, 2:00 PM","expectedFinishDate":"Tue 18 Jan, 3:00 PM","externalQueueId":"EXT-441495","workId":"WK-765705","estimateNumber":"EST-55794","startDate":"","lat":51.70445,"lng":-3.4997,"expectedWindow":"2pmâ€“3pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7XT\\n- Type Admin Review\\n- Skill ADMIN2\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Assigned (ACT)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Assigned (ACT)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30020","division":"Service Delivery","taskStatus":"Dispatched (AWI)","pwa":"ZB-GAMMA-10","taskType":"Repair","primarySkill":"RISDN3","capabilities":["RISDN3"],"importanceScore":31,"msc":"Y","taskCreated":"Thu 5 Jan, 2:00 PM","groupCode":"Service Delivery","systemType":"OR","employeeId":"T9129","resourceName":"Chloe Hughes","asset":"CAB-1198","assetName":"Copper Joint Enclosure","commitmentDate":"Sat 7 Jan, 3:30 PM","commitmentType":"Start By","arrivedAtDate":"Sun 9 Jan, 10:40 AM","domain":"SE","estimatedDuration":45,"lastProgression":"Completed","category":"Repair","description":"Repair task for broadband/FTTP service in local area.","responseCode":"SH03","postCode":"CF44 7KB","appointmentStartDate":"","linkedTask":"RG-AB30018","customerAddress":"118 Cardiff Road, Aberdare","expectedStartDate":"Mon 9 Jan, 10:40 AM","expectedFinishDate":"Thu 12 Jan, 11:25 AM","externalQueueId":"EXT-441992","workId":"WK-731785","estimateNumber":"EST-55771","startDate":"Mon 9 Jan, 10:40 AM","lat":51.72207,"lng":-3.5099,"expectedWindow":"10amâ€“11:15am","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7KB\\n- Type Repair\\n- Skill RISDN3\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Dispatched (AWI)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Dispatched (AWI)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30021","division":"Complex Engineering","taskStatus":"Accepted (ISS)","pwa":"ZB-ALPHA-10","taskType":"Survey","primarySkill":"RFTTP1","capabilities":["RFTTP1"],"importanceScore":68,"msc":"Y","taskCreated":"Fri 9 Jan, 8:15 AM","groupCode":"Complex Engineering","systemType":"FSM","employeeId":"T7859","resourceName":"Tomos Hughes","asset":"AS-6348","assetName":"Route Survey Node","commitmentDate":"Sun 11 Jan, 3:30 PM","commitmentType":"Complete By","arrivedAtDate":"Mon 13 Jan, 11:20 AM","domain":"CF","estimatedDuration":90,"lastProgression":"Scheduled","category":"Survey","description":"Survey task for broadband/FTTP service in local area.","responseCode":"SH03","postCode":"CF44 6US","appointmentStartDate":"","linkedTask":"","customerAddress":"16 Brook Street, Aberdare","expectedStartDate":"Mon 13 Jan, 11:20 AM","expectedFinishDate":"Thu 16 Jan, 12:50 PM","externalQueueId":"EXT-441467","workId":"WK-716640","estimateNumber":"EST-55776","startDate":"Mon 13 Jan, 11:20 AM","lat":51.71882,"lng":-3.4518,"expectedWindow":"11amâ€“12:30pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 6US\\n- Type Survey\\n- Skill RFTTP1\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Accepted (ISS)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Accepted (ISS)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30022","division":"Service Delivery","taskStatus":"Not Assigned (ACT)","pwa":"ZB-DELTA-10","taskType":"Inspection","primarySkill":"RISDN3","capabilities":["RISDN3"],"importanceScore":69,"msc":"Y","taskCreated":"Mon 10 Jan, 9:05 AM","groupCode":"Service Delivery","systemType":"NW","employeeId":"T3909","resourceName":"Chloe Hughes","asset":"AS-7695","assetName":"Underground Joint Chamber","commitmentDate":"Tue 12 Jan, 1:15 PM","commitmentType":"Appointment","arrivedAtDate":"","domain":"MN","estimatedDuration":90,"lastProgression":"Allocated","category":"Inspection","description":"Inspection task for broadband/FTTP service in local area.","responseCode":"SH01","postCode":"CF44 7TT","appointmentStartDate":"Wed 12 Jan, 1:15 PM","linkedTask":"","customerAddress":"40 Cardif Road, Aberdare","expectedStartDate":"Wed 12 Jan, 1:15 PM","expectedFinishDate":"Sat 15 Jan, 2:45 PM","externalQueueId":"EXT-441413","workId":"WK-783470","estimateNumber":"EST-55797","startDate":"","lat":51.71277,"lng":-3.44368,"expectedWindow":"1pmâ€“2:30pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7TT\\n- Type Inspection\\n- Skill RISDN3\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Not Assigned (ACT)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Not Assigned (ACT)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30023","division":"Admin","taskStatus":"Assigned (ACT)","pwa":"ZB-DELTA-03","taskType":"Admin Review","primarySkill":"ADMIN1","capabilities":["ADMIN1"],"importanceScore":71,"msc":"Y","taskCreated":"Wed 13 Jan, 4:10 PM","groupCode":"Admin Group","systemType":"OR","employeeId":"T9772","resourceName":"Rhys Thomas","asset":"OFF-3119","assetName":"Admin Processing Queue","commitmentDate":"Fri 15 Jan, 1:15 PM","commitmentType":"Future","arrivedAtDate":"","domain":"MN","estimatedDuration":40,"lastProgression":"Scheduled","category":"Administration","description":"Administration task for broadband/FTTP service in local area.","responseCode":"AD02","postCode":"CF44 7ZV","appointmentStartDate":"","linkedTask":"RG-AB30010","customerAddress":"","expectedStartDate":"Sat 15 Jan, 1:15 PM","expectedFinishDate":"Tue 18 Jan, 1:55 PM","externalQueueId":"EXT-441695","workId":"WK-736499","estimateNumber":"EST-55740","startDate":"","lat":51.70499,"lng":-3.44123,"expectedWindow":"1pmâ€“1:40pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7ZV\\n- Type Admin Review\\n- Skill ADMIN1\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Assigned (ACT)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Assigned (ACT)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30024","division":"Complex Engineering","taskStatus":"Dispatched (AWI)","pwa":"ZB-GAMMA-04","taskType":"Emergency","primarySkill":"RFTTP2","capabilities":["RFTTP2"],"importanceScore":90,"msc":"N","taskCreated":"Sat 7 Jan, 7:30 AM","groupCode":"Complex Engineering","systemType":"OR","employeeId":"T6493","resourceName":"Tomos Hughes","asset":"AS-8145","assetName":"Core Node Cabinet","commitmentDate":"Sun 9 Jan, 8:15 AM","commitmentType":"Start By","arrivedAtDate":"Tue 11 Jan, 9:05 AM","domain":"MN","estimatedDuration":90,"lastProgression":"On Site","category":"Emergency","description":"Emergency task for broadband/FTTP service in local area.","responseCode":"SH03","postCode":"CF44 8ER","appointmentStartDate":"","linkedTask":"RG-AB30002","customerAddress":"96 Aberaman Road, Aberdare","expectedStartDate":"Tue 11 Jan, 9:05 AM","expectedFinishDate":"Fri 14 Jan, 10:35 AM","externalQueueId":"EXT-441684","workId":"WK-766702","estimateNumber":"EST-55764","startDate":"Tue 11 Jan, 9:05 AM","lat":51.7206,"lng":-3.4474,"expectedWindow":"9amâ€“10:30am","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 8ER\\n- Type Emergency\\n- Skill RFTTP2\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Dispatched (AWI)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Dispatched (AWI)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30025","division":"Service Delivery","taskStatus":"Accepted (ISS)","pwa":"ZB-DELTA-09","taskType":"Inspection","primarySkill":"RISDN1","capabilities":["RISDN1"],"importanceScore":45,"msc":"N","taskCreated":"Thu 6 Jan, 10:40 AM","groupCode":"Service Delivery","systemType":"FSM","employeeId":"T6815","resourceName":"Chloe Hughes","asset":"AS-4500","assetName":"Underground Joint Chamber","commitmentDate":"Sat 8 Jan, 11:20 AM","commitmentType":"Appointment","arrivedAtDate":"Sun 10 Jan, 4:10 PM","domain":"SE","estimatedDuration":120,"lastProgression":"Allocated","category":"Inspection","description":"Inspection task for broadband/FTTP service in local area.","responseCode":"SH04","postCode":"CF44 8KO","appointmentStartDate":"Mon 10 Jan, 11:20 AM","linkedTask":"RG-AB30010","customerAddress":"32 Cwmbach Road, Aberdare","expectedStartDate":"Mon 10 Jan, 11:20 AM","expectedFinishDate":"Thu 13 Jan, 1:20 PM","externalQueueId":"EXT-441842","workId":"WK-701053","estimateNumber":"EST-55742","startDate":"Mon 10 Jan, 11:20 AM","lat":51.70871,"lng":-3.51393,"expectedWindow":"11amâ€“1pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 8KO\\n- Type Inspection\\n- Skill RISDN1\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Accepted (ISS)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Accepted (ISS)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30026","division":"Admin","taskStatus":"In Progress (EXC)","pwa":"ZB-OMEGA-05","taskType":"Admin Review","primarySkill":"ADMIN1","capabilities":["ADMIN1"],"importanceScore":76,"msc":"N","taskCreated":"Tue 11 Jan, 1:15 PM","groupCode":"Admin Group","systemType":"NW","employeeId":"T8841","resourceName":"Steffan Hughes","asset":"OFF-5507","assetName":"Document Verification Queue","commitmentDate":"Thu 13 Jan, 2:00 PM","commitmentType":"Complete By","arrivedAtDate":"Fri 15 Jan, 2:00 PM","domain":"SE","estimatedDuration":60,"lastProgression":"Completed","category":"Administration","description":"Administration task for broadband/FTTP service in local area.","responseCode":"AD02","postCode":"CF44 8ZX","appointmentStartDate":"","linkedTask":"RG-AB30021","customerAddress":"","expectedStartDate":"Sat 15 Jan, 2:00 PM","expectedFinishDate":"Tue 18 Jan, 3:00 PM","externalQueueId":"EXT-441963","workId":"WK-794249","estimateNumber":"EST-55717","startDate":"Sat 15 Jan, 2:00 PM","lat":51.71019,"lng":-3.44802,"expectedWindow":"2pmâ€“3pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 8ZX\\n- Type Admin Review\\n- Skill ADMIN1\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"In Progress (EXC)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"In Progress (EXC)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30027","division":"Service Delivery","taskStatus":"Completed (COM)","pwa":"ZB-GAMMA-09","taskType":"Repair","primarySkill":"RISDN3","capabilities":["RISDN3"],"importanceScore":70,"msc":"N","taskCreated":"Fri 8 Jan, 3:30 PM","groupCode":"Service Delivery","systemType":"OR","employeeId":"T9031","resourceName":"Carys Jones","asset":"AS-6004","assetName":"Drop Wire","commitmentDate":"Sun 10 Jan, 8:15 AM","commitmentType":"Complete By","arrivedAtDate":"Tue 12 Jan, 10:40 AM","domain":"CF","estimatedDuration":60,"lastProgression":"Completed","category":"Repair","description":"Repair task for broadband/FTTP service in local area.","responseCode":"SH01","postCode":"CF44 7ZQ","appointmentStartDate":"","linkedTask":"","customerAddress":"53 King Street, Aberdare","expectedStartDate":"Tue 12 Jan, 10:40 AM","expectedFinishDate":"Fri 15 Jan, 11:40 AM","externalQueueId":"EXT-441878","workId":"WK-730760","estimateNumber":"EST-55777","startDate":"Tue 12 Jan, 10:40 AM","lat":51.70939,"lng":-3.43749,"expectedWindow":"10amâ€“11am","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7ZQ\\n- Type Repair\\n- Skill RISDN3\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Completed (COM)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Completed (COM)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30028","division":"Complex Engineering","taskStatus":"Not Assigned (ACT)","pwa":"ZB-OMEGA-10","taskType":"Survey","primarySkill":"RFTTP2","capabilities":["RFTTP2"],"importanceScore":96,"msc":"Y","taskCreated":"Wed 6 Jan, 7:30 AM","groupCode":"Complex Engineering","systemType":"NW","employeeId":"T7833","resourceName":"Bethan Hughes","asset":"AS-6244","assetName":"Route Survey Node","commitmentDate":"Thu 8 Jan, 8:15 AM","commitmentType":"Start By","arrivedAtDate":"","domain":"MN","estimatedDuration":150,"lastProgression":"Allocated","category":"Survey","description":"Survey task for broadband/FTTP service in local area.","responseCode":"SH01","postCode":"CF44 6BZ","appointmentStartDate":"","linkedTask":"","customerAddress":"13 Maesyffynnon Terrace, Aberdare","expectedStartDate":"Fri 8 Jan, 8:15 AM","expectedFinishDate":"Mon 11 Jan, 10:45 AM","externalQueueId":"EXT-441114","workId":"WK-741322","estimateNumber":"EST-55718","startDate":"","lat":51.72907,"lng":-3.5087,"expectedWindow":"8amâ€“10:30am","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 6BZ\\n- Type Survey\\n- Skill RFTTP2\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Not Assigned (ACT)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Not Assigned (ACT)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30029","division":"Service Delivery","taskStatus":"Assigned (ACT)","pwa":"ZB-ALPHA-03","taskType":"Inspection","primarySkill":"RISDN2","capabilities":["RISDN2"],"importanceScore":70,"msc":"Y","taskCreated":"Thu 11 Jan, 8:15 AM","groupCode":"Service Delivery","systemType":"FSM","employeeId":"T7794","resourceName":"Steffan James","asset":"AS-1291","assetName":"Distribution Point","commitmentDate":"Fri 13 Jan, 3:30 PM","commitmentType":"Appointment","arrivedAtDate":"","domain":"MN","estimatedDuration":90,"lastProgression":"En Route","category":"Inspection","description":"Inspection task for broadband/FTTP service in local area.","responseCode":"SH02","postCode":"CF44 6TK","appointmentStartDate":"Sat 13 Jan, 3:30 PM","linkedTask":"","customerAddress":"79 High Street, Aberdare","expectedStartDate":"Sat 13 Jan, 3:30 PM","expectedFinishDate":"Tue 16 Jan, 5:00 PM","externalQueueId":"EXT-441706","workId":"WK-708703","estimateNumber":"EST-55738","startDate":"","lat":51.7162,"lng":-3.45003,"expectedWindow":"3pmâ€“4:30pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 6TK\\n- Type Inspection\\n- Skill RISDN2\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Assigned (ACT)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Assigned (ACT)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30030","division":"Admin","taskStatus":"Dispatched (AWI)","pwa":"ZB-GAMMA-05","taskType":"Admin Review","primarySkill":"ADMIN2","capabilities":["ADMIN2"],"importanceScore":83,"msc":"Y","taskCreated":"Fri 8 Jan, 9:05 AM","groupCode":"Admin Group","systemType":"OR","employeeId":"T7728","resourceName":"Harvey Roberts","asset":"OFF-4119","assetName":"Admin Processing Queue","commitmentDate":"Sun 10 Jan, 1:15 PM","commitmentType":"Appointment","arrivedAtDate":"Tue 12 Jan, 4:10 PM","domain":"MN","estimatedDuration":40,"lastProgression":"On Site","category":"Administration","description":"Administration task for broadband/FTTP service in local area.","responseCode":"AD01","postCode":"CF44 7OD","appointmentStartDate":"Mon 10 Jan, 1:15 PM","linkedTask":"RG-AB30012","customerAddress":"","expectedStartDate":"Mon 10 Jan, 1:15 PM","expectedFinishDate":"Thu 13 Jan, 1:55 PM","externalQueueId":"EXT-441300","workId":"WK-719881","estimateNumber":"EST-55750","startDate":"Mon 10 Jan, 1:15 PM","lat":51.71655,"lng":-3.45119,"expectedWindow":"1pmâ€“1:40pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7OD\\n- Type Admin Review\\n- Skill ADMIN2\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Dispatched (AWI)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Dispatched (AWI)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30031","division":"Complex Engineering","taskStatus":"Accepted (ISS)","pwa":"ZB-DELTA-06","taskType":"Survey","primarySkill":"RFTTP2","capabilities":["RFTTP2"],"importanceScore":85,"msc":"N","taskCreated":"Mon 3 Jan, 10:40 AM","groupCode":"Complex Engineering","systemType":"NW","employeeId":"T3673","resourceName":"Owain Roberts","asset":"AS-3212","assetName":"Route Survey Node","commitmentDate":"Tue 5 Jan, 11:20 AM","commitmentType":"Start By","arrivedAtDate":"Thu 7 Jan, 4:10 PM","domain":"SE","estimatedDuration":150,"lastProgression":"Completed","category":"Survey","description":"Survey task for broadband/FTTP service in local area.","responseCode":"SH02","postCode":"CF44 7ED","appointmentStartDate":"","linkedTask":"","customerAddress":"11 Commercial Street, Aberdare","expectedStartDate":"Thu 7 Jan, 4:10 PM","expectedFinishDate":"Sun 10 Jan, 6:40 PM","externalQueueId":"EXT-441744","workId":"WK-733281","estimateNumber":"EST-55731","startDate":"Thu 7 Jan, 4:10 PM","lat":51.7242,"lng":-3.51178,"expectedWindow":"4pmâ€“6:30pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7ED\\n- Type Survey\\n- Skill RFTTP2\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Accepted (ISS)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Accepted (ISS)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30032","division":"Service Delivery","taskStatus":"In Progress (EXC)","pwa":"ZB-ALPHA-11","taskType":"Repair","primarySkill":"RISDN1","capabilities":["RISDN1"],"importanceScore":80,"msc":"Y","taskCreated":"Tue 4 Jan, 1:15 PM","groupCode":"Service Delivery","systemType":"OR","employeeId":"T4561","resourceName":"Chloe Price","asset":"AS-4599","assetName":"FTTC Cabinet","commitmentDate":"Thu 6 Jan, 2:00 PM","commitmentType":"Complete By","arrivedAtDate":"Fri 8 Jan, 8:15 AM","domain":"CF","estimatedDuration":90,"lastProgression":"On Site","category":"Repair","description":"Repair task for broadband/FTTP service in local area.","responseCode":"SH03","postCode":"CF44 8KL","appointmentStartDate":"","linkedTask":"","customerAddress":"22 Albert Street, Aberdare","expectedStartDate":"Sat 8 Jan, 8:15 AM","expectedFinishDate":"Tue 11 Jan, 9:45 AM","externalQueueId":"EXT-441728","workId":"WK-748868","estimateNumber":"EST-55729","startDate":"Sat 8 Jan, 8:15 AM","lat":51.71934,"lng":-3.44587,"expectedWindow":"8amâ€“9:30am","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 8KL\\n- Type Repair\\n- Skill RISDN1\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"In Progress (EXC)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"In Progress (EXC)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30033","division":"Admin","taskStatus":"Completed (COM)","pwa":"ZB-DELTA-08","taskType":"Admin Review","primarySkill":"ADMIN1","capabilities":["ADMIN1"],"importanceScore":67,"msc":"Y","taskCreated":"Wed 10 Jan, 9:05 AM","groupCode":"Admin Group","systemType":"FSM","employeeId":"T5944","resourceName":"Steffan Price","asset":"OFF-4311","assetName":"Document Verification Queue","commitmentDate":"Fri 12 Jan, 1:15 PM","commitmentType":"Complete By","arrivedAtDate":"Sun 14 Jan, 2:00 PM","domain":"CF","estimatedDuration":60,"lastProgression":"Completed","category":"Administration","description":"Administration task for broadband/FTTP service in local area.","responseCode":"AD01","postCode":"CF44 7TR","appointmentStartDate":"","linkedTask":"RG-AB30024","customerAddress":"","expectedStartDate":"Mon 14 Jan, 2:00 PM","expectedFinishDate":"Thu 17 Jan, 3:00 PM","externalQueueId":"EXT-441332","workId":"WK-725196","estimateNumber":"EST-55750","startDate":"Mon 14 Jan, 2:00 PM","lat":51.71125,"lng":-3.44951,"expectedWindow":"2pmâ€“3pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7TR\\n- Type Admin Review\\n- Skill ADMIN1\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Completed (COM)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Completed (COM)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30034","division":"Service Delivery","taskStatus":"Not Assigned (ACT)","pwa":"ZB-ALPHA-07","taskType":"Inspection","primarySkill":"RISDN3","capabilities":["RISDN3"],"importanceScore":51,"msc":"N","taskCreated":"Thu 9 Jan, 8:15 AM","groupCode":"Service Delivery","systemType":"OR","employeeId":"T5103","resourceName":"Rhys Thomas","asset":"AS-9476","assetName":"Underground Joint Chamber","commitmentDate":"Sat 11 Jan, 9:05 AM","commitmentType":"Future","arrivedAtDate":"","domain":"SE","estimatedDuration":90,"lastProgression":"Allocated","category":"Inspection","description":"Inspection task for broadband/FTTP service in local area.","responseCode":"SH02","postCode":"CF44 7DK","appointmentStartDate":"","linkedTask":"RG-AB30024","customerAddress":"62 High Street, Aberdare","expectedStartDate":"Sun 11 Jan, 9:05 AM","expectedFinishDate":"Wed 14 Jan, 10:35 AM","externalQueueId":"EXT-441935","workId":"WK-717714","estimateNumber":"EST-55793","startDate":"","lat":51.71377,"lng":-3.44688,"expectedWindow":"9amâ€“10:30am","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7DK\\n- Type Inspection\\n- Skill RISDN3\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Not Assigned (ACT)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Not Assigned (ACT)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30035","division":"Complex Engineering","taskStatus":"Assigned (ACT)","pwa":"ZB-DELTA-02","taskType":"Survey","primarySkill":"RFTTP2","capabilities":["RFTTP2"],"importanceScore":58,"msc":"Y","taskCreated":"Fri 8 Jan, 1:15 PM","groupCode":"Complex Engineering","systemType":"NW","employeeId":"T6650","resourceName":"Carys Morgan","asset":"AS-4821","assetName":"Joint Box","commitmentDate":"Sun 10 Jan, 3:30 PM","commitmentType":"Start By","arrivedAtDate":"","domain":"CF","estimatedDuration":150,"lastProgression":"On Site","category":"Survey","description":"Survey task for broadband/FTTP service in local area.","responseCode":"SH02","postCode":"CF44 7RA","appointmentStartDate":"","linkedTask":"","customerAddress":"66 Brook Street, Aberdare","expectedStartDate":"Mon 10 Jan, 3:30 PM","expectedFinishDate":"Thu 13 Jan, 6:00 PM","externalQueueId":"EXT-441144","workId":"WK-711545","estimateNumber":"EST-55786","startDate":"","lat":51.7161,"lng":-3.44434,"expectedWindow":"3pmâ€“5:30pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7RA\\n- Type Survey\\n- Skill RFTTP2\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Assigned (ACT)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Assigned (ACT)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30036","division":"Admin","taskStatus":"Dispatched (AWI)","pwa":"ZB-DELTA-01","taskType":"Admin Review","primarySkill":"ADMIN2","capabilities":["ADMIN2"],"importanceScore":62,"msc":"Y","taskCreated":"Sat 9 Jan, 9:05 AM","groupCode":"Admin Group","systemType":"OR","employeeId":"T7855","resourceName":"Steffan Jenkins","asset":"OFF-4023","assetName":"Admin Processing Queue","commitmentDate":"Mon 11 Jan, 1:15 PM","commitmentType":"Appointment","arrivedAtDate":"Wed 13 Jan, 2:00 PM","domain":"CF","estimatedDuration":40,"lastProgression":"Scheduled","category":"Administration","description":"Administration task for broadband/FTTP service in local area.","responseCode":"AD02","postCode":"CF44 8DW","appointmentStartDate":"Sun 11 Jan, 1:15 PM","linkedTask":"","customerAddress":"","expectedStartDate":"Sun 11 Jan, 1:15 PM","expectedFinishDate":"Wed 14 Jan, 1:55 PM","externalQueueId":"EXT-441939","workId":"WK-790818","estimateNumber":"EST-55733","startDate":"Sun 11 Jan, 1:15 PM","lat":51.70823,"lng":-3.50376,"expectedWindow":"1pmâ€“1:40pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 8DW\\n- Type Admin Review\\n- Skill ADMIN2\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Dispatched (AWI)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Dispatched (AWI)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30037","division":"Service Delivery","taskStatus":"Accepted (ISS)","pwa":"ZB-ALPHA-09","taskType":"Emergency","primarySkill":"RISDN3","capabilities":["RISDN3"],"importanceScore":92,"msc":"Y","taskCreated":"Sun 10 Jan, 8:15 AM","groupCode":"Service Delivery","systemType":"OR","employeeId":"T9012","resourceName":"Nia Davies","asset":"AS-5211","assetName":"Core Node Cabinet","commitmentDate":"Tue 12 Jan, 2:00 PM","commitmentType":"Tail","arrivedAtDate":"Wed 14 Jan, 11:20 AM","domain":"MN","estimatedDuration":150,"lastProgression":"En Route","category":"Emergency","description":"Emergency task for broadband/FTTP service in local area.","responseCode":"SH05","postCode":"CF44 7UU","appointmentStartDate":"","linkedTask":"RG-AB30032","customerAddress":"58 Cwmbach Road, Aberdare","expectedStartDate":"Thu 14 Jan, 11:20 AM","expectedFinishDate":"Sun 17 Jan, 1:50 PM","externalQueueId":"EXT-441306","workId":"WK-791918","estimateNumber":"EST-55790","startDate":"Thu 14 Jan, 11:20 AM","lat":51.71803,"lng":-3.44716,"expectedWindow":"11amâ€“1:30pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7UU\\n- Type Emergency\\n- Skill RISDN3\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Accepted (ISS)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Accepted (ISS)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30038","division":"Complex Engineering","taskStatus":"In Progress (EXC)","pwa":"ZB-GAMMA-12","taskType":"Survey","primarySkill":"RFTTP1","capabilities":["RFTTP1"],"importanceScore":78,"msc":"N","taskCreated":"Mon 11 Jan, 9:05 AM","groupCode":"Complex Engineering","systemType":"NW","employeeId":"T6772","resourceName":"Owain James","asset":"AS-5987","assetName":"Manhole Access Point","commitmentDate":"Wed 13 Jan, 1:15 PM","commitmentType":"Start By","arrivedAtDate":"Thu 15 Jan, 10:40 AM","domain":"CF","estimatedDuration":150,"lastProgression":"On Site","category":"Survey","description":"Survey task for broadband/FTTP service in local area.","responseCode":"SH04","postCode":"CF44 7LV","appointmentStartDate":"","linkedTask":"RG-AB30024","customerAddress":"19 Canon Street, Aberdare","expectedStartDate":"Thu 15 Jan, 10:40 AM","expectedFinishDate":"Sun 18 Jan, 1:10 PM","externalQueueId":"EXT-441653","workId":"WK-744988","estimateNumber":"EST-55779","startDate":"Thu 15 Jan, 10:40 AM","lat":51.72651,"lng":-3.45205,"expectedWindow":"10amâ€“12:30pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7LV\\n- Type Survey\\n- Skill RFTTP1\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"In Progress (EXC)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"In Progress (EXC)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30039","division":"Admin","taskStatus":"Completed (COM)","pwa":"ZB-ALPHA-01","taskType":"Admin Review","primarySkill":"ADMIN1","capabilities":["ADMIN1"],"importanceScore":63,"msc":"N","taskCreated":"Tue 12 Jan, 1:15 PM","groupCode":"Admin Group","systemType":"FSM","employeeId":"T7339","resourceName":"Harvey Price","asset":"OFF-6697","assetName":"Document Verification Queue","commitmentDate":"Thu 14 Jan, 3:30 PM","commitmentType":"Tail","arrivedAtDate":"Sat 16 Jan, 2:00 PM","domain":"MN","estimatedDuration":60,"lastProgression":"Completed","category":"Administration","description":"Administration task for broadband/FTTP service in local area.","responseCode":"AD02","postCode":"CF44 6TS","appointmentStartDate":"","linkedTask":"","customerAddress":"","expectedStartDate":"Sat 16 Jan, 2:00 PM","expectedFinishDate":"Tue 19 Jan, 3:00 PM","externalQueueId":"EXT-441923","workId":"WK-791162","estimateNumber":"EST-55748","startDate":"Sat 16 Jan, 2:00 PM","lat":51.7245,"lng":-3.44809,"expectedWindow":"2pmâ€“3pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 6TS\\n- Type Admin Review\\n- Skill ADMIN1\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Completed (COM)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Completed (COM)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]},{"taskId":"RG-AB30040","division":"Service Delivery","taskStatus":"Not Assigned (ACT)","pwa":"ZB-GAMMA-08","taskType":"Repair","primarySkill":"RISDN2","capabilities":["RISDN2"],"importanceScore":59,"msc":"Y","taskCreated":"Wed 13 Jan, 2:00 PM","groupCode":"Service Delivery","systemType":"OR","employeeId":"T6142","resourceName":"Ffion James","asset":"AS-6883","assetName":"FTTC Cabinet","commitmentDate":"Fri 15 Jan, 3:30 PM","commitmentType":"Future","arrivedAtDate":"","domain":"CF","estimatedDuration":110,"lastProgression":"Allocated","category":"Repair","description":"Repair task for broadband/FTTP service in local area.","responseCode":"SH04","postCode":"CF44 7QA","appointmentStartDate":"","linkedTask":"RG-AB30034","customerAddress":"88 Victoria Street, Aberdare","expectedStartDate":"Sat 15 Jan, 3:30 PM","expectedFinishDate":"Tue 18 Jan, 5:20 PM","externalQueueId":"EXT-441548","workId":"WK-742382","estimateNumber":"EST-55781","startDate":"","lat":51.71294,"lng":-3.44307,"expectedWindow":"3pmâ€“5:20pm","history":[],"fieldNotes":"On-site observation:\\n- Postcode CF44 7QA\\n- Type Repair\\n- Skill RISDN2\\nActions:\\n- Verified equipment and recorded measurements\\n- Spoke with resident; confirmed access\\nNotes:\\n- Minor obstruction near DP; requires follow-up.","progressNotes":[{"ts":"2025-12-08T20:04:05.480Z","status":"Not Assigned (ACT)","text":"Initial site review captured from legacy system.","source":"System"},{"ts":"2025-12-08T19:19:05.480Z","status":"Not Assigned (ACT)","text":"Awaiting confirmation from field engineer regarding access.","source":"Dispatcher"}]}]'),Sl=JSON.parse('[{"resourceId":"SWBXA12","name":"John Evans","division":"Service Delivery","primarySkill":"RISDN2","secondarySkill":"RISDN1","status":"Available","pwa":"ZB-ALPHA-06","calloutGroup":"FJ","lastOutcome":null,"availableAgainAt":null,"contactNumber":"07700900101","notes":"","history":[],"updatedAt":null,"homePostCode":"CF44 7AA","homeLat":51.71352,"homeLng":-3.44879},{"resourceId":"QWERB33","name":"Ffion Hughes","division":"Service Delivery","primarySkill":"RISDN3","secondarySkill":null,"status":"Unavailable","pwa":"ZB-GAMMA-04","calloutGroup":"ISDN","lastOutcome":"Unavailable","availableAgainAt":"2025-01-18T14:00","contactNumber":"07700900102","notes":"Medical appointment","history":[{"previousOutcome":null,"previousAvailableAgainAt":null,"changedAt":"2025-01-18T14:00:00Z"}],"updatedAt":"2025-01-18T14:00:00Z","homePostCode":"CF44 6ET","homeLat":51.71114,"homeLng":-3.43291},{"resourceId":"PLMKC14","name":"Owain Roberts","division":"Service Delivery","primarySkill":"RISDN1","secondarySkill":"RISDN2","status":"Available","pwa":"ZB-OMEGA-11","calloutGroup":"FJ","lastOutcome":null,"availableAgainAt":null,"contactNumber":"07700900103","notes":"","history":[],"updatedAt":null,"homePostCode":"CF44 8NN","homeLat":51.72127,"homeLng":-3.44844},{"resourceId":"GHJTQ55","name":"Carys Morgan","division":"Service Delivery","primarySkill":"RISDN3","secondarySkill":null,"status":"On Task","pwa":"ZB-GAMMA-10","calloutGroup":"SD","lastOutcome":"Assigned","availableAgainAt":null,"contactNumber":"07700900104","notes":"","history":[],"updatedAt":"2025-01-17T09:30:00Z","homePostCode":"CF44 0AG","homeLat":51.69994,"homeLng":-3.43041},{"resourceId":"MNBGD82","name":"Rhys Davies","division":"Service Delivery","primarySkill":"RISDN2","secondarySkill":null,"status":"Available","pwa":"ZB-DELTA-10","calloutGroup":"FJ","lastOutcome":null,"availableAgainAt":null,"contactNumber":"07700900105","notes":"","history":[],"updatedAt":null,"homePostCode":"CF44 9SW","homeLat":51.73152,"homeLng":-3.50623},{"resourceId":"LKJHF22","name":"Lowri Jenkins","division":"Complex Engineering","primarySkill":"RFTTP1","secondarySkill":"RFTTP2","status":"Available","pwa":"ZB-GAMMA-12","calloutGroup":"CE","lastOutcome":null,"availableAgainAt":null,"contactNumber":"07700900106","notes":"","history":[],"updatedAt":null,"homePostCode":"CF45 3HD","homeLat":51.68691,"homeLng":-3.37852},{"resourceId":"ASDFR91","name":"Tomos Hughes","division":"Complex Engineering","primarySkill":"RFTTP2","secondarySkill":null,"status":"Unavailable","pwa":"ZB-DELTA-07","calloutGroup":"CE","lastOutcome":"Refusal","availableAgainAt":"2025-01-19T16:00","contactNumber":"07700900107","notes":"Family emergency","history":[{"previousOutcome":null,"previousAvailableAgainAt":null,"changedAt":"2025-01-17T12:00:00Z"}],"updatedAt":"2025-01-17T12:00:00Z","homePostCode":"CF47 8EL","homeLat":51.74842,"homeLng":-3.38123},{"resourceId":"ZXCVS67","name":"Bethan Evans","division":"Complex Engineering","primarySkill":"RFTTP2","secondarySkill":"RFTTP1","status":"On Task","pwa":"ZB-OMEGA-10","calloutGroup":"CE","lastOutcome":"Dispatched","availableAgainAt":null,"contactNumber":"07700900108","notes":"","history":[],"updatedAt":"2025-01-18T08:30:00Z","homePostCode":"CF44 6EA","homeLat":51.70887,"homeLng":-3.43811},{"resourceId":"BNMAS49","name":"Steffan Price","division":"Complex Engineering","primarySkill":"RFTTP1","secondarySkill":null,"status":"Available","pwa":"ZB-DELTA-05","calloutGroup":"CE","lastOutcome":null,"availableAgainAt":null,"contactNumber":"07700900109","notes":"","history":[],"updatedAt":null,"homePostCode":"CF42 6UP","homeLat":51.65761,"homeLng":-3.50744},{"resourceId":"POIUY73","name":"Aled Thomas","division":"Complex Engineering","primarySkill":"RFTTP2","secondarySkill":null,"status":"Available","pwa":"ZB-ALPHA-02","calloutGroup":"CE","lastOutcome":null,"availableAgainAt":null,"contactNumber":"07700900110","notes":"","history":[],"updatedAt":null,"homePostCode":"CF44 7AY","homeLat":51.71601,"homeLng":-3.45192},{"resourceId":"UJMKL89","name":"Lauren Evans","division":"Service Delivery","primarySkill":"RISDN2","secondarySkill":"RISDN3","status":"Available","pwa":"ZB-ALPHA-04","calloutGroup":"SD","lastOutcome":null,"availableAgainAt":null,"contactNumber":"07700900116","notes":"","history":[],"updatedAt":null,"homePostCode":"CF44 7RP","homeLat":51.71074,"homeLng":-3.44591},{"resourceId":"KJHGF02","name":"Nia James","division":"Service Delivery","primarySkill":"RISDN1","secondarySkill":null,"status":"On Task","pwa":"ZB-GAMMA-09","calloutGroup":"ISDN","lastOutcome":"Dispatched","availableAgainAt":null,"contactNumber":"07700900117","notes":"","history":[],"updatedAt":"2025-01-18T08:50:00Z","homePostCode":"CF44 6AB","homeLat":51.70818,"homeLng":-3.42742},{"resourceId":"RTYHN44","name":"Chloe Davies","division":"Service Delivery","primarySkill":"RISDN3","secondarySkill":null,"status":"Available","pwa":"ZB-ALPHA-09","calloutGroup":"SD","lastOutcome":null,"availableAgainAt":null,"contactNumber":"07700900120","notes":"","history":[],"updatedAt":null,"homePostCode":"CF44 9DL","homeLat":51.72475,"homeLng":-3.4862},{"resourceId":"SDNEW21","name":"Gareth Bowen","division":"Service Delivery","primarySkill":"RISDN1","secondarySkill":"RISDN2","status":"Available","pwa":"ZB-ALPHA-15","calloutGroup":"FJ","lastOutcome":null,"availableAgainAt":null,"contactNumber":"07700900130","notes":"","history":[],"updatedAt":null,"homePostCode":"CF44 8HA","homeLat":51.71955,"homeLng":-3.45591},{"resourceId":"SDNEW22","name":"Megan Griffiths","division":"Service Delivery","primarySkill":"RISDN3","secondarySkill":"RISDN1","status":"Unavailable","pwa":"ZB-OMEGA-17","calloutGroup":"SD","lastOutcome":"Unavailable","availableAgainAt":"2025-01-20T09:00:00Z","contactNumber":"07700900131","notes":"Childcare","history":[],"updatedAt":"2025-01-18T13:15:00Z","homePostCode":"CF44 0SW","homeLat":51.70082,"homeLng":-3.4211},{"resourceId":"SDNEW23","name":"Ieuan Watkins","division":"Service Delivery","primarySkill":"RISDN1","secondarySkill":null,"status":"Available","pwa":"ZB-GAMMA-18","calloutGroup":"FJ","lastOutcome":null,"availableAgainAt":null,"contactNumber":"07700900132","notes":"","history":[],"updatedAt":null,"homePostCode":"CF44 6LA","homeLat":51.70692,"homeLng":-3.43092},{"resourceId":"SDNEW24","name":"Seren Powell","division":"Service Delivery","primarySkill":"RISDN2","secondarySkill":"RISDN3","status":"On Task","pwa":"ZB-OMEGA-13","calloutGroup":"SD","lastOutcome":"Assigned","availableAgainAt":null,"contactNumber":"07700900133","notes":"","history":[],"updatedAt":"2025-01-18T10:10:00Z","homePostCode":"CF44 7PP","homeLat":51.71381,"homeLng":-3.45514},{"resourceId":"SDNEW25","name":"Rhys Llewellyn","division":"Service Delivery","primarySkill":"RISDN3","secondarySkill":"RISDN1","status":"Unavailable","pwa":"ZB-DELTA-11","calloutGroup":"ISDN","lastOutcome":"NoReply","availableAgainAt":"2025-01-21T08:00:00Z","contactNumber":"07700900134","notes":"Missed several calls","history":[{"previousOutcome":null,"previousAvailableAgainAt":null,"changedAt":"2025-01-18T12:45:00Z"}],"updatedAt":"2025-01-18T12:45:00Z","homePostCode":"CF44 9DJ","homeLat":51.7261,"homeLng":-3.49125},{"resourceId":"SDNEW26","name":"Catrin Rees","division":"Service Delivery","primarySkill":"RISDN2","secondarySkill":null,"status":"Available","pwa":"ZB-ALPHA-22","calloutGroup":"SD","lastOutcome":null,"availableAgainAt":null,"contactNumber":"07700900135","notes":"","history":[],"updatedAt":null,"homePostCode":"CF44 0AJ","homeLat":51.70102,"homeLng":-3.43274},{"resourceId":"SDNEW27","name":"Gwenllian Thomas","division":"Service Delivery","primarySkill":"RISDN1","secondarySkill":"RISDN2","status":"Available","pwa":"ZB-GAMMA-22","calloutGroup":"FJ","lastOutcome":null,"availableAgainAt":null,"contactNumber":"07700900136","notes":"","history":[],"updatedAt":null,"homePostCode":"CF44 9NH","homeLat":51.72982,"homeLng":-3.50008},{"resourceId":"FJNEW28","name":"Eleri Hopkins","division":"Service Delivery","primarySkill":"RISDN2","secondarySkill":"RISDN1","status":"Available","pwa":"ZB-ALPHA-18","calloutGroup":"FJ","lastOutcome":null,"availableAgainAt":null,"contactNumber":"07700900137","notes":"","history":[],"updatedAt":null,"homePostCode":"CF44 7LS","homeLat":51.71743,"homeLng":-3.45271},{"resourceId":"FJNEW29","name":"Geraint Morgan","division":"Service Delivery","primarySkill":"RISDN3","secondarySkill":null,"status":"Available","pwa":"ZB-GAMMA-25","calloutGroup":"FJ","lastOutcome":null,"availableAgainAt":null,"contactNumber":"07700900138","notes":"","history":[],"updatedAt":null,"homePostCode":"CF44 8PD","homeLat":51.72288,"homeLng":-3.45934},{"resourceId":"FJNEW30","name":"Non Davies","division":"Service Delivery","primarySkill":"RISDN2","secondarySkill":"RISDN3","status":"On Task","pwa":"ZB-DELTA-14","calloutGroup":"FJ","lastOutcome":"Dispatched","availableAgainAt":null,"contactNumber":"07700900139","notes":"","history":[],"updatedAt":"2025-01-18T15:10:00Z","homePostCode":"CF44 6QH","homeLat":51.70412,"homeLng":-3.42566}]'),Cl={Appointment:"#F59E0B","Start By":"#EC4899","Complete By":"#3B82F6",Future:"#10B981",Tail:"#6B7280"},Ks={Available:"#10B981",Unavailable:"#EF4444","On Task":"#3B82F6",Default:"#6B7280"},wl=36,Tl=50;function Al(n,i){const s=zh(n,.35);return`
    <svg width="${wl}" height="${Tl}" viewBox="0 0 40 56">
      ${i?`
        <rect x="1.5" y="1.5" width="37" height="53"
              rx="8" ry="8"
              fill="none"
              stroke="#DC2626"
              stroke-width="3" />`:""}

      <!-- Outer teardrop -->
      <path
        d="M20 2 C 11 2, 4 9, 4 18 C 4 29, 20 52, 20 52 C 20 52, 36 29, 36 18 C 36 9, 29 2, 20 2 Z"
        fill="#FFFFFF"
        stroke="#1F2937"
        stroke-width="2.5"
      />

      <!-- Inner coloured area (task commitment colour) -->
      <path
        d="M20 10 C 14 10, 9 15, 9 21 C 9 29, 20 44, 20 44 C 20 44, 31 29, 31 21 C 31 15, 26 10, 20 10 Z"
        fill="${n}"
        stroke="${s}"
        stroke-width="2.5"
      />
    </svg>
  `}function kl(n,i){const s=Ks[n]||Ks.Default;return`
    <svg width="${wl}" height="${Tl}" viewBox="0 0 40 56">
      ${i?`
        <rect x="1.5" y="1.5" width="37" height="53"
              rx="8" ry="8"
              fill="none"
              stroke="#DC2626"
              stroke-width="3" />`:""}

      <!-- Outer teardrop -->
      <path
        d="M20 2 C 11 2, 4 9, 4 18 C 4 29, 20 52, 20 52 C 20 52, 36 29, 36 18 C 36 9, 29 2, 20 2 Z"
        fill="#FFFFFF"
        stroke="#1F2937"
        stroke-width="2.5"
      />

      <!-- Inner panel (light grey) to give contrast for the person icon -->
      <path
        d="M20 10 C 14 10, 9 15, 9 21 C 9 29, 20 44, 20 44 C 20 44, 31 29, 31 21 C 31 15, 26 10, 20 10 Z"
        fill="#E5E7EB"
        stroke="#D1D5DB"
        stroke-width="2"
      />

      <!-- Person / engineer silhouette -->
      <g transform="translate(8,6)" fill="#111827">
        <circle cx="12" cy="8" r="5.2" />
        <path d="M4.5 24.5c0-4.6 3.8-8.2 7.5-8.2s7.5 3.6 7.5 8.2v5.5H4.5v-5.5z" />
      </g>

      <!-- Status dot -->
      <circle
        cx="20"
        cy="39"
        r="5"
        fill="${s}"
        stroke="#FFFFFF"
        stroke-width="2"
      />
    </svg>
  `}function zh(n,i=.35){const s=n.replace("#",""),l=parseInt(s.substring(0,2),16),p=parseInt(s.substring(2,4),16),h=parseInt(s.substring(4,6),16);return`rgb(${Math.floor(l*(1-i))}, ${Math.floor(p*(1-i))}, ${Math.floor(h*(1-i))})`}function jh({visible:n,onClose:i}){const s=$t();return n?a.jsx(Te,{sx:{position:"absolute",top:s.spacing(7),right:s.spacing(4),zIndex:9999},children:a.jsx(ht,{elevation:14,sx:{width:288,borderRadius:3,px:3,py:2.5,border:`1px solid ${Y(s.palette.primary.main,.18)}`,boxShadow:"0 18px 46px rgba(8,58,97,0.22)",backgroundImage:"none"},children:a.jsxs(ve,{spacing:3,children:[a.jsxs(ve,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[a.jsx(ue,{variant:"subtitle2",fontWeight:600,color:"text.primary",children:"Map Legend"}),a.jsx(cn,{size:"small",onClick:i,sx:{color:Y(s.palette.text.primary,.6),"&:hover":{color:s.palette.primary.main,bgcolor:Y(s.palette.primary.main,.08)}},"aria-label":"Close legend",children:a.jsx(no,{size:16})})]}),a.jsxs(ve,{spacing:1.5,children:[a.jsx(ue,{variant:"overline",sx:{fontWeight:700,letterSpacing:1.1,color:Y(s.palette.text.secondary,.85)},children:"Resources"}),a.jsx(ve,{spacing:1.5,children:Object.keys(Ks).map(l=>a.jsxs(ve,{direction:"row",spacing:2,alignItems:"center",children:[a.jsx(Te,{sx:{transform:"scale(0.75)",transformOrigin:"left center"},dangerouslySetInnerHTML:{__html:kl(l,!1)}}),a.jsx(ue,{variant:"caption",color:"text.secondary",children:l})]},l))})]}),a.jsxs(ve,{spacing:1.5,children:[a.jsx(ue,{variant:"overline",sx:{fontWeight:700,letterSpacing:1.1,color:Y(s.palette.text.secondary,.85)},children:"Tasks"}),a.jsx(ve,{spacing:1.5,children:Object.entries(Cl).map(([l,p])=>a.jsxs(ve,{direction:"row",spacing:2,alignItems:"center",children:[a.jsx(Te,{sx:{transform:"scale(0.75)",transformOrigin:"left center"},dangerouslySetInnerHTML:{__html:Al(p,!1)}}),a.jsx(ue,{variant:"caption",color:"text.secondary",children:l})]},l))})]})]})})}):null}function Ta(n){const i=n.match(/\(([^)]+)\)/);return i?i[1]:""}function Aa(n){return[...n].sort((i,s)=>{const l=Ta(i),p=Ta(s);return l===p?i.localeCompare(s):l.localeCompare(p)})}const Bh=mn(ht),Fh=({mode:n="task-default",onSearch:i,onClear:s,dropdownData:l,resetKey:p,hideActions:h})=>{const u=$t(),[m,g]=d.useState({statuses:[],pwa:[],capabilities:[],commitmentTypes:[],responseCodes:[],impCondition:"",impValue:""}),[b,v]=d.useState(null),[x,y]=d.useState({statuses:"",pwa:"",capabilities:"",commitmentTypes:"",responseCodes:"",resourceStatuses:""});d.useEffect(()=>{g({statuses:[],pwa:[],capabilities:[],commitmentTypes:[],responseCodes:[],impCondition:"",impValue:""}),y({statuses:"",pwa:"",capabilities:"",commitmentTypes:"",responseCodes:"",resourceStatuses:""}),v(null)},[p]),d.useEffect(()=>{h&&i(m)},[m,h,i]);const S=q=>q??[],T=(q,B)=>q.filter(ce=>ce.toLowerCase().includes(B.toLowerCase())),k={statuses:T(Aa(S(l.statuses)),x.statuses),pwa:T(S(l.pwa),x.pwa),capabilities:T(S(l.capabilities),x.capabilities),commitmentTypes:T(S(l.commitmentTypes),x.commitmentTypes),responseCodes:T(S(l.responseCodes),x.responseCodes),resourceStatuses:T(Aa(S(l.resourceStatuses)),x.resourceStatuses)},w=(q,B)=>{g(ce=>{const re=Array.isArray(ce[q])?ce[q]:[],ye=re.includes(B)?re.filter(Me=>Me!==B):[...re,B];return{...ce,[q]:ye}})},P=(q,B)=>{g(ce=>{const Se=(Array.isArray(ce[q])?ce[q]:[]).length===B.length&&B.length>0;return{...ce,[q]:Se?[]:[...B]}})},F=a.jsx(wi,{id:"statuses",label:"Task Status",options:k.statuses,selected:m.statuses,openDropdown:b,setOpenDropdown:v,query:x,setQuery:y,onToggle:q=>w("statuses",q),onSelectAll:()=>P("statuses",k.statuses)}),D=a.jsx(wi,{id:"pwa",label:"PWA",options:k.pwa,selected:m.pwa,openDropdown:b,setOpenDropdown:v,query:x,setQuery:y,onToggle:q=>w("pwa",q),onSelectAll:()=>P("pwa",k.pwa)}),z=a.jsx(wi,{id:"capabilities",label:"Capabilities",options:k.capabilities,selected:m.capabilities,openDropdown:b,setOpenDropdown:v,query:x,setQuery:y,onToggle:q=>w("capabilities",q),onSelectAll:()=>P("capabilities",k.capabilities)}),j=a.jsx(wi,{id:"commitmentTypes",label:"Commit Type",options:k.commitmentTypes,selected:m.commitmentTypes,openDropdown:b,setOpenDropdown:v,query:x,setQuery:y,onToggle:q=>w("commitmentTypes",q),onSelectAll:()=>P("commitmentTypes",k.commitmentTypes)}),K=a.jsx(wi,{id:"responseCodes",label:"Response Code",options:k.responseCodes,selected:m.responseCodes??[],openDropdown:b,setOpenDropdown:v,query:x,setQuery:y,onToggle:q=>w("responseCodes",q),onSelectAll:()=>P("responseCodes",k.responseCodes)}),H=a.jsx(Wh,{condition:m.impCondition??"",value:m.impValue??"",openDropdown:b,setOpenDropdown:v,onConditionChange:q=>g(B=>({...B,impCondition:q})),onValueChange:q=>g(B=>({...B,impValue:q}))}),oe=a.jsx(wi,{id:"resourceStatuses",label:"Status",options:k.resourceStatuses,selected:m.statuses,openDropdown:b,setOpenDropdown:v,query:x,setQuery:y,onToggle:q=>w("statuses",q),onSelectAll:()=>P("statuses",S(l.resourceStatuses))}),W=n==="resource-active"?"resource-active":"task-default",te=()=>W==="task-default"?a.jsxs(yn,{container:!0,spacing:2,children:[a.jsx(yn,{item:!0,xs:12,sm:6,children:F}),a.jsx(yn,{item:!0,xs:12,sm:6,children:D}),a.jsx(yn,{item:!0,xs:12,sm:6,children:z}),a.jsx(yn,{item:!0,xs:12,sm:6,children:j}),a.jsx(yn,{item:!0,xs:12,sm:6,children:K}),a.jsx(yn,{item:!0,xs:12,children:H})]}):W==="resource-active"?a.jsxs(yn,{container:!0,spacing:2,children:[a.jsx(yn,{item:!0,xs:12,sm:6,children:oe}),a.jsx(yn,{item:!0,xs:12,sm:6,children:D})]}):null;return a.jsxs(Bh,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0},transition:{duration:.2},elevation:0,sx:{width:"100%",maxWidth:"min(95vw, 800px)",borderRadius:3,px:3,py:3,display:"flex",flexDirection:"column",gap:3,border:`1px solid ${Y(u.palette.primary.main,.18)}`,boxShadow:"0 18px 46px rgba(8,58,97,0.18)",backgroundImage:"none",overflowX:"hidden"},children:[te(),!h&&a.jsxs(ve,{direction:"row",justifyContent:"flex-end",spacing:1.5,pt:2,mt:2,sx:{borderTop:`1px solid ${Y(u.palette.divider,.7)}`},children:[a.jsx(Mt,{variant:"contained",color:"primary",size:"small",onClick:()=>i(m),sx:{px:3,fontWeight:600,boxShadow:"none","&:hover":{boxShadow:"0 12px 28px rgba(8,58,97,0.25)"}},children:"Search"}),a.jsx(Mt,{variant:"outlined",size:"small",onClick:s,sx:{px:3,fontWeight:600,borderColor:Y(u.palette.primary.main,.28),"&:hover":{borderColor:u.palette.primary.main,backgroundColor:Y(u.palette.primary.main,.08)}},children:"Clear"})]})]})};function wi({id:n,label:i,options:s,selected:l,openDropdown:p,setOpenDropdown:h,query:u,setQuery:m,onToggle:g,onSelectAll:b}){const v=$t(),x=p===n,y=u[n]??"",S=s.length>0&&l.length===s.length,T=d.useRef(null),[k,w]=d.useState(null);d.useEffect(()=>{if(x&&T.current){const z=T.current.getBoundingClientRect();w(z.width)}x||w(null)},[x]);const P=l.length>0?`${l.length} selected`:i,F=z=>{z.preventDefault(),h(x?null:n)},D=()=>h(null);return a.jsxs(Te,{sx:{position:"relative"},children:[a.jsx(Mt,{ref:T,onClick:F,variant:"outlined",size:"small",endIcon:a.jsx(sr,{size:14}),sx:{width:"100%",justifyContent:"space-between",textTransform:"none",fontSize:12,fontWeight:500,height:36,borderRadius:1.5,borderColor:Y(v.palette.primary.main,.22),color:v.palette.text.primary,px:2,"&:hover":{borderColor:v.palette.primary.main,backgroundColor:Y(v.palette.primary.main,.06)}},children:a.jsx(ue,{variant:"caption",component:"span",sx:{flexGrow:1,textAlign:"left",pr:1.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:P})}),a.jsx(Ko,{open:x,anchorEl:T.current,placement:"bottom-start",transition:!0,modifiers:[{name:"offset",options:{offset:[0,8]}}],sx:{zIndex:2e3},children:({TransitionProps:z})=>a.jsx(oo,{...z,timeout:160,children:a.jsx(Te,{children:a.jsx(gl,{onClickAway:D,mouseEvent:"onMouseUp",children:a.jsx(ht,{elevation:12,sx:{p:1.5,width:k?Math.min(k,380):320,maxWidth:"90vw",borderRadius:2,border:`1px solid ${Y(v.palette.primary.main,.18)}`,boxShadow:"0 18px 46px rgba(8,58,97,0.18)",backgroundImage:"none"},children:a.jsxs(ve,{spacing:1.5,children:[a.jsx(Jt,{size:"small",value:y,autoFocus:!0,onChange:j=>m(K=>({...K,[n]:j.target.value})),placeholder:`Filter ${i.toLowerCase()}â€¦`,fullWidth:!0,inputProps:{style:{textAlign:"left",fontSize:12,padding:"6px 10px"}}}),a.jsxs(ve,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{px:1.5,py:.75,borderRadius:1.5,border:`1px solid ${Y(v.palette.primary.main,.12)}`,backgroundColor:Y(v.palette.primary.main,.05)},children:[a.jsx(ue,{variant:"caption",color:"text.secondary",children:S?"Clear All Results":"Select All Results"}),a.jsx(cn,{size:"small",onClick:j=>{j.preventDefault(),b()},sx:{color:v.palette.primary.main},children:S?a.jsx(Au,{size:16}):a.jsx(ku,{size:16})})]}),a.jsx(On,{sx:{my:.5}}),a.jsxs(ve,{spacing:.5,children:[s.map(j=>a.jsxs(Te,{onClick:()=>g(j),sx:{display:"flex",alignItems:"center",gap:1,px:1.5,py:.75,borderRadius:1.5,cursor:"pointer",transition:"background-color 0.2s ease","&:hover":{backgroundColor:Y(v.palette.primary.main,.08)}},children:[a.jsx(Ho,{size:"small",checked:l.includes(j),onChange:K=>{K.stopPropagation(),g(j)},sx:{padding:0,color:Y(v.palette.primary.main,.6),"&.Mui-checked":{color:v.palette.primary.main}}}),a.jsx(ue,{variant:"body2",sx:{fontSize:12,color:v.palette.text.primary},children:j})]},j)),s.length===0&&a.jsx(ue,{variant:"caption",color:"text.secondary",sx:{px:1.5,py:.5,fontStyle:"italic"},children:"No results"})]})]})})})})})})]})}function Wh({condition:n,value:i,openDropdown:s,setOpenDropdown:l,onConditionChange:p,onValueChange:h}){const u=$t(),[m,g]=d.useState(null),b=s==="imp";d.useEffect(()=>{b||g(null)},[b]);const v=n==="greater"?"Greater Than":n==="less"?"Less Than":"IMP Score",x=S=>{b?l(null):(g(S.currentTarget),l("imp"))},y=()=>l(null);return a.jsxs(ve,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:{xs:"stretch",sm:"flex-start"},children:[a.jsx(Mt,{variant:"outlined",size:"small",endIcon:a.jsx(sr,{size:14}),onClick:x,sx:{maxWidth:240,width:"100%",justifyContent:"space-between",textTransform:"none",fontSize:12,fontWeight:500,height:36,borderRadius:1.5,borderColor:Y(u.palette.primary.main,.22),color:u.palette.text.primary,px:2,"&:hover":{borderColor:u.palette.primary.main,backgroundColor:Y(u.palette.primary.main,.06)}},children:a.jsx(ue,{variant:"caption",component:"span",sx:{flexGrow:1,textAlign:"left",pr:1.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:v})}),a.jsx(Jt,{type:"number",size:"small",value:i,onChange:S=>{const T=(S.target.value||"").replace(/\D/g,"").slice(0,3);h(T)},placeholder:"Value",inputProps:{min:0,max:999,style:{fontSize:12,padding:"6px 10px",width:"clamp(64px, 6vw, 90px)"}}}),a.jsxs(ol,{anchorEl:m,open:b,onClose:y,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},MenuListProps:{dense:!0,sx:{fontSize:12}},slotProps:{paper:{elevation:12,sx:{minWidth:180,borderRadius:2,border:`1px solid ${Y(u.palette.primary.main,.18)}`,boxShadow:"0 18px 46px rgba(8,58,97,0.18)",backgroundImage:"none"}}},children:[a.jsx(Wt,{onClick:()=>{p("greater"),y()},children:"Greater Than"}),a.jsx(Wt,{onClick:()=>{p("less"),y()},children:"Less Than"})]})]})}function Zh({mode:n,onSearch:i,onClear:s,dropdownData:l,resetKey:p}){return a.jsx(Fh,{mode:n,onSearch:i,onClear:s,dropdownData:l,resetKey:p,hideActions:!0})}function $h(){const n=$t();return a.jsx(ht,{elevation:0,sx:{height:"100%",borderRadius:3,px:3,py:2.5,border:`1px solid ${Y(n.palette.primary.main,.18)}`,boxShadow:"0 18px 46px rgba(8,58,97,0.18)",backgroundImage:"none"}})}function Pl(n,i){const s=d.useRef(i);d.useEffect(function(){i!==s.current&&n.attributionControl!=null&&(s.current!=null&&n.attributionControl.removeAttribution(s.current),i!=null&&n.attributionControl.addAttribution(i)),s.current=i},[n,i])}const Hh=1;function Gh(n){return Object.freeze({__version:Hh,map:n})}function Jh(n,i){return Object.freeze({...n,...i})}const dr=d.createContext(null);function pr(){const n=d.use(dr);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function Vh(n){function i(s,l){const{instance:p,context:h}=n(s).current;d.useImperativeHandle(l,()=>p);const{children:u}=s;return u==null?null:Nn.createElement(dr,{value:h},u)}return d.forwardRef(i)}function Uh(n){function i(s,l){const[p,h]=d.useState(!1),{instance:u}=n(s,h).current;d.useImperativeHandle(l,()=>u),d.useEffect(function(){p&&u.update()},[u,p,s.children]);const m=u._contentNode;return m?Di.createPortal(s.children,m):null}return d.forwardRef(i)}function qh(n){function i(s,l){const{instance:p}=n(s).current;return d.useImperativeHandle(l,()=>p),null}return d.forwardRef(i)}function Il(n,i){const s=d.useRef(void 0);d.useEffect(function(){return i!=null&&n.instance.on(i),s.current=i,function(){s.current!=null&&n.instance.off(s.current),s.current=null}},[n,i])}function hr(n,i){const s=n.pane??i.pane;return s?{...n,pane:s}:n}function Kh(n,i){return function(l,p){const h=pr(),u=n(hr(l,h),h);return Pl(h.map,l.attribution),Il(u.current,l.eventHandlers),i(u.current,h,l,p),u}}var Ui={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Xh=Ui.exports,ka;function Yh(){return ka||(ka=1,function(n,i){(function(s,l){l(i)})(Xh,function(s){var l="1.9.4";function p(e){var t,o,r,c;for(o=1,r=arguments.length;o<r;o++){c=arguments[o];for(t in c)e[t]=c[t]}return e}var h=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function u(e,t){var o=Array.prototype.slice;if(e.bind)return e.bind.apply(e,o.call(arguments,1));var r=o.call(arguments,2);return function(){return e.apply(t,r.length?r.concat(o.call(arguments)):arguments)}}var m=0;function g(e){return"_leaflet_id"in e||(e._leaflet_id=++m),e._leaflet_id}function b(e,t,o){var r,c,f,C;return C=function(){r=!1,c&&(f.apply(o,c),c=!1)},f=function(){r?c=arguments:(e.apply(o,arguments),setTimeout(C,t),r=!0)},f}function v(e,t,o){var r=t[1],c=t[0],f=r-c;return e===r&&o?e:((e-c)%f+f)%f+c}function x(){return!1}function y(e,t){if(t===!1)return e;var o=Math.pow(10,t===void 0?6:t);return Math.round(e*o)/o}function S(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function T(e){return S(e).split(/\s+/)}function k(e,t){Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?h(e.options):{});for(var o in t)e.options[o]=t[o];return e.options}function w(e,t,o){var r=[];for(var c in e)r.push(encodeURIComponent(o?c.toUpperCase():c)+"="+encodeURIComponent(e[c]));return(!t||t.indexOf("?")===-1?"?":"&")+r.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function F(e,t){return e.replace(P,function(o,r){var c=t[r];if(c===void 0)throw new Error("No value provided for variable "+o);return typeof c=="function"&&(c=c(t)),c})}var D=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function z(e,t){for(var o=0;o<e.length;o++)if(e[o]===t)return o;return-1}var j="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function K(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var H=0;function oe(e){var t=+new Date,o=Math.max(0,16-(t-H));return H=t+o,window.setTimeout(e,o)}var W=window.requestAnimationFrame||K("RequestAnimationFrame")||oe,te=window.cancelAnimationFrame||K("CancelAnimationFrame")||K("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function q(e,t,o){if(o&&W===oe)e.call(t);else return W.call(window,u(e,t))}function B(e){e&&te.call(window,e)}var ce={__proto__:null,extend:p,create:h,bind:u,get lastId(){return m},stamp:g,throttle:b,wrapNum:v,falseFn:x,formatNum:y,trim:S,splitWords:T,setOptions:k,getParamString:w,template:F,isArray:D,indexOf:z,emptyImageUrl:j,requestFn:W,cancelFn:te,requestAnimFrame:q,cancelAnimFrame:B};function re(){}re.extend=function(e){var t=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=t.__super__=this.prototype,r=h(o);r.constructor=t,t.prototype=r;for(var c in this)Object.prototype.hasOwnProperty.call(this,c)&&c!=="prototype"&&c!=="__super__"&&(t[c]=this[c]);return e.statics&&p(t,e.statics),e.includes&&(Se(e.includes),p.apply(null,[r].concat(e.includes))),p(r,e),delete r.statics,delete r.includes,r.options&&(r.options=o.options?h(o.options):{},p(r.options,e.options)),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var f=0,C=r._initHooks.length;f<C;f++)r._initHooks[f].call(this)}},t},re.include=function(e){var t=this.prototype.options;return p(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},re.mergeOptions=function(e){return p(this.prototype.options,e),this},re.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),o=typeof e=="function"?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this};function Se(e){if(!(typeof L>"u"||!L||!L.Mixin)){e=D(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ye={on:function(e,t,o){if(typeof e=="object")for(var r in e)this._on(r,e[r],t);else{e=T(e);for(var c=0,f=e.length;c<f;c++)this._on(e[c],t,o)}return this},off:function(e,t,o){if(!arguments.length)delete this._events;else if(typeof e=="object")for(var r in e)this._off(r,e[r],t);else{e=T(e);for(var c=arguments.length===1,f=0,C=e.length;f<C;f++)c?this._off(e[f]):this._off(e[f],t,o)}return this},_on:function(e,t,o,r){if(typeof t!="function"){console.warn("wrong listener type: "+typeof t);return}if(this._listens(e,t,o)===!1){o===this&&(o=void 0);var c={fn:t,ctx:o};r&&(c.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(c)}},_off:function(e,t,o){var r,c,f;if(this._events&&(r=this._events[e],!!r)){if(arguments.length===1){if(this._firingCount)for(c=0,f=r.length;c<f;c++)r[c].fn=x;delete this._events[e];return}if(typeof t!="function"){console.warn("wrong listener type: "+typeof t);return}var C=this._listens(e,t,o);if(C!==!1){var I=r[C];this._firingCount&&(I.fn=x,this._events[e]=r=r.slice()),r.splice(C,1)}}},fire:function(e,t,o){if(!this.listens(e,o))return this;var r=p({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var c=this._events[e];if(c){this._firingCount=this._firingCount+1||1;for(var f=0,C=c.length;f<C;f++){var I=c[f],E=I.fn;I.once&&this.off(e,E,I.ctx),E.call(I.ctx||this,r)}this._firingCount--}}return o&&this._propagateEvent(r),this},listens:function(e,t,o,r){typeof e!="string"&&console.warn('"string" type argument expected');var c=t;typeof t!="function"&&(r=!!t,c=void 0,o=void 0);var f=this._events&&this._events[e];if(f&&f.length&&this._listens(e,c,o)!==!1)return!0;if(r){for(var C in this._eventParents)if(this._eventParents[C].listens(e,t,o,r))return!0}return!1},_listens:function(e,t,o){if(!this._events)return!1;var r=this._events[e]||[];if(!t)return!!r.length;o===this&&(o=void 0);for(var c=0,f=r.length;c<f;c++)if(r[c].fn===t&&r[c].ctx===o)return c;return!1},once:function(e,t,o){if(typeof e=="object")for(var r in e)this._on(r,e[r],t,!0);else{e=T(e);for(var c=0,f=e.length;c<f;c++)this._on(e[c],t,o,!0)}return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[g(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[g(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,p({layer:e.target,propagatedFrom:e.target},e),!0)}};ye.addEventListener=ye.on,ye.removeEventListener=ye.clearAllEventListeners=ye.off,ye.addOneTimeEventListener=ye.once,ye.fireEvent=ye.fire,ye.hasEventListeners=ye.listens;var Me=re.extend(ye);function X(e,t,o){this.x=o?Math.round(e):e,this.y=o?Math.round(t):t}var Ae=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};X.prototype={clone:function(){return new X(this.x,this.y)},add:function(e){return this.clone()._add(ae(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(ae(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new X(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new X(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ae(this.x),this.y=Ae(this.y),this},distanceTo:function(e){e=ae(e);var t=e.x-this.x,o=e.y-this.y;return Math.sqrt(t*t+o*o)},equals:function(e){return e=ae(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=ae(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function ae(e,t,o){return e instanceof X?e:D(e)?new X(e[0],e[1]):e==null?e:typeof e=="object"&&"x"in e&&"y"in e?new X(e.x,e.y):new X(e,t,o)}function pe(e,t){if(e)for(var o=t?[e,t]:e,r=0,c=o.length;r<c;r++)this.extend(o[r])}pe.prototype={extend:function(e){var t,o;if(!e)return this;if(e instanceof X||typeof e[0]=="number"||"x"in e)t=o=ae(e);else if(e=Z(e),t=e.min,o=e.max,!t||!o)return this;return!this.min&&!this.max?(this.min=t.clone(),this.max=o.clone()):(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(o.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(o.y,this.max.y)),this},getCenter:function(e){return ae((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return ae(this.min.x,this.max.y)},getTopRight:function(){return ae(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,o;return typeof e[0]=="number"||e instanceof X?e=ae(e):e=Z(e),e instanceof pe?(t=e.min,o=e.max):t=o=e,t.x>=this.min.x&&o.x<=this.max.x&&t.y>=this.min.y&&o.y<=this.max.y},intersects:function(e){e=Z(e);var t=this.min,o=this.max,r=e.min,c=e.max,f=c.x>=t.x&&r.x<=o.x,C=c.y>=t.y&&r.y<=o.y;return f&&C},overlaps:function(e){e=Z(e);var t=this.min,o=this.max,r=e.min,c=e.max,f=c.x>t.x&&r.x<o.x,C=c.y>t.y&&r.y<o.y;return f&&C},isValid:function(){return!!(this.min&&this.max)},pad:function(e){var t=this.min,o=this.max,r=Math.abs(t.x-o.x)*e,c=Math.abs(t.y-o.y)*e;return Z(ae(t.x-r,t.y-c),ae(o.x+r,o.y+c))},equals:function(e){return e?(e=Z(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight())):!1}};function Z(e,t){return!e||e instanceof pe?e:new pe(e,t)}function N(e,t){if(e)for(var o=t?[e,t]:e,r=0,c=o.length;r<c;r++)this.extend(o[r])}N.prototype={extend:function(e){var t=this._southWest,o=this._northEast,r,c;if(e instanceof M)r=e,c=e;else if(e instanceof N){if(r=e._southWest,c=e._northEast,!r||!c)return this}else return e?this.extend(O(e)||V(e)):this;return!t&&!o?(this._southWest=new M(r.lat,r.lng),this._northEast=new M(c.lat,c.lng)):(t.lat=Math.min(r.lat,t.lat),t.lng=Math.min(r.lng,t.lng),o.lat=Math.max(c.lat,o.lat),o.lng=Math.max(c.lng,o.lng)),this},pad:function(e){var t=this._southWest,o=this._northEast,r=Math.abs(t.lat-o.lat)*e,c=Math.abs(t.lng-o.lng)*e;return new N(new M(t.lat-r,t.lng-c),new M(o.lat+r,o.lng+c))},getCenter:function(){return new M((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new M(this.getNorth(),this.getWest())},getSouthEast:function(){return new M(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){typeof e[0]=="number"||e instanceof M||"lat"in e?e=O(e):e=V(e);var t=this._southWest,o=this._northEast,r,c;return e instanceof N?(r=e.getSouthWest(),c=e.getNorthEast()):r=c=e,r.lat>=t.lat&&c.lat<=o.lat&&r.lng>=t.lng&&c.lng<=o.lng},intersects:function(e){e=V(e);var t=this._southWest,o=this._northEast,r=e.getSouthWest(),c=e.getNorthEast(),f=c.lat>=t.lat&&r.lat<=o.lat,C=c.lng>=t.lng&&r.lng<=o.lng;return f&&C},overlaps:function(e){e=V(e);var t=this._southWest,o=this._northEast,r=e.getSouthWest(),c=e.getNorthEast(),f=c.lat>t.lat&&r.lat<o.lat,C=c.lng>t.lng&&r.lng<o.lng;return f&&C},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return e?(e=V(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function V(e,t){return e instanceof N?e:new N(e,t)}function M(e,t,o){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,o!==void 0&&(this.alt=+o)}M.prototype={equals:function(e,t){if(!e)return!1;e=O(e);var o=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return o<=(t===void 0?1e-9:t)},toString:function(e){return"LatLng("+y(this.lat,e)+", "+y(this.lng,e)+")"},distanceTo:function(e){return le.distance(this,O(e))},wrap:function(){return le.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,o=t/Math.cos(Math.PI/180*this.lat);return V([this.lat-t,this.lng-o],[this.lat+t,this.lng+o])},clone:function(){return new M(this.lat,this.lng,this.alt)}};function O(e,t,o){return e instanceof M?e:D(e)&&typeof e[0]!="object"?e.length===3?new M(e[0],e[1],e[2]):e.length===2?new M(e[0],e[1]):null:e==null?e:typeof e=="object"&&"lat"in e?new M(e.lat,"lng"in e?e.lng:e.lon,e.alt):t===void 0?null:new M(e,t,o)}var se={latLngToPoint:function(e,t){var o=this.projection.project(e),r=this.scale(t);return this.transformation._transform(o,r)},pointToLatLng:function(e,t){var o=this.scale(t),r=this.transformation.untransform(e,o);return this.projection.unproject(r)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,o=this.scale(e),r=this.transformation.transform(t.min,o),c=this.transformation.transform(t.max,o);return new pe(r,c)},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?v(e.lng,this.wrapLng,!0):e.lng,o=this.wrapLat?v(e.lat,this.wrapLat,!0):e.lat,r=e.alt;return new M(o,t,r)},wrapLatLngBounds:function(e){var t=e.getCenter(),o=this.wrapLatLng(t),r=t.lat-o.lat,c=t.lng-o.lng;if(r===0&&c===0)return e;var f=e.getSouthWest(),C=e.getNorthEast(),I=new M(f.lat-r,f.lng-c),E=new M(C.lat-r,C.lng-c);return new N(I,E)}},le=p({},se,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var o=Math.PI/180,r=e.lat*o,c=t.lat*o,f=Math.sin((t.lat-e.lat)*o/2),C=Math.sin((t.lng-e.lng)*o/2),I=f*f+Math.cos(r)*Math.cos(c)*C*C,E=2*Math.atan2(Math.sqrt(I),Math.sqrt(1-I));return this.R*E}}),Ce=6378137,We={R:Ce,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,o=this.MAX_LATITUDE,r=Math.max(Math.min(o,e.lat),-o),c=Math.sin(r*t);return new X(this.R*e.lng*t,this.R*Math.log((1+c)/(1-c))/2)},unproject:function(e){var t=180/Math.PI;return new M((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=Ce*Math.PI;return new pe([-e,-e],[e,e])}()};function ct(e,t,o,r){if(D(e)){this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3];return}this._a=e,this._b=t,this._c=o,this._d=r}ct.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new X((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};function Ne(e,t,o,r){return new ct(e,t,o,r)}var Be=p({},le,{code:"EPSG:3857",projection:We,transformation:function(){var e=.5/(Math.PI*We.R);return Ne(e,.5,-e,.5)}()}),je=p({},Be,{code:"EPSG:900913"});function Ge(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function wt(e,t){var o="",r,c,f,C,I,E;for(r=0,f=e.length;r<f;r++){for(I=e[r],c=0,C=I.length;c<C;c++)E=I[c],o+=(c?"L":"M")+E.x+" "+E.y;o+=t?fe.svg?"z":"x":""}return o||"M0 0"}var me=document.documentElement.style,Pe="ActiveXObject"in window,ke=Pe&&!document.addEventListener,bt="msLaunchUri"in navigator&&!("documentMode"in document),st=tt("webkit"),_t=tt("android"),At=tt("android 2")||tt("android 3"),ut=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),gt=_t&&tt("Google")&&ut<537&&!("AudioNode"in window),jt=!!window.opera,Et=!bt&&tt("chrome"),Ve=tt("gecko")&&!st&&!jt&&!Pe,He=!Et&&tt("safari"),Ee=tt("phantom"),mt="OTransition"in me,dt=navigator.platform.indexOf("Win")===0,yt=Pe&&"transition"in me,Xt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!At,vt="MozPerspective"in me,Bt=!window.L_DISABLE_3D&&(yt||Xt||vt)&&!mt&&!Ee,Yt=typeof orientation<"u"||tt("mobile"),on=Yt&&st,qt=Yt&&Xt,Ft=!window.PointerEvent&&window.MSPointerEvent,de=!!(window.PointerEvent||Ft),A="ontouchstart"in window||!!window.TouchEvent,U=!window.L_NO_TOUCH&&(A||de),xe=Yt&&jt,Ke=Yt&&Ve,Ze=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,De=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",x,t),window.removeEventListener("testPassiveEventSupport",x,t)}catch{}return e}(),Ue=function(){return!!document.createElement("canvas").getContext}(),Q=!!(document.createElementNS&&Ge("svg").createSVGRect),G=!!Q&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ee=!Q&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&typeof t.adj=="object"}catch{return!1}}(),ie=navigator.platform.indexOf("Mac")===0,Je=navigator.platform.indexOf("Linux")===0;function tt(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var fe={ie:Pe,ielt9:ke,edge:bt,webkit:st,android:_t,android23:At,androidStock:gt,opera:jt,chrome:Et,gecko:Ve,safari:He,phantom:Ee,opera12:mt,win:dt,ie3d:yt,webkit3d:Xt,gecko3d:vt,any3d:Bt,mobile:Yt,mobileWebkit:on,mobileWebkit3d:qt,msPointer:Ft,pointer:de,touch:U,touchNative:A,mobileOpera:xe,mobileGecko:Ke,retina:Ze,passiveEvents:De,canvas:Ue,svg:Q,vml:ee,inlineSvg:G,mac:ie,linux:Je},Ht=fe.msPointer?"MSPointerDown":"pointerdown",xt=fe.msPointer?"MSPointerMove":"pointermove",lt=fe.msPointer?"MSPointerUp":"pointerup",Xe=fe.msPointer?"MSPointerCancel":"pointercancel",Qt={touchstart:Ht,touchmove:xt,touchend:lt,touchcancel:Xe},xn={touchstart:zn,touchmove:Pn,touchend:Pn,touchcancel:Pn},J={},$=!1;function be(e,t,o){return t==="touchstart"&&sn(),xn[t]?(o=xn[t].bind(this,o),e.addEventListener(Qt[t],o,!1),o):(console.warn("wrong event specified:",t),x)}function Fe(e,t,o){if(!Qt[t]){console.warn("wrong event specified:",t);return}e.removeEventListener(Qt[t],o,!1)}function Ye(e){J[e.pointerId]=e}function rt(e){J[e.pointerId]&&(J[e.pointerId]=e)}function Pt(e){delete J[e.pointerId]}function sn(){$||(document.addEventListener(Ht,Ye,!0),document.addEventListener(xt,rt,!0),document.addEventListener(lt,Pt,!0),document.addEventListener(Xe,Pt,!0),$=!0)}function Pn(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){t.touches=[];for(var o in J)t.touches.push(J[o]);t.changedTouches=[t],e(t)}}function zn(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&an(t),Pn(e,t)}function en(e){var t={},o,r;for(r in e)o=e[r],t[r]=o&&o.bind?o.bind(e):o;return e=t,t.type="dblclick",t.detail=2,t.isTrusted=!1,t._simulated=!0,t}var Gt=200;function fn(e,t){e.addEventListener("dblclick",t);var o=0,r;function c(f){if(f.detail!==1){r=f.detail;return}if(!(f.pointerType==="mouse"||f.sourceCapabilities&&!f.sourceCapabilities.firesTouchEvents)){var C=Cr(f);if(!(C.some(function(E){return E instanceof HTMLLabelElement&&E.attributes.for})&&!C.some(function(E){return E instanceof HTMLInputElement||E instanceof HTMLSelectElement}))){var I=Date.now();I-o<=Gt?(r++,r===2&&t(en(f))):r=1,o=I}}}return e.addEventListener("click",c),{dblclick:t,simDblclick:c}}function ot(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var rn=gi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Rt=gi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Cn=Rt==="webkitTransition"||Rt==="OTransition"?Rt+"End":"transitionend";function wn(e){return typeof e=="string"?document.getElementById(e):e}function Gn(e,t){var o=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!o||o==="auto")&&document.defaultView){var r=document.defaultView.getComputedStyle(e,null);o=r?r[t]:null}return o==="auto"?null:o}function qe(e,t,o){var r=document.createElement(e);return r.className=t||"",o&&o.appendChild(r),r}function It(e){var t=e.parentNode;t&&t.removeChild(e)}function mi(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Jn(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function Vn(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function Ri(e,t){if(e.classList!==void 0)return e.classList.contains(t);var o=fi(e);return o.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(o)}function $e(e,t){if(e.classList!==void 0)for(var o=T(t),r=0,c=o.length;r<c;r++)e.classList.add(o[r]);else if(!Ri(e,t)){var f=fi(e);Ni(e,(f?f+" ":"")+t)}}function Nt(e,t){e.classList!==void 0?e.classList.remove(t):Ni(e,S((" "+fi(e)+" ").replace(" "+t+" "," ")))}function Ni(e,t){e.className.baseVal===void 0?e.className=t:e.className.baseVal=t}function fi(e){return e.correspondingElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function dn(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&Oi(e,t)}function Oi(e,t){var o=!1,r="DXImageTransform.Microsoft.Alpha";try{o=e.filters.item(r)}catch{if(t===1)return}t=Math.round(t*100),o?(o.Enabled=t!==100,o.Opacity=t):e.style.filter+=" progid:"+r+"(opacity="+t+")"}function gi(e){for(var t=document.documentElement.style,o=0;o<e.length;o++)if(e[o]in t)return e[o];return!1}function In(e,t,o){var r=t||new X(0,0);e.style[rn]=(fe.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(o?" scale("+o+")":"")}function Ot(e,t){e._leaflet_pos=t,fe.any3d?In(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function gn(e){return e._leaflet_pos||new X(0,0)}var ni,Mn,zi;if("onselectstart"in document)ni=function(){Ie(window,"selectstart",an)},Mn=function(){ft(window,"selectstart",an)};else{var _=gi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ni=function(){if(_){var e=document.documentElement.style;zi=e[_],e[_]="none"}},Mn=function(){_&&(document.documentElement.style[_]=zi,zi=void 0)}}function R(){Ie(window,"dragstart",an)}function ge(){ft(window,"dragstart",an)}var he,we;function Re(e){for(;e.tabIndex===-1;)e=e.parentNode;e.style&&(Le(),he=e,we=e.style.outlineStyle,e.style.outlineStyle="none",Ie(window,"keydown",Le))}function Le(){he&&(he.style.outlineStyle=we,he=void 0,we=void 0,ft(window,"keydown",Le))}function pt(e){do e=e.parentNode;while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function zt(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var ln={__proto__:null,TRANSFORM:rn,TRANSITION:Rt,TRANSITION_END:Cn,get:wn,getStyle:Gn,create:qe,remove:It,empty:mi,toFront:Jn,toBack:Vn,hasClass:Ri,addClass:$e,removeClass:Nt,setClass:Ni,getClass:fi,setOpacity:dn,testProp:gi,setTransform:In,setPosition:Ot,getPosition:gn,get disableTextSelection(){return ni},get enableTextSelection(){return Mn},disableImageDrag:R,enableImageDrag:ge,preventOutline:Re,restoreOutline:Le,getSizedParentNode:pt,getScale:zt};function Ie(e,t,o,r){if(t&&typeof t=="object")for(var c in t)ds(e,c,t[c],o);else{t=T(t);for(var f=0,C=t.length;f<C;f++)ds(e,t[f],o,r)}return this}var pn="_leaflet_events";function ft(e,t,o,r){if(arguments.length===1)Sr(e),delete e[pn];else if(t&&typeof t=="object")for(var c in t)ps(e,c,t[c],o);else if(t=T(t),arguments.length===2)Sr(e,function(I){return z(t,I)!==-1});else for(var f=0,C=t.length;f<C;f++)ps(e,t[f],o,r);return this}function Sr(e,t){for(var o in e[pn]){var r=o.split(/\d/)[0];(!t||t(r))&&ps(e,r,null,null,o)}}var us={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ds(e,t,o,r){var c=t+g(o)+(r?"_"+g(r):"");if(e[pn]&&e[pn][c])return this;var f=function(I){return o.call(r||e,I||window.event)},C=f;!fe.touchNative&&fe.pointer&&t.indexOf("touch")===0?f=be(e,t,f):fe.touch&&t==="dblclick"?f=fn(e,f):"addEventListener"in e?t==="touchstart"||t==="touchmove"||t==="wheel"||t==="mousewheel"?e.addEventListener(us[t]||t,f,fe.passiveEvents?{passive:!1}:!1):t==="mouseenter"||t==="mouseleave"?(f=function(I){I=I||window.event,ms(e,I)&&C(I)},e.addEventListener(us[t],f,!1)):e.addEventListener(t,C,!1):e.attachEvent("on"+t,f),e[pn]=e[pn]||{},e[pn][c]=f}function ps(e,t,o,r,c){c=c||t+g(o)+(r?"_"+g(r):"");var f=e[pn]&&e[pn][c];if(!f)return this;!fe.touchNative&&fe.pointer&&t.indexOf("touch")===0?Fe(e,t,f):fe.touch&&t==="dblclick"?ot(e,f):"removeEventListener"in e?e.removeEventListener(us[t]||t,f,!1):e.detachEvent("on"+t,f),e[pn][c]=null}function ii(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function hs(e){return ds(e,"wheel",ii),this}function ji(e){return Ie(e,"mousedown touchstart dblclick contextmenu",ii),e._leaflet_disable_click=!0,this}function an(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function oi(e){return an(e),ii(e),this}function Cr(e){if(e.composedPath)return e.composedPath();for(var t=[],o=e.target;o;)t.push(o),o=o.parentNode;return t}function wr(e,t){if(!t)return new X(e.clientX,e.clientY);var o=zt(t),r=o.boundingClientRect;return new X((e.clientX-r.left)/o.x-t.clientLeft,(e.clientY-r.top)/o.y-t.clientTop)}var rc=fe.linux&&fe.chrome?window.devicePixelRatio:fe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Tr(e){return fe.edge?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/rc:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}function ms(e,t){var o=t.relatedTarget;if(!o)return!0;try{for(;o&&o!==e;)o=o.parentNode}catch{return!1}return o!==e}var ac={__proto__:null,on:Ie,off:ft,stopPropagation:ii,disableScrollPropagation:hs,disableClickPropagation:ji,preventDefault:an,stop:oi,getPropagationPath:Cr,getMousePosition:wr,getWheelDelta:Tr,isExternalTarget:ms,addListener:Ie,removeListener:ft},Ar=Me.extend({run:function(e,t,o,r){this.stop(),this._el=e,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=gn(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=q(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,o=this._duration*1e3;t<o?this._runFrame(this._easeOut(t/o),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var o=this._startPos.add(this._offset.multiplyBy(e));t&&o._round(),Ot(this._el,o),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),at=Me.extend({options:{crs:Be,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=k(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.zoom!==void 0&&(this._zoom=this._limitZoom(t.zoom)),t.center&&t.zoom!==void 0&&this.setView(O(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Rt&&fe.any3d&&!fe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ie(this._proxy,Cn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,o){if(t=t===void 0?this._zoom:this._limitZoom(t),e=this._limitCenter(O(e),t,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==void 0&&(o.zoom=p({animate:o.animate},o.zoom),o.pan=p({animate:o.animate,duration:o.duration},o.pan));var r=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,o.zoom):this._tryAnimatedPan(e,o.pan);if(r)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t,o.pan&&o.pan.noMoveStart),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,o){var r=this.getZoomScale(t),c=this.getSize().divideBy(2),f=e instanceof X?e:this.latLngToContainerPoint(e),C=f.subtract(c).multiplyBy(1-1/r),I=this.containerPointToLatLng(c.add(C));return this.setView(I,t,{zoom:o})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():V(e);var o=ae(t.paddingTopLeft||t.padding||[0,0]),r=ae(t.paddingBottomRight||t.padding||[0,0]),c=this.getBoundsZoom(e,!1,o.add(r));if(c=typeof t.maxZoom=="number"?Math.min(t.maxZoom,c):c,c===1/0)return{center:e.getCenter(),zoom:c};var f=r.subtract(o).divideBy(2),C=this.project(e.getSouthWest(),c),I=this.project(e.getNorthEast(),c),E=this.unproject(C.add(I).divideBy(2).add(f),c);return{center:E,zoom:c}},fitBounds:function(e,t){if(e=V(e),!e.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(e,t);return this.setView(o.center,o.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(e=ae(e).round(),t=t||{},!e.x&&!e.y)return this.fire("moveend");if(t.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ar,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),t.animate!==!1){$e(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,o,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,o){if(o=o||{},o.animate===!1||!fe.any3d)return this.setView(e,t,o);this._stop();var r=this.project(this.getCenter()),c=this.project(e),f=this.getSize(),C=this._zoom;e=O(e),t=t===void 0?C:t;var I=Math.max(f.x,f.y),E=I*this.getZoomScale(C,t),ne=c.distanceTo(r)||1,_e=1.42,Oe=_e*_e;function nt(Kt){var So=Kt?-1:1,qc=Kt?E:I,Kc=E*E-I*I+So*Oe*Oe*ne*ne,Xc=2*qc*Oe*ne,Ts=Kc/Xc,ra=Math.sqrt(Ts*Ts+1)-Ts,Yc=ra<1e-9?-18:Math.log(ra);return Yc}function un(Kt){return(Math.exp(Kt)-Math.exp(-Kt))/2}function nn(Kt){return(Math.exp(Kt)+Math.exp(-Kt))/2}function _n(Kt){return un(Kt)/nn(Kt)}var hn=nt(0);function Si(Kt){return I*(nn(hn)/nn(hn+_e*Kt))}function Gc(Kt){return I*(nn(hn)*_n(hn+_e*Kt)-un(hn))/Oe}function Jc(Kt){return 1-Math.pow(1-Kt,1.5)}var Vc=Date.now(),oa=(nt(1)-hn)/_e,Uc=o.duration?1e3*o.duration:1e3*oa*.8;function sa(){var Kt=(Date.now()-Vc)/Uc,So=Jc(Kt)*oa;Kt<=1?(this._flyToFrame=q(sa,this),this._move(this.unproject(r.add(c.subtract(r).multiplyBy(Gc(So)/ne)),C),this.getScaleZoom(I/Si(So),C),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,o.noMoveStart),sa.call(this),this},flyToBounds:function(e,t){var o=this._getBoundsCenterZoom(e,t);return this.flyTo(o.center,o.zoom,t)},setMaxBounds:function(e){return e=V(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var o=this.getCenter(),r=this._limitCenter(o,this._zoom,V(e));return o.equals(r)||this.panTo(r,t),this._enforcingBounds=!1,this},panInside:function(e,t){t=t||{};var o=ae(t.paddingTopLeft||t.padding||[0,0]),r=ae(t.paddingBottomRight||t.padding||[0,0]),c=this.project(this.getCenter()),f=this.project(e),C=this.getPixelBounds(),I=Z([C.min.add(o),C.max.subtract(r)]),E=I.getSize();if(!I.contains(f)){this._enforcingBounds=!0;var ne=f.subtract(I.getCenter()),_e=I.extend(f).getSize().subtract(E);c.x+=ne.x<0?-_e.x:_e.x,c.y+=ne.y<0?-_e.y:_e.y,this.panTo(this.unproject(c),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=p({animate:!1,pan:!0},e===!0?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),r=t.divideBy(2).round(),c=o.divideBy(2).round(),f=r.subtract(c);return!f.x&&!f.y?this:(e.animate&&e.pan?this.panBy(f):(e.pan&&this._rawPanBy(f),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:o}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=p({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=u(this._handleGeolocationResponse,this),o=u(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,o,e):navigator.geolocation.getCurrentPosition(t,o,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,o=e.message||(t===1?"permission denied":t===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+o+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=e.coords.latitude,o=e.coords.longitude,r=new M(t,o),c=r.toBounds(e.coords.accuracy*2),f=this._locateOptions;if(f.setView){var C=this.getBoundsZoom(c);this.setView(r,f.maxZoom?Math.min(C,f.maxZoom):C)}var I={latlng:r,bounds:c,timestamp:e.timestamp};for(var E in e.coords)typeof e.coords[E]=="number"&&(I[E]=e.coords[E]);this.fire("locationfound",I)}},addHandler:function(e,t){if(!t)return this;var o=this[e]=new t(this);return this._handlers.push(o),this.options[e]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),It(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var e;for(e in this._layers)this._layers[e].remove();for(e in this._panes)It(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var o="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),r=qe("div",o,t||this._mapPane);return e&&(this._panes[e]=r),r},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),o=this.unproject(e.getTopRight());return new N(t,o)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,o){e=V(e),o=ae(o||[0,0]);var r=this.getZoom()||0,c=this.getMinZoom(),f=this.getMaxZoom(),C=e.getNorthWest(),I=e.getSouthEast(),E=this.getSize().subtract(o),ne=Z(this.project(I,r),this.project(C,r)).getSize(),_e=fe.any3d?this.options.zoomSnap:1,Oe=E.x/ne.x,nt=E.y/ne.y,un=t?Math.max(Oe,nt):Math.min(Oe,nt);return r=this.getScaleZoom(un,r),_e&&(r=Math.round(r/(_e/100))*(_e/100),r=t?Math.ceil(r/_e)*_e:Math.floor(r/_e)*_e),Math.max(c,Math.min(f,r))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new X(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var o=this._getTopLeftPoint(e,t);return new pe(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return typeof e=="string"?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var o=this.options.crs;return t=t===void 0?this._zoom:t,o.scale(e)/o.scale(t)},getScaleZoom:function(e,t){var o=this.options.crs;t=t===void 0?this._zoom:t;var r=o.zoom(e*o.scale(t));return isNaN(r)?1/0:r},project:function(e,t){return t=t===void 0?this._zoom:t,this.options.crs.latLngToPoint(O(e),t)},unproject:function(e,t){return t=t===void 0?this._zoom:t,this.options.crs.pointToLatLng(ae(e),t)},layerPointToLatLng:function(e){var t=ae(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(O(e))._round();return t._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(O(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(V(e))},distance:function(e,t){return this.options.crs.distance(O(e),O(t))},containerPointToLayerPoint:function(e){return ae(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return ae(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(ae(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(O(e)))},mouseEventToContainerPoint:function(e){return wr(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=wn(e);if(t){if(t._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ie(t,"scroll",this._onScroll,this),this._containerId=g(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&fe.any3d,$e(e,"leaflet-container"+(fe.touch?" leaflet-touch":"")+(fe.retina?" leaflet-retina":"")+(fe.ielt9?" leaflet-oldie":"")+(fe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=Gn(e,"position");t!=="absolute"&&t!=="relative"&&t!=="fixed"&&t!=="sticky"&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ot(this._mapPane,new X(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||($e(e.markerPane,"leaflet-zoom-hide"),$e(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,o){Ot(this._mapPane,new X(0,0));var r=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var c=this._zoom!==t;this._moveStart(c,o)._move(e,t)._moveEnd(c),this.fire("viewreset"),r&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,o,r){t===void 0&&(t=this._zoom);var c=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),r?o&&o.pinch&&this.fire("zoom",o):((c||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Ot(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[g(this._container)]=this;var t=e?ft:Ie;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),fe.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=q(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var o=[],r,c=t==="mouseout"||t==="mouseover",f=e.target||e.srcElement,C=!1;f;){if(r=this._targets[g(f)],r&&(t==="click"||t==="preclick")&&this._draggableMoved(r)){C=!0;break}if(r&&r.listens(t,!0)&&(c&&!ms(f,e)||(o.push(r),c))||f===this._container)break;f=f.parentNode}return!o.length&&!C&&!c&&this.listens(t,!0)&&(o=[this]),o},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||e.type==="click"&&this._isClickDisabled(t))){var o=e.type;o==="mousedown"&&Re(t),this._fireDOMEvent(e,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,o){if(e.type==="click"){var r=p({},e);r.type="preclick",this._fireDOMEvent(r,r.type,o)}var c=this._findEventTargets(e,t);if(o){for(var f=[],C=0;C<o.length;C++)o[C].listens(t,!0)&&f.push(o[C]);c=f.concat(c)}if(c.length){t==="contextmenu"&&an(e);var I=c[0],E={originalEvent:e};if(e.type!=="keypress"&&e.type!=="keydown"&&e.type!=="keyup"){var ne=I.getLatLng&&(!I._radius||I._radius<=10);E.containerPoint=ne?this.latLngToContainerPoint(I.getLatLng()):this.mouseEventToContainerPoint(e),E.layerPoint=this.containerPointToLayerPoint(E.containerPoint),E.latlng=ne?I.getLatLng():this.layerPointToLatLng(E.layerPoint)}for(C=0;C<c.length;C++)if(c[C].fire(t,E,!0),E.originalEvent._stopped||c[C].options.bubblingMouseEvents===!1&&z(this._mouseEvents,t)!==-1)return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return gn(this._mapPane)||new X(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){var o=e&&t!==void 0?this._getNewPixelOrigin(e,t):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var o=this.getSize()._divideBy(2);return this.project(e,t)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,o){var r=this._getNewPixelOrigin(o,t);return this.project(e,t)._subtract(r)},_latLngBoundsToNewLayerBounds:function(e,t,o){var r=this._getNewPixelOrigin(o,t);return Z([this.project(e.getSouthWest(),t)._subtract(r),this.project(e.getNorthWest(),t)._subtract(r),this.project(e.getSouthEast(),t)._subtract(r),this.project(e.getNorthEast(),t)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,o){if(!o)return e;var r=this.project(e,t),c=this.getSize().divideBy(2),f=new pe(r.subtract(c),r.add(c)),C=this._getBoundsOffset(f,o,t);return Math.abs(C.x)<=1&&Math.abs(C.y)<=1?e:this.unproject(r.add(C),t)},_limitOffset:function(e,t){if(!t)return e;var o=this.getPixelBounds(),r=new pe(o.min.add(e),o.max.add(e));return e.add(this._getBoundsOffset(r,t))},_getBoundsOffset:function(e,t,o){var r=Z(this.project(t.getNorthEast(),o),this.project(t.getSouthWest(),o)),c=r.min.subtract(e.min),f=r.max.subtract(e.max),C=this._rebound(c.x,-f.x),I=this._rebound(c.y,-f.y);return new X(C,I)},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),o=this.getMaxZoom(),r=fe.any3d?this.options.zoomSnap:1;return r&&(e=Math.round(e/r)*r),Math.max(t,Math.min(o,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Nt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var o=this._getCenterOffset(e)._trunc();return(t&&t.animate)!==!0&&!this.getSize().contains(o)?!1:(this.panBy(o,t),!0)},_createAnimProxy:function(){var e=this._proxy=qe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(t){var o=rn,r=this._proxy.style[o];In(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),r===this._proxy.style[o]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){It(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();In(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(t),c=this._getCenterOffset(e)._divideBy(1-1/r);return o.animate!==!0&&!this.getSize().contains(c)?!1:(q(function(){this._moveStart(!0,o.noMoveStart||!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,o,r){this._mapPane&&(o&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,$e(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:r}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Nt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function lc(e,t){return new at(e,t)}var Tn=re.extend({options:{position:"topright"},initialize:function(e){k(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),o=this.getPosition(),r=e._controlCorners[o];return $e(t,"leaflet-control"),o.indexOf("bottom")!==-1?r.insertBefore(t,r.firstChild):r.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(It(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),Bi=function(e){return new Tn(e)};at.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",o=this._controlContainer=qe("div",t+"control-container",this._container);function r(c,f){var C=t+c+" "+t+f;e[c+f]=qe("div",C,o)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)It(this._controlCorners[e]);It(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var kr=Tn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,o,r){return o<r?-1:r<o?1:0}},initialize:function(e,t,o){k(this,o),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var r in e)this._addLayer(e[r],r);for(r in t)this._addLayer(t[r],r,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return Tn.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(g(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){$e(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?($e(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):Nt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Nt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=qe("div",e),o=this.options.collapsed;t.setAttribute("aria-haspopup",!0),ji(t),hs(t);var r=this._section=qe("section",e+"-list");o&&(this._map.on("click",this.collapse,this),Ie(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var c=this._layersLink=qe("a",e+"-toggle",t);c.href="#",c.title="Layers",c.setAttribute("role","button"),Ie(c,{keydown:function(f){f.keyCode===13&&this._expandSafely()},click:function(f){an(f),this._expandSafely()}},this),o||this.expand(),this._baseLayersList=qe("div",e+"-base",r),this._separator=qe("div",e+"-separator",r),this._overlaysList=qe("div",e+"-overlays",r),t.appendChild(r)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&g(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,o){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:o}),this.options.sortLayers&&this._layers.sort(u(function(r,c){return this.options.sortFunction(r.layer,c.layer,r.name,c.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;mi(this._baseLayersList),mi(this._overlaysList),this._layerControlInputs=[];var e,t,o,r,c=0;for(o=0;o<this._layers.length;o++)r=this._layers[o],this._addItem(r),t=t||r.overlay,e=e||!r.overlay,c+=r.overlay?0:1;return this.options.hideSingleBase&&(e=e&&c>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(g(e.target)),o=t.overlay?e.type==="add"?"overlayadd":"overlayremove":e.type==="add"?"baselayerchange":null;o&&this._map.fire(o,t)},_createRadioElement:function(e,t){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=o,r.firstChild},_addItem:function(e){var t=document.createElement("label"),o=this._map.hasLayer(e.layer),r;e.overlay?(r=document.createElement("input"),r.type="checkbox",r.className="leaflet-control-layers-selector",r.defaultChecked=o):r=this._createRadioElement("leaflet-base-layers_"+g(this),o),this._layerControlInputs.push(r),r.layerId=g(e.layer),Ie(r,"click",this._onInputClick,this);var c=document.createElement("span");c.innerHTML=" "+e.name;var f=document.createElement("span");t.appendChild(f),f.appendChild(r),f.appendChild(c);var C=e.overlay?this._overlaysList:this._baseLayersList;return C.appendChild(t),this._checkDisabledLayers(),t},_onInputClick:function(){if(!this._preventClick){var e=this._layerControlInputs,t,o,r=[],c=[];this._handlingClick=!0;for(var f=e.length-1;f>=0;f--)t=e[f],o=this._getLayer(t.layerId).layer,t.checked?r.push(o):t.checked||c.push(o);for(f=0;f<c.length;f++)this._map.hasLayer(c[f])&&this._map.removeLayer(c[f]);for(f=0;f<r.length;f++)this._map.hasLayer(r[f])||this._map.addLayer(r[f]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,t,o,r=this._map.getZoom(),c=e.length-1;c>=0;c--)t=e[c],o=this._getLayer(t.layerId).layer,t.disabled=o.options.minZoom!==void 0&&r<o.options.minZoom||o.options.maxZoom!==void 0&&r>o.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,Ie(e,"click",an),this.expand();var t=this;setTimeout(function(){ft(e,"click",an),t._preventClick=!1})}}),cc=function(e,t,o){return new kr(e,t,o)},fs=Tn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",o=qe("div",t+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,t+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,t+"-out",o,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,o,r,c){var f=qe("a",o,r);return f.innerHTML=e,f.href="#",f.title=t,f.setAttribute("role","button"),f.setAttribute("aria-label",t),ji(f),Ie(f,"click",oi),Ie(f,"click",c,this),Ie(f,"click",this._refocusOnMap,this),f},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";Nt(this._zoomInButton,t),Nt(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&($e(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&($e(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});at.mergeOptions({zoomControl:!0}),at.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new fs,this.addControl(this.zoomControl))});var uc=function(e){return new fs(e)},Pr=Tn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",o=qe("div",t),r=this.options;return this._addScales(r,t+"-line",o),e.on(r.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),o},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,o){e.metric&&(this._mScale=qe("div",t,o)),e.imperial&&(this._iScale=qe("div",t,o))},_update:function(){var e=this._map,t=e.getSize().y/2,o=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(o)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),o=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,o,t/e)},_updateImperial:function(e){var t=e*3.2808399,o,r,c;t>5280?(o=t/5280,r=this._getRoundNum(o),this._updateScale(this._iScale,r+" mi",r/o)):(c=this._getRoundNum(t),this._updateScale(this._iScale,c+" ft",c/t))},_updateScale:function(e,t,o){e.style.width=Math.round(this.options.maxWidth*o)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),o=e/t;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,t*o}}),dc=function(e){return new Pr(e)},pc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',gs=Tn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(fe.inlineSvg?pc+" ":"")+"Leaflet</a>"},initialize:function(e){k(this,e),this._attributions={}},onAdd:function(e){e.attributionControl=this,this._container=qe("div","leaflet-control-attribution"),ji(this._container);for(var t in e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var o=[];this.options.prefix&&o.push(this.options.prefix),e.length&&o.push(e.join(", ")),this._container.innerHTML=o.join(' <span aria-hidden="true">|</span> ')}}});at.mergeOptions({attributionControl:!0}),at.addInitHook(function(){this.options.attributionControl&&new gs().addTo(this)});var hc=function(e){return new gs(e)};Tn.Layers=kr,Tn.Zoom=fs,Tn.Scale=Pr,Tn.Attribution=gs,Bi.layers=cc,Bi.zoom=uc,Bi.scale=dc,Bi.attribution=hc;var Dn=re.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Dn.addTo=function(e,t){return e.addHandler(t,this),this};var mc={Events:ye},Ir=fe.touch?"touchstart mousedown":"mousedown",Un=Me.extend({options:{clickTolerance:3},initialize:function(e,t,o,r){k(this,r),this._element=e,this._dragStartTarget=t||e,this._preventOutline=o},enable:function(){this._enabled||(Ie(this._dragStartTarget,Ir,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Un._dragging===this&&this.finishDrag(!0),ft(this._dragStartTarget,Ir,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!Ri(this._element,"leaflet-zoom-anim"))){if(e.touches&&e.touches.length!==1){Un._dragging===this&&this.finishDrag();return}if(!(Un._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(Un._dragging=this,this._preventOutline&&Re(this._element),R(),ni(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,o=pt(this._element);this._startPoint=new X(t.clientX,t.clientY),this._startPos=gn(this._element),this._parentScale=zt(o);var r=e.type==="mousedown";Ie(document,r?"mousemove":"touchmove",this._onMove,this),Ie(document,r?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(e){if(this._enabled){if(e.touches&&e.touches.length>1){this._moved=!0;return}var t=e.touches&&e.touches.length===1?e.touches[0]:e,o=new X(t.clientX,t.clientY)._subtract(this._startPoint);!o.x&&!o.y||Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(o.x/=this._parentScale.x,o.y/=this._parentScale.y,an(e),this._moved||(this.fire("dragstart"),this._moved=!0,$e(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),$e(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,this._lastEvent=e,this._updatePosition())}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),Ot(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){Nt(document.body,"leaflet-dragging"),this._lastTarget&&(Nt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ft(document,"mousemove touchmove",this._onMove,this),ft(document,"mouseup touchend touchcancel",this._onUp,this),ge(),Mn();var t=this._moved&&this._moving;this._moving=!1,Un._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function Mr(e,t,o){var r,c=[1,4,2,8],f,C,I,E,ne,_e,Oe,nt;for(f=0,_e=e.length;f<_e;f++)e[f]._code=si(e[f],t);for(I=0;I<4;I++){for(Oe=c[I],r=[],f=0,_e=e.length,C=_e-1;f<_e;C=f++)E=e[f],ne=e[C],E._code&Oe?ne._code&Oe||(nt=uo(ne,E,Oe,t,o),nt._code=si(nt,t),r.push(nt)):(ne._code&Oe&&(nt=uo(ne,E,Oe,t,o),nt._code=si(nt,t),r.push(nt)),r.push(E));e=r}return e}function Dr(e,t){var o,r,c,f,C,I,E,ne,_e;if(!e||e.length===0)throw new Error("latlngs not passed");bn(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var Oe=O([0,0]),nt=V(e),un=nt.getNorthWest().distanceTo(nt.getSouthWest())*nt.getNorthEast().distanceTo(nt.getNorthWest());un<1700&&(Oe=ys(e));var nn=e.length,_n=[];for(o=0;o<nn;o++){var hn=O(e[o]);_n.push(t.project(O([hn.lat-Oe.lat,hn.lng-Oe.lng])))}for(I=E=ne=0,o=0,r=nn-1;o<nn;r=o++)c=_n[o],f=_n[r],C=c.y*f.x-f.y*c.x,E+=(c.x+f.x)*C,ne+=(c.y+f.y)*C,I+=C*3;I===0?_e=_n[0]:_e=[E/I,ne/I];var Si=t.unproject(ae(_e));return O([Si.lat+Oe.lat,Si.lng+Oe.lng])}function ys(e){for(var t=0,o=0,r=0,c=0;c<e.length;c++){var f=O(e[c]);t+=f.lat,o+=f.lng,r++}return O([t/r,o/r])}var fc={__proto__:null,clipPolygon:Mr,polygonCenter:Dr,centroid:ys};function Lr(e,t){if(!t||!e.length)return e.slice();var o=t*t;return e=vc(e,o),e=yc(e,o),e}function Er(e,t,o){return Math.sqrt(Fi(e,t,o,!0))}function gc(e,t,o){return Fi(e,t,o)}function yc(e,t){var o=e.length,r=typeof Uint8Array<"u"?Uint8Array:Array,c=new r(o);c[0]=c[o-1]=1,vs(e,c,t,0,o-1);var f,C=[];for(f=0;f<o;f++)c[f]&&C.push(e[f]);return C}function vs(e,t,o,r,c){var f=0,C,I,E;for(I=r+1;I<=c-1;I++)E=Fi(e[I],e[r],e[c],!0),E>f&&(C=I,f=E);f>o&&(t[C]=1,vs(e,t,o,r,C),vs(e,t,o,C,c))}function vc(e,t){for(var o=[e[0]],r=1,c=0,f=e.length;r<f;r++)xc(e[r],e[c])>t&&(o.push(e[r]),c=r);return c<f-1&&o.push(e[f-1]),o}var Rr;function Nr(e,t,o,r,c){var f=r?Rr:si(e,o),C=si(t,o),I,E,ne;for(Rr=C;;){if(!(f|C))return[e,t];if(f&C)return!1;I=f||C,E=uo(e,t,I,o,c),ne=si(E,o),I===f?(e=E,f=ne):(t=E,C=ne)}}function uo(e,t,o,r,c){var f=t.x-e.x,C=t.y-e.y,I=r.min,E=r.max,ne,_e;return o&8?(ne=e.x+f*(E.y-e.y)/C,_e=E.y):o&4?(ne=e.x+f*(I.y-e.y)/C,_e=I.y):o&2?(ne=E.x,_e=e.y+C*(E.x-e.x)/f):o&1&&(ne=I.x,_e=e.y+C*(I.x-e.x)/f),new X(ne,_e,c)}function si(e,t){var o=0;return e.x<t.min.x?o|=1:e.x>t.max.x&&(o|=2),e.y<t.min.y?o|=4:e.y>t.max.y&&(o|=8),o}function xc(e,t){var o=t.x-e.x,r=t.y-e.y;return o*o+r*r}function Fi(e,t,o,r){var c=t.x,f=t.y,C=o.x-c,I=o.y-f,E=C*C+I*I,ne;return E>0&&(ne=((e.x-c)*C+(e.y-f)*I)/E,ne>1?(c=o.x,f=o.y):ne>0&&(c+=C*ne,f+=I*ne)),C=e.x-c,I=e.y-f,r?C*C+I*I:new X(c,f)}function bn(e){return!D(e[0])||typeof e[0][0]!="object"&&typeof e[0][0]<"u"}function Or(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),bn(e)}function zr(e,t){var o,r,c,f,C,I,E,ne;if(!e||e.length===0)throw new Error("latlngs not passed");bn(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var _e=O([0,0]),Oe=V(e),nt=Oe.getNorthWest().distanceTo(Oe.getSouthWest())*Oe.getNorthEast().distanceTo(Oe.getNorthWest());nt<1700&&(_e=ys(e));var un=e.length,nn=[];for(o=0;o<un;o++){var _n=O(e[o]);nn.push(t.project(O([_n.lat-_e.lat,_n.lng-_e.lng])))}for(o=0,r=0;o<un-1;o++)r+=nn[o].distanceTo(nn[o+1])/2;if(r===0)ne=nn[0];else for(o=0,f=0;o<un-1;o++)if(C=nn[o],I=nn[o+1],c=C.distanceTo(I),f+=c,f>r){E=(f-r)/c,ne=[I.x-E*(I.x-C.x),I.y-E*(I.y-C.y)];break}var hn=t.unproject(ae(ne));return O([hn.lat+_e.lat,hn.lng+_e.lng])}var bc={__proto__:null,simplify:Lr,pointToSegmentDistance:Er,closestPointOnSegment:gc,clipSegment:Nr,_getEdgeIntersection:uo,_getBitCode:si,_sqClosestPointOnSegment:Fi,isFlat:bn,_flat:Or,polylineCenter:zr},xs={project:function(e){return new X(e.lng,e.lat)},unproject:function(e){return new M(e.y,e.x)},bounds:new pe([-180,-90],[180,90])},bs={R:6378137,R_MINOR:6356752314245179e-9,bounds:new pe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(e){var t=Math.PI/180,o=this.R,r=e.lat*t,c=this.R_MINOR/o,f=Math.sqrt(1-c*c),C=f*Math.sin(r),I=Math.tan(Math.PI/4-r/2)/Math.pow((1-C)/(1+C),f/2);return r=-o*Math.log(Math.max(I,1e-10)),new X(e.lng*t*o,r)},unproject:function(e){for(var t=180/Math.PI,o=this.R,r=this.R_MINOR/o,c=Math.sqrt(1-r*r),f=Math.exp(-e.y/o),C=Math.PI/2-2*Math.atan(f),I=0,E=.1,ne;I<15&&Math.abs(E)>1e-7;I++)ne=c*Math.sin(C),ne=Math.pow((1-ne)/(1+ne),c/2),E=Math.PI/2-2*Math.atan(f*ne)-C,C+=E;return new M(C*t,e.x*t/o)}},_c={__proto__:null,LonLat:xs,Mercator:bs,SphericalMercator:We},Sc=p({},le,{code:"EPSG:3395",projection:bs,transformation:function(){var e=.5/(Math.PI*bs.R);return Ne(e,.5,-e,.5)}()}),jr=p({},le,{code:"EPSG:4326",projection:xs,transformation:Ne(1/180,1,-1/180,.5)}),Cc=p({},se,{projection:xs,transformation:Ne(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var o=t.lng-e.lng,r=t.lat-e.lat;return Math.sqrt(o*o+r*r)},infinite:!0});se.Earth=le,se.EPSG3395=Sc,se.EPSG3857=Be,se.EPSG900913=je,se.EPSG4326=jr,se.Simple=Cc;var An=Me.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[g(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[g(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var o=this.getEvents();t.on(o,this),this.once("remove",function(){t.off(o,this)},this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});at.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=g(e);return this._layers[t]?this:(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var t=g(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return g(e)in this._layers},eachLayer:function(e,t){for(var o in this._layers)e.call(t,this._layers[o]);return this},_addLayers:function(e){e=e?D(e)?e:[e]:[];for(var t=0,o=e.length;t<o;t++)this.addLayer(e[t])},_addZoomLimit:function(e){(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[g(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=g(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,o=this._getZoomSpan();for(var r in this._zoomBoundLayers){var c=this._zoomBoundLayers[r].options;e=c.minZoom===void 0?e:Math.min(e,c.minZoom),t=c.maxZoom===void 0?t:Math.max(t,c.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,o!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var yi=An.extend({initialize:function(e,t){k(this,t),this._layers={};var o,r;if(e)for(o=0,r=e.length;o<r;o++)this.addLayer(e[o])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){var t=typeof e=="number"?e:this.getLayerId(e);return t in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t=Array.prototype.slice.call(arguments,1),o,r;for(o in this._layers)r=this._layers[o],r[e]&&r[e].apply(r,t);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var o in this._layers)e.call(t,this._layers[o]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return g(e)}}),wc=function(e,t){return new yi(e,t)},jn=yi.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),yi.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),yi.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new N;for(var t in this._layers){var o=this._layers[t];e.extend(o.getBounds?o.getBounds():o.getLatLng())}return e}}),Tc=function(e,t){return new jn(e,t)},vi=re.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){k(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var o=this._getIconUrl(e);if(!o){if(e==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(o,t&&t.tagName==="IMG"?t:null);return this._setIconStyles(r,e),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),r},_setIconStyles:function(e,t){var o=this.options,r=o[t+"Size"];typeof r=="number"&&(r=[r,r]);var c=ae(r),f=ae(t==="shadow"&&o.shadowAnchor||o.iconAnchor||c&&c.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(o.className||""),f&&(e.style.marginLeft=-f.x+"px",e.style.marginTop=-f.y+"px"),c&&(e.style.width=c.x+"px",e.style.height=c.y+"px")},_createImg:function(e,t){return t=t||document.createElement("img"),t.src=e,t},_getIconUrl:function(e){return fe.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function Ac(e){return new vi(e)}var Wi=vi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return typeof Wi.imagePath!="string"&&(Wi.imagePath=this._detectIconPath()),(this.options.imagePath||Wi.imagePath)+vi.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(o,r,c){var f=r.exec(o);return f&&f[c]};return e=t(e,/^url\((['"])?(.+)\1\)$/,2),e&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=qe("div","leaflet-default-icon-path",document.body),t=Gn(e,"background-image")||Gn(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t),t)return t;var o=document.querySelector('link[href$="leaflet.css"]');return o?o.href.substring(0,o.href.length-11-1):""}}),Br=Dn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new Un(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),$e(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Nt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,o=t._map,r=this._marker.options.autoPanSpeed,c=this._marker.options.autoPanPadding,f=gn(t._icon),C=o.getPixelBounds(),I=o.getPixelOrigin(),E=Z(C.min._subtract(I).add(c),C.max._subtract(I).subtract(c));if(!E.contains(f)){var ne=ae((Math.max(E.max.x,f.x)-E.max.x)/(C.max.x-E.max.x)-(Math.min(E.min.x,f.x)-E.min.x)/(C.min.x-E.min.x),(Math.max(E.max.y,f.y)-E.max.y)/(C.max.y-E.max.y)-(Math.min(E.min.y,f.y)-E.min.y)/(C.min.y-E.min.y)).multiplyBy(r);o.panBy(ne,{animate:!1}),this._draggable._newPos._add(ne),this._draggable._startPos._add(ne),Ot(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=q(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=q(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,o=t._shadow,r=gn(t._icon),c=t._map.layerPointToLatLng(r);o&&Ot(o,r),t._latlng=c,e.latlng=c,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),po=An.extend({options:{icon:new Wi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){k(this,t),this._latlng=O(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=O(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=e.icon.createIcon(this._icon),r=!1;o!==this._icon&&(this._icon&&this._removeIcon(),r=!0,e.title&&(o.title=e.title),o.tagName==="IMG"&&(o.alt=e.alt||"")),$e(o,t),e.keyboard&&(o.tabIndex="0",o.setAttribute("role","button")),this._icon=o,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ie(o,"focus",this._panOnFocus,this);var c=e.icon.createShadow(this._shadow),f=!1;c!==this._shadow&&(this._removeShadow(),f=!0),c&&($e(c,t),c.alt=""),this._shadow=c,e.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),c&&f&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ft(this._icon,"focus",this._panOnFocus,this),It(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&It(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&Ot(this._icon,e),this._shadow&&Ot(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&($e(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Br)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Br(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&dn(this._icon,e),this._shadow&&dn(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,o=t.iconSize?ae(t.iconSize):ae(0,0),r=t.iconAnchor?ae(t.iconAnchor):ae(0,0);e.panInside(this._latlng,{paddingTopLeft:r,paddingBottomRight:o.subtract(r)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function kc(e,t){return new po(e,t)}var qn=An.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return k(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ho=qn.extend({options:{fill:!0,radius:10},initialize:function(e,t){k(this,t),this._latlng=O(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=O(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return qn.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,o=this._clickTolerance(),r=[e+o,t+o];this._pxBounds=new pe(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Pc(e,t){return new ho(e,t)}var _s=ho.extend({initialize:function(e,t,o){if(typeof t=="number"&&(t=p({},o,{radius:t})),k(this,t),this._latlng=O(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new N(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:qn.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,o=this._map,r=o.options.crs;if(r.distance===le.distance){var c=Math.PI/180,f=this._mRadius/le.R/c,C=o.project([t+f,e]),I=o.project([t-f,e]),E=C.add(I).divideBy(2),ne=o.unproject(E).lat,_e=Math.acos((Math.cos(f*c)-Math.sin(t*c)*Math.sin(ne*c))/(Math.cos(t*c)*Math.cos(ne*c)))/c;(isNaN(_e)||_e===0)&&(_e=f/Math.cos(Math.PI/180*t)),this._point=E.subtract(o.getPixelOrigin()),this._radius=isNaN(_e)?0:E.x-o.project([ne,e-_e]).x,this._radiusY=E.y-C.y}else{var Oe=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=o.latLngToLayerPoint(this._latlng),this._radius=this._point.x-o.latLngToLayerPoint(Oe).x}this._updateBounds()}});function Ic(e,t,o){return new _s(e,t,o)}var Bn=qn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){k(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t=1/0,o=null,r=Fi,c,f,C=0,I=this._parts.length;C<I;C++)for(var E=this._parts[C],ne=1,_e=E.length;ne<_e;ne++){c=E[ne-1],f=E[ne];var Oe=r(e,c,f,!0);Oe<t&&(t=Oe,o=r(e,c,f))}return o&&(o.distance=Math.sqrt(t)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return zr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=O(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new N,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return bn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],o=bn(e),r=0,c=e.length;r<c;r++)o?(t[r]=O(e[r]),this._bounds.extend(t[r])):t[r]=this._convertLatLngs(e[r]);return t},_project:function(){var e=new pe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new X(e,e);this._rawPxBounds&&(this._pxBounds=new pe([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,o){var r=e[0]instanceof M,c=e.length,f,C;if(r){for(C=[],f=0;f<c;f++)C[f]=this._map.latLngToLayerPoint(e[f]),o.extend(C[f]);t.push(C)}else for(f=0;f<c;f++)this._projectLatlngs(e[f],t,o)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}var t=this._parts,o,r,c,f,C,I,E;for(o=0,c=0,f=this._rings.length;o<f;o++)for(E=this._rings[o],r=0,C=E.length;r<C-1;r++)I=Nr(E[r],E[r+1],e,r,!0),I&&(t[c]=t[c]||[],t[c].push(I[0]),(I[1]!==E[r+1]||r===C-2)&&(t[c].push(I[1]),c++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,o=0,r=e.length;o<r;o++)e[o]=Lr(e[o],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var o,r,c,f,C,I,E=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(o=0,f=this._parts.length;o<f;o++)for(I=this._parts[o],r=0,C=I.length,c=C-1;r<C;c=r++)if(!(!t&&r===0)&&Er(e,I[c],I[r])<=E)return!0;return!1}});function Mc(e,t){return new Bn(e,t)}Bn._flat=Or;var xi=Bn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Dr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=Bn.prototype._convertLatLngs.call(this,e),o=t.length;return o>=2&&t[0]instanceof M&&t[0].equals(t[o-1])&&t.pop(),t},_setLatLngs:function(e){Bn.prototype._setLatLngs.call(this,e),bn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return bn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,o=new X(t,t);if(e=new pe(e.min.subtract(o),e.max.add(o)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}for(var r=0,c=this._rings.length,f;r<c;r++)f=Mr(this._rings[r],e,!0),f.length&&this._parts.push(f)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t=!1,o,r,c,f,C,I,E,ne;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(f=0,E=this._parts.length;f<E;f++)for(o=this._parts[f],C=0,ne=o.length,I=ne-1;C<ne;I=C++)r=o[C],c=o[I],r.y>e.y!=c.y>e.y&&e.x<(c.x-r.x)*(e.y-r.y)/(c.y-r.y)+r.x&&(t=!t);return t||Bn.prototype._containsPoint.call(this,e,!0)}});function Dc(e,t){return new xi(e,t)}var Fn=jn.extend({initialize:function(e,t){k(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t=D(e)?e:e.features,o,r,c;if(t){for(o=0,r=t.length;o<r;o++)c=t[o],(c.geometries||c.geometry||c.features||c.coordinates)&&this.addData(c);return this}var f=this.options;if(f.filter&&!f.filter(e))return this;var C=mo(e,f);return C?(C.feature=yo(e),C.defaultOptions=C.options,this.resetStyle(C),f.onEachFeature&&f.onEachFeature(e,C),this.addLayer(C)):this},resetStyle:function(e){return e===void 0?this.eachLayer(this.resetStyle,this):(e.options=p({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&(typeof t=="function"&&(t=t(e.feature)),e.setStyle(t))}});function mo(e,t){var o=e.type==="Feature"?e.geometry:e,r=o?o.coordinates:null,c=[],f=t&&t.pointToLayer,C=t&&t.coordsToLatLng||Ss,I,E,ne,_e;if(!r&&!o)return null;switch(o.type){case"Point":return I=C(r),Fr(f,e,I,t);case"MultiPoint":for(ne=0,_e=r.length;ne<_e;ne++)I=C(r[ne]),c.push(Fr(f,e,I,t));return new jn(c);case"LineString":case"MultiLineString":return E=fo(r,o.type==="LineString"?0:1,C),new Bn(E,t);case"Polygon":case"MultiPolygon":return E=fo(r,o.type==="Polygon"?1:2,C),new xi(E,t);case"GeometryCollection":for(ne=0,_e=o.geometries.length;ne<_e;ne++){var Oe=mo({geometry:o.geometries[ne],type:"Feature",properties:e.properties},t);Oe&&c.push(Oe)}return new jn(c);case"FeatureCollection":for(ne=0,_e=o.features.length;ne<_e;ne++){var nt=mo(o.features[ne],t);nt&&c.push(nt)}return new jn(c);default:throw new Error("Invalid GeoJSON object.")}}function Fr(e,t,o,r){return e?e(t,o):new po(o,r&&r.markersInheritOptions&&r)}function Ss(e){return new M(e[1],e[0],e[2])}function fo(e,t,o){for(var r=[],c=0,f=e.length,C;c<f;c++)C=t?fo(e[c],t-1,o):(o||Ss)(e[c]),r.push(C);return r}function Cs(e,t){return e=O(e),e.alt!==void 0?[y(e.lng,t),y(e.lat,t),y(e.alt,t)]:[y(e.lng,t),y(e.lat,t)]}function go(e,t,o,r){for(var c=[],f=0,C=e.length;f<C;f++)c.push(t?go(e[f],bn(e[f])?0:t-1,o,r):Cs(e[f],r));return!t&&o&&c.length>0&&c.push(c[0].slice()),c}function bi(e,t){return e.feature?p({},e.feature,{geometry:t}):yo(t)}function yo(e){return e.type==="Feature"||e.type==="FeatureCollection"?e:{type:"Feature",properties:{},geometry:e}}var ws={toGeoJSON:function(e){return bi(this,{type:"Point",coordinates:Cs(this.getLatLng(),e)})}};po.include(ws),_s.include(ws),ho.include(ws),Bn.include({toGeoJSON:function(e){var t=!bn(this._latlngs),o=go(this._latlngs,t?1:0,!1,e);return bi(this,{type:(t?"Multi":"")+"LineString",coordinates:o})}}),xi.include({toGeoJSON:function(e){var t=!bn(this._latlngs),o=t&&!bn(this._latlngs[0]),r=go(this._latlngs,o?2:t?1:0,!0,e);return t||(r=[r]),bi(this,{type:(o?"Multi":"")+"Polygon",coordinates:r})}}),yi.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(o){t.push(o.toGeoJSON(e).geometry.coordinates)}),bi(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(t==="MultiPoint")return this.toMultiPoint(e);var o=t==="GeometryCollection",r=[];return this.eachLayer(function(c){if(c.toGeoJSON){var f=c.toGeoJSON(e);if(o)r.push(f.geometry);else{var C=yo(f);C.type==="FeatureCollection"?r.push.apply(r,C.features):r.push(C)}}}),o?bi(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});function Wr(e,t){return new Fn(e,t)}var Lc=Wr,vo=An.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,o){this._url=e,this._bounds=V(t),k(this,o)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&($e(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){It(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&Jn(this._image),this},bringToBack:function(){return this._map&&Vn(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=V(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._url.tagName==="IMG",t=this._image=e?this._url:qe("img");if($e(t,"leaflet-image-layer"),this._zoomAnimated&&$e(t,"leaflet-zoom-animated"),this.options.className&&$e(t,this.options.className),t.onselectstart=x,t.onmousemove=x,t.onload=u(this.fire,this,"load"),t.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(t.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e){this._url=t.src;return}t.src=this._url,t.alt=this.options.alt},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),o=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;In(this._image,o,t)},_reset:function(){var e=this._image,t=new pe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=t.getSize();Ot(e,t.min),e.style.width=o.x+"px",e.style.height=o.y+"px"},_updateOpacity:function(){dn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Ec=function(e,t,o){return new vo(e,t,o)},Zr=vo.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e=this._url.tagName==="VIDEO",t=this._image=e?this._url:qe("video");if($e(t,"leaflet-image-layer"),this._zoomAnimated&&$e(t,"leaflet-zoom-animated"),this.options.className&&$e(t,this.options.className),t.onselectstart=x,t.onmousemove=x,t.onloadeddata=u(this.fire,this,"load"),e){for(var o=t.getElementsByTagName("source"),r=[],c=0;c<o.length;c++)r.push(o[c].src);this._url=o.length>0?r:[t.src];return}D(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var f=0;f<this._url.length;f++){var C=qe("source");C.src=this._url[f],t.appendChild(C)}}});function Rc(e,t,o){return new Zr(e,t,o)}var $r=vo.extend({_initImage:function(){var e=this._image=this._url;$e(e,"leaflet-image-layer"),this._zoomAnimated&&$e(e,"leaflet-zoom-animated"),this.options.className&&$e(e,this.options.className),e.onselectstart=x,e.onmousemove=x}});function Nc(e,t,o){return new $r(e,t,o)}var Ln=An.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof M||D(e))?(this._latlng=O(e),k(this,t)):(k(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return e=arguments.length?e:this._source._map,e.hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&dn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&dn(this._container,1),this.bringToFront(),this.options.interactive&&($e(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(dn(this._container,0),this._removeTimeout=setTimeout(u(It,void 0,this._container),200)):It(this._container),this.options.interactive&&(Nt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=O(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Jn(this._container),this},bringToBack:function(){return this._map&&Vn(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof jn){t=null;var o=this._source._layers;for(var r in o)if(o[r]._map){t=o[r];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else if(t.getBounds)e=t.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof t=="string")e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=ae(this.options.offset),o=this._getAnchor();this._zoomAnimated?Ot(this._container,e.add(o)):t=t.add(e).add(o);var r=this._containerBottom=-t.y,c=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=r+"px",this._container.style.left=c+"px"}},_getAnchor:function(){return[0,0]}});at.include({_initOverlay:function(e,t,o,r){var c=t;return c instanceof e||(c=new e(r).setContent(t)),o&&c.setLatLng(o),c}}),An.include({_initOverlay:function(e,t,o,r){var c=o;return c instanceof e?(k(c,r),c._source=this):(c=t&&!r?t:new e(r,this),c.setContent(o)),c}});var xo=Ln.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e=arguments.length?e:this._source._map,!e.hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,Ln.prototype.openOn.call(this,e)},onAdd:function(e){Ln.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof qn||this._source.on("preclick",ii))},onRemove:function(e){Ln.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof qn||this._source.off("preclick",ii))},getEvents:function(){var e=Ln.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=qe("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=qe("div",e+"-content-wrapper",t);if(this._contentNode=qe("div",e+"-content",o),ji(t),hs(this._contentNode),Ie(t,"contextmenu",ii),this._tipContainer=qe("div",e+"-tip-container",t),this._tip=qe("div",e+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=qe("a",e+"-close-button",t);r.setAttribute("role","button"),r.setAttribute("aria-label","Close popup"),r.href="#close",r.innerHTML='<span aria-hidden="true">&#215;</span>',Ie(r,"click",function(c){an(c),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var o=e.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),t.width=o+1+"px",t.whiteSpace="",t.height="";var r=e.offsetHeight,c=this.options.maxHeight,f="leaflet-popup-scrolled";c&&r>c?(t.height=c+"px",$e(e,f)):Nt(e,f),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),o=this._getAnchor();Ot(this._container,t.add(o))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var e=this._map,t=parseInt(Gn(this._container,"marginBottom"),10)||0,o=this._container.offsetHeight+t,r=this._containerWidth,c=new X(this._containerLeft,-o-this._containerBottom);c._add(gn(this._container));var f=e.layerPointToContainerPoint(c),C=ae(this.options.autoPanPadding),I=ae(this.options.autoPanPaddingTopLeft||C),E=ae(this.options.autoPanPaddingBottomRight||C),ne=e.getSize(),_e=0,Oe=0;f.x+r+E.x>ne.x&&(_e=f.x+r-ne.x+E.x),f.x-_e-I.x<0&&(_e=f.x-I.x),f.y+o+E.y>ne.y&&(Oe=f.y+o-ne.y+E.y),f.y-Oe-I.y<0&&(Oe=f.y-I.y),(_e||Oe)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([_e,Oe]))}},_getAnchor:function(){return ae(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Oc=function(e,t){return new xo(e,t)};at.mergeOptions({closePopupOnClick:!0}),at.include({openPopup:function(e,t,o){return this._initOverlay(xo,e,t,o).openOn(this),this},closePopup:function(e){return e=arguments.length?e:this._popup,e&&e.close(),this}}),An.include({bindPopup:function(e,t){return this._popup=this._initOverlay(xo,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof jn||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(!(!this._popup||!this._map)){oi(e);var t=e.layer||e.target;if(this._popup._source===t&&!(t instanceof qn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=t,this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){e.originalEvent.keyCode===13&&this._openPopup(e)}});var bo=Ln.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){Ln.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){Ln.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=Ln.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip",t=e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=qe("div",t),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+g(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,o,r=this._map,c=this._container,f=r.latLngToContainerPoint(r.getCenter()),C=r.layerPointToContainerPoint(e),I=this.options.direction,E=c.offsetWidth,ne=c.offsetHeight,_e=ae(this.options.offset),Oe=this._getAnchor();I==="top"?(t=E/2,o=ne):I==="bottom"?(t=E/2,o=0):I==="center"?(t=E/2,o=ne/2):I==="right"?(t=0,o=ne/2):I==="left"?(t=E,o=ne/2):C.x<f.x?(I="right",t=0,o=ne/2):(I="left",t=E+(_e.x+Oe.x)*2,o=ne/2),e=e.subtract(ae(t,o,!0)).add(_e).add(Oe),Nt(c,"leaflet-tooltip-right"),Nt(c,"leaflet-tooltip-left"),Nt(c,"leaflet-tooltip-top"),Nt(c,"leaflet-tooltip-bottom"),$e(c,"leaflet-tooltip-"+I),Ot(c,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&dn(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return ae(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),zc=function(e,t){return new bo(e,t)};at.include({openTooltip:function(e,t,o){return this._initOverlay(bo,e,t,o).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),An.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(bo,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(!(!e&&this._tooltipHandlersAdded)){var t=e?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,o.click=this._openTooltip,this._map?this._addFocusListeners():o.add=this._addFocusListeners),this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),this[t](o),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof jn||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t=typeof e.getElement=="function"&&e.getElement();t&&(Ie(t,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),Ie(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t=typeof e.getElement=="function"&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",function(){t._openOnceFlag=!1,t._openTooltip(e)});return}this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)}},_moveTooltip:function(e){var t=e.latlng,o,r;this._tooltip.options.sticky&&e.originalEvent&&(o=this._map.mouseEventToContainerPoint(e.originalEvent),r=this._map.containerPointToLayerPoint(o),t=this._map.layerPointToLatLng(r)),this._tooltip.setLatLng(t)}});var Hr=vi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&e.tagName==="DIV"?e:document.createElement("div"),o=this.options;if(o.html instanceof Element?(mi(t),t.appendChild(o.html)):t.innerHTML=o.html!==!1?o.html:"",o.bgPos){var r=ae(o.bgPos);t.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function jc(e){return new Hr(e)}vi.Default=Wi;var Zi=An.extend({options:{tileSize:256,opacity:1,updateWhenIdle:fe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){k(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),It(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Jn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Vn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=b(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof X?e:new X(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t=this.getPane().children,o=-e(-1/0,1/0),r=0,c=t.length,f;r<c;r++)f=t[r].style.zIndex,t[r]!==this._container&&f&&(o=e(o,+f));isFinite(o)&&(this.options.zIndex=o+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!fe.ielt9){dn(this._container,this.options.opacity);var e=+new Date,t=!1,o=!1;for(var r in this._tiles){var c=this._tiles[r];if(!(!c.current||!c.loaded)){var f=Math.min(1,(e-c.loaded)/200);dn(c.el,f),f<1?t=!0:(c.active?o=!0:this._onOpaqueTile(c),c.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),t&&(B(this._fadeFrame),this._fadeFrame=q(this._updateOpacity,this))}},_onOpaqueTile:x,_initContainer:function(){this._container||(this._container=qe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(e!==void 0){for(var o in this._levels)o=Number(o),this._levels[o].el.children.length||o===e?(this._levels[o].el.style.zIndex=t-Math.abs(e-o),this._onUpdateLevel(o)):(It(this._levels[o].el),this._removeTilesAtZoom(o),this._onRemoveLevel(o),delete this._levels[o]);var r=this._levels[e],c=this._map;return r||(r=this._levels[e]={},r.el=qe("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=t,r.origin=c.project(c.unproject(c.getPixelOrigin()),e).round(),r.zoom=e,this._setZoomTransform(r,c.getCenter(),c.getZoom()),x(r.el.offsetWidth),this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:x,_onRemoveLevel:x,_onCreateLevel:x,_pruneTiles:function(){if(this._map){var e,t,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom){this._removeAllTiles();return}for(e in this._tiles)t=this._tiles[e],t.retain=t.current;for(e in this._tiles)if(t=this._tiles[e],t.current&&!t.active){var r=t.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)It(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,o,r){var c=Math.floor(e/2),f=Math.floor(t/2),C=o-1,I=new X(+c,+f);I.z=+C;var E=this._tileCoordsToKey(I),ne=this._tiles[E];return ne&&ne.active?(ne.retain=!0,!0):(ne&&ne.loaded&&(ne.retain=!0),C>r?this._retainParent(c,f,C,r):!1)},_retainChildren:function(e,t,o,r){for(var c=2*e;c<2*e+2;c++)for(var f=2*t;f<2*t+2;f++){var C=new X(c,f);C.z=o+1;var I=this._tileCoordsToKey(C),E=this._tiles[I];if(E&&E.active){E.retain=!0;continue}else E&&E.loaded&&(E.retain=!0);o+1<r&&this._retainChildren(c,f,o+1,r)}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return t.minNativeZoom!==void 0&&e<t.minNativeZoom?t.minNativeZoom:t.maxNativeZoom!==void 0&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,o,r){var c=Math.round(t);this.options.maxZoom!==void 0&&c>this.options.maxZoom||this.options.minZoom!==void 0&&c<this.options.minZoom?c=void 0:c=this._clampZoom(c);var f=this.options.updateWhenZooming&&c!==this._tileZoom;(!r||f)&&(this._tileZoom=c,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),c!==void 0&&this._update(e),o||this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var o in this._levels)this._setZoomTransform(this._levels[o],e,t)},_setZoomTransform:function(e,t,o){var r=this._map.getZoomScale(o,e.zoom),c=e.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(t,o)).round();fe.any3d?In(e.el,c,r):Ot(e.el,c)},_resetGrid:function(){var e=this._map,t=e.options.crs,o=this._tileSize=this.getTileSize(),r=this._tileZoom,c=this._map.getPixelWorldBounds(this._tileZoom);c&&(this._globalTileRange=this._pxBoundsToTileRange(c)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],r).x/o.x),Math.ceil(e.project([0,t.wrapLng[1]],r).x/o.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],r).y/o.x),Math.ceil(e.project([t.wrapLat[1],0],r).y/o.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var t=this._map,o=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),r=t.getZoomScale(o,this._tileZoom),c=t.project(e,this._tileZoom).floor(),f=t.getSize().divideBy(r*2);return new pe(c.subtract(f),c.add(f))},_update:function(e){var t=this._map;if(t){var o=this._clampZoom(t.getZoom());if(e===void 0&&(e=t.getCenter()),this._tileZoom!==void 0){var r=this._getTiledPixelBounds(e),c=this._pxBoundsToTileRange(r),f=c.getCenter(),C=[],I=this.options.keepBuffer,E=new pe(c.getBottomLeft().subtract([I,-I]),c.getTopRight().add([I,-I]));if(!(isFinite(c.min.x)&&isFinite(c.min.y)&&isFinite(c.max.x)&&isFinite(c.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ne in this._tiles){var _e=this._tiles[ne].coords;(_e.z!==this._tileZoom||!E.contains(new X(_e.x,_e.y)))&&(this._tiles[ne].current=!1)}if(Math.abs(o-this._tileZoom)>1){this._setView(e,o);return}for(var Oe=c.min.y;Oe<=c.max.y;Oe++)for(var nt=c.min.x;nt<=c.max.x;nt++){var un=new X(nt,Oe);if(un.z=this._tileZoom,!!this._isValidTile(un)){var nn=this._tiles[this._tileCoordsToKey(un)];nn?nn.current=!0:C.push(un)}}if(C.sort(function(hn,Si){return hn.distanceTo(f)-Si.distanceTo(f)}),C.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var _n=document.createDocumentFragment();for(nt=0;nt<C.length;nt++)this._addTile(C[nt],_n);this._level.el.appendChild(_n)}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var o=this._globalTileRange;if(!t.wrapLng&&(e.x<o.min.x||e.x>o.max.x)||!t.wrapLat&&(e.y<o.min.y||e.y>o.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(e);return V(this.options.bounds).overlaps(r)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,o=this.getTileSize(),r=e.scaleBy(o),c=r.add(o),f=t.unproject(r,e.z),C=t.unproject(c,e.z);return[f,C]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),o=new N(t[0],t[1]);return this.options.noWrap||(o=this._map.wrapLatLngBounds(o)),o},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),o=new X(+t[0],+t[1]);return o.z=+t[2],o},_removeTile:function(e){var t=this._tiles[e];t&&(It(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){$e(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=x,e.onmousemove=x,fe.ielt9&&this.options.opacity<1&&dn(e,this.options.opacity)},_addTile:function(e,t){var o=this._getTilePos(e),r=this._tileCoordsToKey(e),c=this.createTile(this._wrapCoords(e),u(this._tileReady,this,e));this._initTile(c),this.createTile.length<2&&q(u(this._tileReady,this,e,null,c)),Ot(c,o),this._tiles[r]={el:c,coords:e,current:!0},t.appendChild(c),this.fire("tileloadstart",{tile:c,coords:e})},_tileReady:function(e,t,o){t&&this.fire("tileerror",{error:t,tile:o,coords:e});var r=this._tileCoordsToKey(e);o=this._tiles[r],o&&(o.loaded=+new Date,this._map._fadeAnimated?(dn(o.el,0),B(this._fadeFrame),this._fadeFrame=q(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),t||($e(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),fe.ielt9||!this._map._fadeAnimated?q(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new X(this._wrapX?v(e.x,this._wrapX):e.x,this._wrapY?v(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new pe(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function Bc(e){return new Zi(e)}var _i=Zi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,t=k(this,t),t.detectRetina&&fe.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),typeof t.subdomains=="string"&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&t===void 0&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var o=document.createElement("img");return Ie(o,"load",u(this._tileOnLoad,this,t,o)),Ie(o,"error",u(this._tileOnError,this,t,o)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(o.referrerPolicy=this.options.referrerPolicy),o.alt="",o.src=this.getTileUrl(e),o},getTileUrl:function(e){var t={r:fe.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=o),t["-y"]=o}return F(this._url,p(t,this.options))},_tileOnLoad:function(e,t){fe.ielt9?setTimeout(u(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,o){var r=this.options.errorTileUrl;r&&t.getAttribute("src")!==r&&(t.src=r),e(o,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom,o=this.options.zoomReverse,r=this.options.zoomOffset;return o&&(e=t-e),e+r},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&(t=this._tiles[e].el,t.onload=x,t.onerror=x,!t.complete)){t.src=j;var o=this._tiles[e].coords;It(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:o})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",j),Zi.prototype._removeTile.call(this,e)},_tileReady:function(e,t,o){if(!(!this._map||o&&o.getAttribute("src")===j))return Zi.prototype._tileReady.call(this,e,t,o)}});function Gr(e,t){return new _i(e,t)}var Jr=_i.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var o=p({},this.defaultWmsParams);for(var r in t)r in this.options||(o[r]=t[r]);t=k(this,t);var c=t.detectRetina&&fe.retina?2:1,f=this.getTileSize();o.width=f.x*c,o.height=f.y*c,this.wmsParams=o},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,_i.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),o=this._crs,r=Z(o.project(t[0]),o.project(t[1])),c=r.min,f=r.max,C=(this._wmsVersion>=1.3&&this._crs===jr?[c.y,c.x,f.y,f.x]:[c.x,c.y,f.x,f.y]).join(","),I=_i.prototype.getTileUrl.call(this,e);return I+w(this.wmsParams,I,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+C},setParams:function(e,t){return p(this.wmsParams,e),t||this.redraw(),this}});function Fc(e,t){return new Jr(e,t)}_i.WMS=Jr,Gr.wms=Fc;var Wn=An.extend({options:{padding:.1},initialize:function(e){k(this,e),g(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),$e(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var o=this._map.getZoomScale(t,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),c=this._map.project(this._center,t),f=r.multiplyBy(-o).add(c).subtract(this._map._getNewPixelOrigin(e,t));fe.any3d?In(this._container,f,o):Ot(this._container,f)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var e in this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),o=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new pe(o,o.add(t.multiplyBy(1+e*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Vr=Wn.extend({options:{tolerance:0},getEvents:function(){var e=Wn.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Wn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");Ie(e,"mousemove",this._onMouseMove,this),Ie(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ie(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,It(this._container),ft(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;this._redrawBounds=null;for(var t in this._layers)e=this._layers[t],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Wn.prototype._update.call(this);var e=this._bounds,t=this._container,o=e.getSize(),r=fe.retina?2:1;Ot(t,e.min),t.width=r*o.x,t.height=r*o.y,t.style.width=o.x+"px",t.style.height=o.y+"px",fe.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Wn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[g(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,o=t.next,r=t.prev;o?o.prev=r:this._drawLast=r,r?r.next=o:this._drawFirst=o,delete e._order,delete this._layers[g(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(typeof e.options.dashArray=="string"){var t=e.options.dashArray.split(/[, ]+/),o=[],r,c;for(c=0;c<t.length;c++){if(r=Number(t[c]),isNaN(r))return;o.push(r)}e.options._dashArray=o}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||q(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new pe,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var o=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)e=r.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var o,r,c,f,C=e._parts,I=C.length,E=this._ctx;if(I){for(E.beginPath(),o=0;o<I;o++){for(r=0,c=C[o].length;r<c;r++)f=C[o][r],E[r?"lineTo":"moveTo"](f.x,f.y);t&&E.closePath()}this._fillStroke(E,e)}}},_updateCircle:function(e){if(!(!this._drawing||e._empty())){var t=e._point,o=this._ctx,r=Math.max(Math.round(e._radius),1),c=(Math.max(Math.round(e._radiusY),1)||r)/r;c!==1&&(o.save(),o.scale(1,c)),o.beginPath(),o.arc(t.x,t.y/c,r,0,Math.PI*2,!1),c!==1&&o.restore(),this._fillStroke(o,e)}},_fillStroke:function(e,t){var o=t.options;o.fill&&(e.globalAlpha=o.fillOpacity,e.fillStyle=o.fillColor||o.color,e.fill(o.fillRule||"evenodd")),o.stroke&&o.weight!==0&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=o.opacity,e.lineWidth=o.weight,e.strokeStyle=o.color,e.lineCap=o.lineCap,e.lineJoin=o.lineJoin,e.stroke())},_onClick:function(e){for(var t=this._map.mouseEventToLayerPoint(e),o,r,c=this._drawFirst;c;c=c.next)o=c.layer,o.options.interactive&&o._containsPoint(t)&&(!(e.type==="click"||e.type==="preclick")||!this._map._draggableMoved(o))&&(r=o);this._fireEvent(r?[r]:!1,e)},_onMouseMove:function(e){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(Nt(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var o,r,c=this._drawFirst;c;c=c.next)o=c.layer,o.options.interactive&&o._containsPoint(t)&&(r=o);r!==this._hoveredLayer&&(this._handleMouseOut(e),r&&($e(this._container,"leaflet-interactive"),this._fireEvent([r],e,"mouseover"),this._hoveredLayer=r)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,o){this._map._fireDOMEvent(t,o||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var o=t.next,r=t.prev;if(o)o.prev=r;else return;r?r.next=o:o&&(this._drawFirst=o),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e)}},_bringToBack:function(e){var t=e._order;if(t){var o=t.next,r=t.prev;if(r)r.next=o;else return;o?o.prev=r:r&&(this._drawLast=r),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e)}}});function Ur(e){return fe.canvas?new Vr(e):null}var $i=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch{}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Wc={_initContainer:function(){this._container=qe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Wn.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=$i("shape");$e(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=$i("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[g(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;It(t),e.removeInteractiveTarget(t),delete this._layers[g(e)]},_updateStyle:function(e){var t=e._stroke,o=e._fill,r=e.options,c=e._container;c.stroked=!!r.stroke,c.filled=!!r.fill,r.stroke?(t||(t=e._stroke=$i("stroke")),c.appendChild(t),t.weight=r.weight+"px",t.color=r.color,t.opacity=r.opacity,r.dashArray?t.dashStyle=D(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=r.lineCap.replace("butt","flat"),t.joinstyle=r.lineJoin):t&&(c.removeChild(t),e._stroke=null),r.fill?(o||(o=e._fill=$i("fill")),c.appendChild(o),o.color=r.fillColor||r.color,o.opacity=r.fillOpacity):o&&(c.removeChild(o),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),o=Math.round(e._radius),r=Math.round(e._radiusY||o);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+o+","+r+" 0,"+65535*360)},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){Jn(e._container)},_bringToBack:function(e){Vn(e._container)}},_o=fe.vml?$i:Ge,Hi=Wn.extend({_initContainer:function(){this._container=_o("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=_o("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){It(this._container),ft(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Wn.prototype._update.call(this);var e=this._bounds,t=e.getSize(),o=this._container;(!this._svgSize||!this._svgSize.equals(t))&&(this._svgSize=t,o.setAttribute("width",t.x),o.setAttribute("height",t.y)),Ot(o,e.min),o.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=_o("path");e.options.className&&$e(t,e.options.className),e.options.interactive&&$e(t,"leaflet-interactive"),this._updateStyle(e),this._layers[g(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){It(e._path),e.removeInteractiveTarget(e._path),delete this._layers[g(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,o=e.options;t&&(o.stroke?(t.setAttribute("stroke",o.color),t.setAttribute("stroke-opacity",o.opacity),t.setAttribute("stroke-width",o.weight),t.setAttribute("stroke-linecap",o.lineCap),t.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?t.setAttribute("stroke-dasharray",o.dashArray):t.removeAttribute("stroke-dasharray"),o.dashOffset?t.setAttribute("stroke-dashoffset",o.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),o.fill?(t.setAttribute("fill",o.fillColor||o.color),t.setAttribute("fill-opacity",o.fillOpacity),t.setAttribute("fill-rule",o.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,wt(e._parts,t))},_updateCircle:function(e){var t=e._point,o=Math.max(Math.round(e._radius),1),r=Math.max(Math.round(e._radiusY),1)||o,c="a"+o+","+r+" 0 1,0 ",f=e._empty()?"M0 0":"M"+(t.x-o)+","+t.y+c+o*2+",0 "+c+-o*2+",0 ";this._setPath(e,f)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){Jn(e._path)},_bringToBack:function(e){Vn(e._path)}});fe.vml&&Hi.include(Wc);function qr(e){return fe.svg||fe.vml?new Hi(e):null}at.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if(e==="overlayPane"||e===void 0)return!1;var t=this._paneRenderers[e];return t===void 0&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&Ur(e)||qr(e)}});var Kr=xi.extend({initialize:function(e,t){xi.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=V(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Zc(e,t){return new Kr(e,t)}Hi.create=_o,Hi.pointsToPath=wt,Fn.geometryToLayer=mo,Fn.coordsToLatLng=Ss,Fn.coordsToLatLngs=fo,Fn.latLngToCoords=Cs,Fn.latLngsToCoords=go,Fn.getFeature=bi,Fn.asFeature=yo,at.mergeOptions({boxZoom:!0});var Xr=Dn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){Ie(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ft(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){It(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ni(),R(),this._startPoint=this._map.mouseEventToContainerPoint(e),Ie(document,{contextmenu:oi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=qe("div","leaflet-zoom-box",this._container),$e(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new pe(this._point,this._startPoint),o=t.getSize();Ot(this._box,t.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(It(this._box),Nt(this._container,"leaflet-crosshair")),Mn(),ge(),ft(document,{contextmenu:oi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(!(e.which!==1&&e.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var t=new N(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){e.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});at.addInitHook("addHandler","boxZoom",Xr),at.mergeOptions({doubleClickZoom:!0});var Yr=Dn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,o=t.getZoom(),r=t.options.zoomDelta,c=e.originalEvent.shiftKey?o-r:o+r;t.options.doubleClickZoom==="center"?t.setZoom(c):t.setZoomAround(e.containerPoint,c)}});at.addInitHook("addHandler","doubleClickZoom",Yr),at.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Qr=Dn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new Un(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}$e(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Nt(this._map._container,"leaflet-grab"),Nt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=V(this._map.options.maxBounds);this._offsetLimit=Z(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),o=this._initialWorldOffset,r=this._draggable._newPos.x,c=(r-t+o)%e+t-o,f=(r+t+o)%e-t-o,C=Math.abs(c+o)<Math.abs(f+o)?c:f;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=C},_onDragEnd:function(e){var t=this._map,o=t.options,r=!o.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),r)t.fire("moveend");else{this._prunePositions(+new Date);var c=this._lastPos.subtract(this._positions[0]),f=(this._lastTime-this._times[0])/1e3,C=o.easeLinearity,I=c.multiplyBy(C/f),E=I.distanceTo([0,0]),ne=Math.min(o.inertiaMaxSpeed,E),_e=I.multiplyBy(ne/E),Oe=ne/(o.inertiaDeceleration*C),nt=_e.multiplyBy(-Oe/2).round();!nt.x&&!nt.y?t.fire("moveend"):(nt=t._limitOffset(nt,t.options.maxBounds),q(function(){t.panBy(nt,{duration:Oe,easeLinearity:C,noMoveStart:!0,animate:!0})}))}}});at.addInitHook("addHandler","dragging",Qr),at.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ea=Dn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),Ie(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ft(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,o=e.scrollTop||t.scrollTop,r=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(r,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t=this._panKeys={},o=this.keyCodes,r,c;for(r=0,c=o.left.length;r<c;r++)t[o.left[r]]=[-1*e,0];for(r=0,c=o.right.length;r<c;r++)t[o.right[r]]=[e,0];for(r=0,c=o.down.length;r<c;r++)t[o.down[r]]=[0,e];for(r=0,c=o.up.length;r<c;r++)t[o.up[r]]=[0,-1*e]},_setZoomDelta:function(e){var t=this._zoomKeys={},o=this.keyCodes,r,c;for(r=0,c=o.zoomIn.length;r<c;r++)t[o.zoomIn[r]]=e;for(r=0,c=o.zoomOut.length;r<c;r++)t[o.zoomOut[r]]=-e},_addHooks:function(){Ie(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ft(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=e.keyCode,o=this._map,r;if(t in this._panKeys){if(!o._panAnim||!o._panAnim._inProgress)if(r=this._panKeys[t],e.shiftKey&&(r=ae(r).multiplyBy(3)),o.options.maxBounds&&(r=o._limitOffset(ae(r),o.options.maxBounds)),o.options.worldCopyJump){var c=o.wrapLatLng(o.unproject(o.project(o.getCenter()).add(r)));o.panTo(c)}else o.panBy(r)}else if(t in this._zoomKeys)o.setZoom(o.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[t]);else if(t===27&&o._popup&&o._popup.options.closeOnEscapeKey)o.closePopup();else return;oi(e)}}});at.addInitHook("addHandler","keyboard",ea),at.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ta=Dn.extend({addHooks:function(){Ie(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ft(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=Tr(e),o=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var r=Math.max(o-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),r),oi(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),o=this._map.options.zoomSnap||0;e._stop();var r=this._delta/(this._map.options.wheelPxPerZoomLevel*4),c=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,f=o?Math.ceil(c/o)*o:c,C=e._limitZoom(t+(this._delta>0?f:-f))-t;this._delta=0,this._startTime=null,C&&(e.options.scrollWheelZoom==="center"?e.setZoom(t+C):e.setZoomAround(this._lastMousePos,t+C))}});at.addInitHook("addHandler","scrollWheelZoom",ta);var $c=600;at.mergeOptions({tapHold:fe.touchNative&&fe.safari&&fe.mobile,tapTolerance:15});var na=Dn.extend({addHooks:function(){Ie(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ft(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),e.touches.length===1){var t=e.touches[0];this._startPos=this._newPos=new X(t.clientX,t.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Ie(document,"touchend",an),Ie(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),$c),Ie(document,"touchend touchcancel contextmenu",this._cancel,this),Ie(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){ft(document,"touchend",an),ft(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),ft(document,"touchend touchcancel contextmenu",this._cancel,this),ft(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new X(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var o=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});o._simulated=!0,t.target.dispatchEvent(o)}});at.addInitHook("addHandler","tapHold",na),at.mergeOptions({touchZoom:fe.touch,bounceAtZoomLimits:!0});var ia=Dn.extend({addHooks:function(){$e(this._map._container,"leaflet-touch-zoom"),Ie(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Nt(this._map._container,"leaflet-touch-zoom"),ft(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(!(!e.touches||e.touches.length!==2||t._animatingZoom||this._zooming)){var o=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),t.options.touchZoom!=="center"&&(this._pinchStartLatLng=t.containerPointToLatLng(o.add(r)._divideBy(2))),this._startDist=o.distanceTo(r),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),Ie(document,"touchmove",this._onTouchMove,this),Ie(document,"touchend touchcancel",this._onTouchEnd,this),an(e)}},_onTouchMove:function(e){if(!(!e.touches||e.touches.length!==2||!this._zooming)){var t=this._map,o=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]),c=o.distanceTo(r)/this._startDist;if(this._zoom=t.getScaleZoom(c,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&c<1||this._zoom>t.getMaxZoom()&&c>1)&&(this._zoom=t._limitZoom(this._zoom)),t.options.touchZoom==="center"){if(this._center=this._startLatLng,c===1)return}else{var f=o._add(r)._divideBy(2)._subtract(this._centerPoint);if(c===1&&f.x===0&&f.y===0)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(f),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var C=u(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=q(C,this,!0),an(e)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),ft(document,"touchmove",this._onTouchMove,this),ft(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});at.addInitHook("addHandler","touchZoom",ia),at.BoxZoom=Xr,at.DoubleClickZoom=Yr,at.Drag=Qr,at.Keyboard=ea,at.ScrollWheelZoom=ta,at.TapHold=na,at.TouchZoom=ia,s.Bounds=pe,s.Browser=fe,s.CRS=se,s.Canvas=Vr,s.Circle=_s,s.CircleMarker=ho,s.Class=re,s.Control=Tn,s.DivIcon=Hr,s.DivOverlay=Ln,s.DomEvent=ac,s.DomUtil=ln,s.Draggable=Un,s.Evented=Me,s.FeatureGroup=jn,s.GeoJSON=Fn,s.GridLayer=Zi,s.Handler=Dn,s.Icon=vi,s.ImageOverlay=vo,s.LatLng=M,s.LatLngBounds=N,s.Layer=An,s.LayerGroup=yi,s.LineUtil=bc,s.Map=at,s.Marker=po,s.Mixin=mc,s.Path=qn,s.Point=X,s.PolyUtil=fc,s.Polygon=xi,s.Polyline=Bn,s.Popup=xo,s.PosAnimation=Ar,s.Projection=_c,s.Rectangle=Kr,s.Renderer=Wn,s.SVG=Hi,s.SVGOverlay=$r,s.TileLayer=_i,s.Tooltip=bo,s.Transformation=ct,s.Util=ce,s.VideoOverlay=Zr,s.bind=u,s.bounds=Z,s.canvas=Ur,s.circle=Ic,s.circleMarker=Pc,s.control=Bi,s.divIcon=jc,s.extend=p,s.featureGroup=Tc,s.geoJSON=Wr,s.geoJson=Lc,s.gridLayer=Bc,s.icon=Ac,s.imageOverlay=Ec,s.latLng=O,s.latLngBounds=V,s.layerGroup=wc,s.map=lc,s.marker=kc,s.point=ae,s.polygon=Dc,s.polyline=Mc,s.popup=Oc,s.rectangle=Zc,s.setOptions=k,s.stamp=g,s.svg=qr,s.svgOverlay=Nc,s.tileLayer=Gr,s.tooltip=zc,s.transformation=Ne,s.version=l,s.videoOverlay=Rc;var Hc=window.L;s.noConflict=function(){return window.L=Hc,this},window.L=s})}(Ui,Ui.exports)),Ui.exports}var lo=Yh();const Xs=Wu(lo);function mr(n,i,s){return Object.freeze({instance:n,context:i,container:s})}function fr(n,i){return i==null?function(l,p){const h=d.useRef(void 0);return h.current||(h.current=n(l,p)),h}:function(l,p){const h=d.useRef(void 0);h.current||(h.current=n(l,p));const u=d.useRef(l),{instance:m}=h.current;return d.useEffect(function(){u.current!==l&&(i(m,l,u.current),u.current=l)},[m,l,i]),h}}function Qh(n,i){d.useEffect(function(){return(i.layerContainer??i.map).addLayer(n.instance),function(){var h;(h=i.layerContainer)==null||h.removeLayer(n.instance),i.map.removeLayer(n.instance)}},[i,n])}function Ml(n){return function(s){const l=pr(),p=n(hr(s,l),l);return Pl(l.map,s.attribution),Il(p.current,s.eventHandlers),Qh(p.current,l),p}}function em(n,i){const s=fr(n,i),l=Ml(s);return Vh(l)}function tm(n,i){const s=fr(n),l=Kh(s,i);return Uh(l)}function nm(n,i){const s=fr(n,i),l=Ml(s);return qh(l)}function im(n,i,s){const{opacity:l,zIndex:p}=i;l!=null&&l!==s.opacity&&n.setOpacity(l),p!=null&&p!==s.zIndex&&n.setZIndex(p)}function gr(){return pr().map}function om(n){const i=gr();return d.useEffect(function(){return i.on(n),function(){i.off(n)}},[i,n]),i}function sm({bounds:n,boundsOptions:i,center:s,children:l,className:p,id:h,placeholder:u,style:m,whenReady:g,zoom:b,...v},x){const[y]=d.useState({className:p,id:h,style:m}),[S,T]=d.useState(null),k=d.useRef(void 0);d.useImperativeHandle(x,()=>(S==null?void 0:S.map)??null,[S]);const w=d.useCallback(F=>{if(F!==null&&!k.current){const D=new lo.Map(F,v);k.current=D,s!=null&&b!=null?D.setView(s,b):n!=null&&D.fitBounds(n,i),g!=null&&D.whenReady(g),T(Gh(D))}},[]);d.useEffect(()=>()=>{S==null||S.map.remove()},[S]);const P=S?Nn.createElement(dr,{value:S},l):u??null;return Nn.createElement("div",{...y,ref:w},P)}const rm=d.forwardRef(sm),Pa=em(function({position:i,...s},l){const p=new lo.Marker(i,s);return mr(p,Jh(l,{overlayContainer:p}))},function(i,s,l){s.position!==l.position&&i.setLatLng(s.position),s.icon!=null&&s.icon!==l.icon&&i.setIcon(s.icon),s.zIndexOffset!=null&&s.zIndexOffset!==l.zIndexOffset&&i.setZIndexOffset(s.zIndexOffset),s.opacity!=null&&s.opacity!==l.opacity&&i.setOpacity(s.opacity),i.dragging!=null&&s.draggable!==l.draggable&&(s.draggable===!0?i.dragging.enable():i.dragging.disable())}),am=nm(function({url:i,...s},l){const p=new lo.TileLayer(i,hr(s,l));return mr(p,l)},function(i,s,l){im(i,s,l);const{url:p}=s;p!=null&&p!==l.url&&i.setUrl(p)}),Ia=tm(function(i,s){const l=new lo.Tooltip(i,s.overlayContainer);return mr(l,s)},function(i,s,{position:l},p){d.useEffect(function(){const u=s.overlayContainer;if(u==null)return;const{instance:m}=i,g=v=>{v.tooltip===m&&(l!=null&&m.setLatLng(l),m.update(),p(!0))},b=v=>{v.tooltip===m&&p(!1)};return u.on({tooltipopen:g,tooltipclose:b}),u.bindTooltip(m),function(){u.off({tooltipopen:g,tooltipclose:b}),u._map!=null&&u.unbindTooltip()}},[i,s,p,l])});function lm(){const n=gr();return d.useEffect(()=>{const i=n.getContainer(),s=new ResizeObserver(()=>{n.invalidateSize({animate:!1})});return s.observe(i),()=>s.disconnect()},[n]),null}function cm({onMapDragStart:n,onMapDragEnd:i}){return om({dragstart(){n()},dragend(){i()},click(){}}),null}function um({selectedTask:n,selectedTasks:i,selectedResource:s,selectedResources:l,shouldZoom:p}){const h=gr(),u=Nn.useRef("");return d.useEffect(()=>{if(!p)return;const m=i.length?i:n?[n]:[],g=l.length?l:s?[s]:[],b=[...m.filter(y=>y.lat&&y.lng),...g.filter(y=>y.homeLat&&y.homeLng)];if(!b.length)return;const v=b.map(y=>y.taskId?y.taskId:y.resourceId).join(",");if(v===u.current)return;if(u.current=v,b.length===1){const y=b[0];h.setView([Number(y.lat??y.homeLat),Number(y.lng??y.homeLng)],15,{animate:!1});return}const x=Xs.latLngBounds(b.map(y=>[Number(y.lat??y.homeLat),Number(y.lng??y.homeLng)]));h.fitBounds(x,{padding:[60,60],animate:!1})},[n,i,s,l,p,h]),null}function dm({tasks:n,resources:i,selectedTask:s,selectedTasks:l,selectedResource:p,selectedResources:h,shouldZoom:u,handleTaskMapClick:m,handleResourceMapClick:g,notifyMapDragStart:b,notifyMapDragEnd:v}){const x=$t(),y=d.useMemo(()=>n.filter(w=>w.lat&&w.lng),[n]),S=d.useMemo(()=>i.filter(w=>w.homeLat&&w.homeLng),[i]),T=new Set(l.map(w=>w.taskId)),k=new Set(h.map(w=>w.resourceId));return a.jsx(ht,{"data-map-root":"true",elevation:0,sx:{height:"100%",display:"flex",flexDirection:"column",borderRadius:3,px:3,py:2.5,border:`1px solid ${Y(x.palette.primary.main,.18)}`,boxShadow:"0 18px 46px rgba(8,58,97,0.18)",backgroundImage:"none"},children:a.jsx(Te,{sx:{flex:1,borderRadius:2,overflow:"hidden",position:"relative"},children:a.jsxs(rm,{center:[51.713,-3.449],zoom:12,style:{width:"100%",height:"100%"},children:[a.jsx(lm,{}),a.jsx(cm,{onMapDragStart:b,onMapDragEnd:v}),a.jsx(um,{selectedTask:s,selectedTasks:l,selectedResource:p,selectedResources:h,shouldZoom:u}),a.jsx(am,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),y.map(w=>{const P=!!(T.has(w.taskId)||s&&s.taskId===w.taskId),F=Xs.divIcon({className:"custom-pin",iconSize:[36,50],iconAnchor:[18,46],html:Al(Cl[w.commitmentType]??"#6B7280",P)});return a.jsx(Pa,{position:[w.lat,w.lng],icon:F,eventHandlers:{click:D=>{var j,K;const z=((j=D.originalEvent)==null?void 0:j.ctrlKey)||((K=D.originalEvent)==null?void 0:K.metaKey)||!1;m(w,z)},mouseover:D=>{var j;const z=D.target;(j=z.closeTooltip)==null||j.call(z)},dblclick:D=>{var j;const z=D.target;(j=z.openTooltip)==null||j.call(z)}},children:a.jsx(Ia,{direction:"top",offset:[0,-36],permanent:!1,sticky:!1,opacity:1,className:"leaflet-tooltip-surface",children:a.jsxs(Te,{sx:{fontSize:12,lineHeight:1.4,color:x.palette.text.primary},children:[a.jsx(Te,{component:"span",sx:{fontWeight:700,display:"block"},children:w.taskId}),a.jsx(Te,{component:"span",sx:{color:x.palette.text.secondary},children:w.customerAddress})]})})},w.taskId)}),S.map(w=>{const P=!!(k.has(w.resourceId)||p&&p.resourceId===w.resourceId),F=Xs.divIcon({className:"custom-pin",iconSize:[36,50],iconAnchor:[18,46],html:kl(w.status,P)});return a.jsx(Pa,{position:[w.homeLat,w.homeLng],icon:F,eventHandlers:{click:D=>{var j,K;const z=((j=D.originalEvent)==null?void 0:j.ctrlKey)||((K=D.originalEvent)==null?void 0:K.metaKey)||!1;g(w,z)},mouseover:D=>{var j;const z=D.target;(j=z.closeTooltip)==null||j.call(z)},dblclick:D=>{var j;const z=D.target;(j=z.openTooltip)==null||j.call(z)}},children:a.jsx(Ia,{direction:"top",offset:[0,-36],permanent:!1,sticky:!1,opacity:1,className:"leaflet-tooltip-surface",children:a.jsxs(Te,{sx:{fontSize:12,lineHeight:1.4,color:x.palette.text.primary},children:[a.jsx(Te,{component:"span",sx:{fontWeight:700,display:"block"},children:w.name}),a.jsx(Te,{component:"span",sx:{display:"block",color:x.palette.text.secondary},children:w.homePostCode}),a.jsxs(Te,{component:"span",sx:{color:x.palette.text.secondary},children:["Status: ",w.status]})]})})},w.resourceId)})]})})})}function pm({visible:n,x:i,y:s,selectedRows:l,clickedColumnKey:p,clickedRow:h,onClose:u,onOpenPopout:m,onOpenCalloutIncident:g,onProgressTasks:b,onProgressNotes:v,mouseScreenX:x,mouseScreenY:y}){if(!n)return null;const S=l.length?l:h?[h]:[],T=S.length,k=T>1?`Open Viewer (${T})`:"Open Viewer",w=()=>{if(S.length){try{m(S,x,y)}catch(W){console.error("ContextMenu â†’ onOpenPopout error:",W)}u()}},P=()=>{if(!(!S.length||!b)){try{b(S)}catch(W){console.error("ContextMenu â†’ onProgressTasks error:",W)}u()}},F=()=>{if(!(!S.length||!v)){try{v(S)}catch(W){console.error("ContextMenu â†’ onProgressNotes error:",W)}u()}},D=async()=>{if(!h||!p)return;const W=h[p],te=W==null?"":String(W);try{await navigator.clipboard.writeText(te)}catch(q){console.error("Clipboard write error:",q)}u()},z=h&&p?String(h[p]??""):"",j=()=>{if(h){try{g(h)}catch(W){console.error("ContextMenu â†’ onOpenCalloutIncident error:",W)}u()}},K=(h==null?void 0:h.taskId)??(h==null?void 0:h.TaskID)??(h==null?void 0:h.TaskId)??(h==null?void 0:h.id)??null,H=K?`Callout Incident: ${K}`:"Callout Incident",oe=a.jsx(di,{children:n&&a.jsxs(mn.ul,{initial:{opacity:0,scale:.96},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.96},transition:{duration:.12},style:{position:"fixed",top:y,left:x,minWidth:"min(90vw,340px)",zIndex:99999},className:"rounded-xl border border-gray-200 bg-white shadow-xl backdrop-blur-md text-sm text-gray-800 py-1 overflow-hidden",onMouseDown:W=>W.stopPropagation(),children:[p&&h&&a.jsxs("li",{onClick:D,className:`px-4 py-2.5 flex items-center gap-3 cursor-pointer 
                         hover:bg-gray-50 transition-all`,children:[a.jsx(Pu,{size:15,className:"text-gray-700"}),a.jsxs("span",{className:"text-gray-800",children:["Copy value:"," ",a.jsx("span",{className:"font-semibold",children:z})]})]}),S.length>0&&b&&a.jsxs("li",{onClick:P,className:`px-4 py-2.5 flex items-center gap-3 cursor-pointer 
                         hover:bg-gray-50 transition-all`,children:[a.jsx(ts,{size:15,className:"text-[#0A4A7A]"}),a.jsx("span",{className:"font-medium text-gray-800",children:T>1?`Progress Tasks (${T})`:"Progress Task"})]}),S.length>0&&v&&a.jsxs("li",{onClick:F,className:`px-4 py-2.5 flex items-center gap-3 cursor-pointer 
                         hover:bg-gray-50 transition-all`,children:[a.jsx(Js,{size:15,className:"text-[#0A4A7A]"}),a.jsx("span",{className:"font-medium text-gray-800",children:T>1?`Progress Notes (${T})`:"Progress Notes"})]}),a.jsxs("li",{onClick:w,className:`px-4 py-2.5 flex items-center gap-3 cursor-pointer 
                       hover:bg-gray-50 transition-all`,children:[a.jsx(rl,{size:15,className:"text-gray-700"}),a.jsx("span",{className:"font-medium text-gray-800",children:k})]}),h&&a.jsxs("li",{onClick:j,className:`px-4 py-2.5 flex items-center gap-3 cursor-pointer 
                       hover:bg-red-50 transition-all text-red-700`,children:[a.jsx(rr,{size:15,className:"text-red-600"}),a.jsx("span",{className:"font-semibold",children:H})]})]})});try{return Di.createPortal(oe,document.body)}catch{return oe}}const Pi=["Not Assigned (ACT)","Assigned (ACT)","Dispatched (AWI)"],Dl=["Held Pending Details (HPD)","Held Linked Task (HLD)","Common (COMN)"],En=[...Pi,...Dl],ui=n=>n?n.trim().toLowerCase():"",Ma=n=>{const i=ui(n);if(!i)return{nextStatus:En[0],progressed:!0};const s=Pi.findIndex(l=>l.toLowerCase()===i);return s===-1?{nextStatus:n&&En.includes(n)?n:En[0],progressed:!n}:s>=Pi.length-1?{nextStatus:Pi[s],progressed:!1}:{nextStatus:Pi[s+1],progressed:!0}},hm=n=>Array.isArray(n)?n.map(s=>{if(!s)return null;const l=typeof s.text=="string"?s.text.trim():"";if(!l)return null;const p=s.ts;return{ts:typeof p=="string"&&p?p:new Date().toISOString(),status:typeof s.status=="string"?s.status:void 0,text:l,source:typeof s.source=="string"?s.source:void 0}}).filter(s=>!!s).sort((s,l)=>{const p=new Date(s.ts).getTime();return new Date(l.ts).getTime()-p}):typeof n=="string"&&n.trim()?[{ts:new Date().toISOString(),status:void 0,text:n.trim(),source:"Imported"}]:[],Da=70,mm=220;function La(n){var i;if(n==null)return"string";if(typeof n=="number")return"number";if(typeof n=="string"){const s=Number(((i=n.replace)==null?void 0:i.call(n,/[, ]/g,""))??n);if(!Number.isNaN(s)&&n.trim()!=="")return"number";const l=new Date(n);return!Number.isNaN(l.getTime())&&/\d/.test(n)?"date":"string"}return n instanceof Date?"date":"string"}function fm(n,i,s){const l=La(n),p=La(i);let h=0;if(l==="number"&&p==="number"){const u=typeof n=="number"?n:Number(String(n).replace(/[, ]/g,"")),m=typeof i=="number"?i:Number(String(i).replace(/[, ]/g,""));h=u-m}else if(l==="date"&&p==="date"){const u=n instanceof Date?n.getTime():new Date(n).getTime(),m=i instanceof Date?i.getTime():new Date(i).getTime();h=u-m}else h=String(n??"").localeCompare(String(i??""),void 0,{sensitivity:"base",numeric:!0});return s==="asc"?h:-h}function gm(n){return n===null?"asc":n==="asc"?"desc":null}function yr({rows:n,headerNames:i,tableHeight:s,sx:l,onOpenTask:p,onOpenMultiple:h,clearSelectionTrigger:u,onOpenPopout:m,onOpenCalloutIncident:g,onSelectionChange:b,rowIdKey:v,controlledSelectedRowIds:x}){const y=$t(),S=typeof window<"u"&&typeof document<"u",[T,k]=d.useState(null),[w,P]=d.useState(null),F=d.useMemo(()=>Object.keys(i),[i]),[D,z]=d.useState(F),[j,K]=d.useState({}),[H,oe]=d.useState(!1),W=d.useRef(null),te=d.useRef(0),q=d.useRef(0),[B,ce]=d.useState(null),[re,Se]=d.useState(null),[ye,Me]=d.useState(new Set),[X,Ae]=d.useState(null),ae=d.useRef(!1),[pe,Z]=d.useState({x:0,y:0,visible:!1,clickedRow:null,clickedColumnKey:null}),[N,V]=d.useState({open:!1,tasks:[]}),[M,O]=d.useState(En[0]),[se,le]=d.useState(""),[Ce,We]=d.useState(!1),[ct,Ne]=d.useState(null),[Be,je]=d.useState(null),[Ge,wt]=d.useState({open:!1,tasks:[]}),[me,Pe]=d.useState(""),[ke,bt]=d.useState(!1),[st,_t]=d.useState(null),[At,ut]=d.useState(null),[gt,jt]=d.useState({open:!1,task:null,notes:[]}),[Et,Ve]=d.useState(""),[He,Ee]=d.useState(!1),[mt,dt]=d.useState(null),[yt,Xt]=d.useState(null),[vt,Bt]=d.useState({x:0,y:0,visible:!1,key:null}),[Yt,on]=d.useState(""),[qt,Ft]=d.useState(()=>window.innerHeight||900);d.useEffect(()=>{const _=()=>Ft(window.innerHeight);return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]);const de=d.useMemo(()=>qt<600?"calc(var(--vh, 1vh) * 20)":qt<800?"calc(var(--vh, 1vh) * 22)":"calc(var(--vh, 1vh) * 24)",[qt]),A=d.useRef(null),U=d.useRef(null),xe=d.useRef(null),Ke=d.useRef(null),[Ze,De]=d.useState(0),[Ue,Q]=d.useState(0),[G,ee]=d.useState(1),[ie,Je]=d.useState(100),tt=Math.max(1,Math.ceil(n.length/ie)),[fe,Ht]=d.useState(()=>localStorage.getItem("taskTableDensity")==="comfortable"?"comfortable":"compact");d.useEffect(()=>{localStorage.setItem("taskTableDensity",fe)},[fe]);const xt=d.useCallback(()=>{Me(new Set),Ae(null)},[]);d.useEffect(()=>{z(F)},[F]),d.useEffect(()=>{G>tt&&ee(tt)},[G,tt]),d.useEffect(()=>{if(!n.length||!D.length){oe(!0);return}const R=document.createElement("canvas").getContext("2d");if(!R)return;R.font="12px Inter, sans-serif";const ge={};for(const he of D){const we=R.measureText(i[he]??he).width,Re=n.slice(0,10).map(Le=>R.measureText(String(Le[he]??"")).width).reduce((Le,pt)=>Math.max(Le,pt),0);ge[he]=Math.min(Math.max(we,Re)+Da,380)}K(ge),setTimeout(()=>oe(!0),120)},[n,i,D]);const lt=d.useMemo(()=>n.length?!T||!w?n:[...n].sort((_,R)=>fm(_[T],R[T],w)):[],[n,T,w]),Xe=d.useMemo(()=>{const _=(G-1)*ie;return lt.slice(_,_+ie)},[lt,G,ie]);d.useEffect(()=>{if(ae.current){console.log("ðŸ”µ TABLE: User selecting manually â€” ignore controlled update");return}if(!x||!v){console.log("ðŸ”µ TABLE: No controlled selection (map â†’ table) triggered");return}console.log("ðŸ”µ TABLE: Controlled selection received:",Array.from(x));const _=new Set;Xe.forEach((R,ge)=>{const he=String(R[v]);x.has(he)&&(console.log("ðŸ”µ TABLE: Match found on page index:",ge,"id:",he),_.add(ge))}),console.log("ðŸ”µ TABLE: Final row set:",Array.from(_)),Me(_)},[x,Xe,v]),d.useEffect(()=>{const _=setTimeout(()=>{ae.current=!1},50);return()=>clearTimeout(_)},[ye]),d.useEffect(()=>{const _=ge=>{if(!W.current)return;const he=W.current,we=ge.clientX-te.current;K(Re=>({...Re,[he]:Math.max(80,q.current+we)}))},R=()=>{W.current=null,document.body.style.cursor="default"};return window.addEventListener("mousemove",_),window.addEventListener("mouseup",R),()=>{window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",R)}},[]);const Qt=(_,R)=>{R.preventDefault(),R.stopPropagation(),W.current=_,te.current=R.clientX,q.current=j[_]??180,document.body.style.cursor="col-resize"},xn=_=>{const ge=document.createElement("canvas").getContext("2d");if(!ge)return;ge.font="12px Inter, sans-serif";const he=ge.measureText(i[_]??_).width,we=n.map(Le=>ge.measureText(String(Le[_]??"")).width).reduce((Le,pt)=>Math.max(Le,pt),0),Re=Math.min(Math.max(he,we)+Da,420);K(Le=>({...Le,[_]:Re}))},J=(_,R)=>{ce(_),Se(null),R.dataTransfer.effectAllowed="move"},$=(_,R)=>{R.preventDefault(),B&&B!==_&&Se(_)},be=(_,R)=>{if(R.preventDefault(),!B||B===_){ce(null),Se(null);return}z(ge=>{const he=ge.indexOf(B),we=ge.indexOf(_);if(he===-1||we===-1)return ge;const Re=[...ge],[Le]=Re.splice(he,1);return Re.splice(we,0,Le),Re}),ce(null),Se(null)},Fe=()=>{ce(null),Se(null)},Ye=(_,R)=>{R.preventDefault(),R.stopPropagation();const ge=R.currentTarget.closest("th");if(!ge)return;const he=A.current,we=xe.current;if(!he||!we)return;const Re=he.getBoundingClientRect(),Le=we.getBoundingClientRect(),pt=ge.getBoundingClientRect(),zt=Le.left-Re.left+Le.width/2-mm/2,ln=pt.bottom-Re.top+6;Bt({visible:!0,key:_,x:zt,y:ln})},rt=d.useCallback(()=>{Bt(_=>({..._,visible:!1,key:null}))},[]),Pt=_=>{z(R=>{const ge=R.includes(_);if(ge&&R.length===1)return R;if(ge){const he=R.filter(we=>we!==_);return T===_&&(k(null),P(null)),he}else{const he=[...R],we=F.indexOf(_);if(we===-1)return he;let Re=he.length;for(let Le=0;Le<he.length;Le++)if(F.indexOf(he[Le])>we){Re=Le;break}return he.splice(Re,0,_),he}})},sn=()=>{z(F),k(null),P(null),K({})},Pn=(_,R)=>{_.preventDefault(),_.stopPropagation();const ge=A.current;if(!ge)return;const he=ge.getBoundingClientRect(),we=_.clientX-he.left,Re=_.clientY-he.top;De(_.clientX),Q(_.clientY);let Le=null;const pt=_.target,zt=pt==null?void 0:pt.closest("td");if(zt){const Ie=zt.getAttribute("data-colkey");Ie&&(Le=Ie)}const ln=Xe[R]??null;Z({x:we,y:Re,visible:!0,clickedRow:ln,clickedColumnKey:Le}),Me(Ie=>Ie.has(R)?Ie:new Set([R]))},zn=d.useCallback(()=>{Z(_=>({..._,visible:!1,clickedRow:null,clickedColumnKey:null}))},[]),en=d.useCallback(_=>_?_.taskId??_.TaskID??_.TaskId??_.id??_.ID??_.Id??null:null,[]),Gt=d.useCallback(_=>_?_.taskStatus??_.TaskStatus??_.status??_.Status??"":"",[]),fn=d.useCallback(_=>{if(!(_!=null&&_.length))return[];const R=[],ge=new Set;for(const he of _){if(!he)continue;const we=en(he);if(we!=null){const Re=String(we);if(ge.has(Re))continue;ge.add(Re)}R.push(he)}return R.length?R:_},[en]),ot=d.useCallback(_=>{if(!_)return[];const R=_.progressNotes??_.ProgressNotes??_.progress_notes??_.quickNotes??[];return hm(R)},[]),rn=d.useCallback(_=>{if(!(_!=null&&_.length))return;const R=fn(_),ge=R[0],he=(()=>{if(!ge)return En[0];const we=Gt(ge),Re=Ma(we).nextStatus;return En.includes(Re)?Re:we&&En.includes(we)?we:En[0]})();O(he),V({open:!0,tasks:R}),le(""),Ne(null),je(null)},[fn,Gt]),Rt=d.useCallback(()=>{V({open:!1,tasks:[]}),le(""),Ne(null),je(null),O(En[0])},[]),Cn=d.useCallback(_=>{const R=ot(_);jt({open:!0,task:_,notes:R}),Ve(""),dt(null),Xt(null)},[ot]),wn=d.useCallback(()=>{jt({open:!1,task:null,notes:[]}),Ve(""),dt(null),Xt(null)},[]),Gn=d.useCallback(_=>{const R=fn(_);R.length&&(wt({open:!0,tasks:R}),Pe(""),_t(null),ut(null))},[fn]),qe=d.useCallback(()=>{wt({open:!1,tasks:[]}),Pe(""),_t(null),ut(null)},[]),It=d.useCallback(_=>{rn(_)},[rn]),mi=d.useCallback(_=>{const R=fn(_);if(R.length){if(R.length===1){Cn(R[0]);return}Gn(R)}},[fn,Gn,Cn]),Jn=d.useCallback(async()=>{const _=se.trim();if(!_){Ne("Enter a quick note before saving.");return}if(Ce)return;We(!0),Ne(null),je(null);const R=[],ge=[],he=[];for(const we of N.tasks){const Re=en(we);if(!Re){R.push("(missing id)");continue}const Le=String(Re),pt=Gt(we),ln=(M&&M.trim()?M:Ma(pt).nextStatus)||pt,Ie=new Date().toISOString(),pn=ui(pt)!==ui(ln)?`${_} (Status â†’ ${ln})`:_;try{const ft=await fetch("http://localhost:5179/progress-notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskId:Le,text:pn,taskStatus:ln})});if(!ft.ok)throw new Error(`HTTP ${ft.status}`);ge.push(Le),he.push({taskId:Le,previousStatus:pt,nextStatus:ln,note:pn,timestamp:Ie})}catch(ft){console.warn("Quick note sync failed",ft),R.push(Le)}}if(We(!1),R.length){Ne(`Unable to update ${R.length} task${R.length===1?"":"s"}: ${R.join(",")}`),ge.length&&je(`Saved ${ge.length} task${ge.length===1?"":"s"}`);return}if(he.length&&typeof window<"u"&&document.dispatchEvent(new CustomEvent("taskforce:tasks-progressed",{detail:{items:he}})),ge.length){const we=he.filter(Re=>ui(Re.previousStatus)!==ui(Re.nextStatus)).length;we>0?je(`Updated ${ge.length} task${ge.length===1?"":"s"} (${we} progressed)`):je(`Saved ${ge.length} task${ge.length===1?"":"s"}`)}else je("Saved");le(""),setTimeout(()=>{Rt()},900)},[Rt,en,Gt,N.tasks,se,Ce,M]),Vn=d.useCallback(async()=>{const _=Et.trim();if(!_){dt("Enter a note before saving.");return}if(He||!gt.task)return;Ee(!0),dt(null),Xt(null);const R=en(gt.task);if(!R){Ee(!1),dt("Task identifier missing.");return}const ge=String(R),he=Gt(gt.task),we=he||"Updated",Re=new Date().toISOString();try{const Le=await fetch("http://localhost:5179/progress-notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskId:ge,text:_,taskStatus:we})});if(!Le.ok)throw new Error(`HTTP ${Le.status}`);const pt={ts:Re,status:we,text:_,source:"Quick Progress"};jt(zt=>zt.task?{open:zt.open,task:{...zt.task,progressNotes:[pt,...Array.isArray(zt.task.progressNotes)?zt.task.progressNotes:[]]},notes:[pt,...zt.notes]}:zt),typeof document<"u"&&document.dispatchEvent(new CustomEvent("taskforce:tasks-progressed",{detail:{items:[{taskId:ge,previousStatus:he,nextStatus:we,note:_,timestamp:Re}]}})),Xt("Saved note"),Ve("")}catch(Le){console.warn("Single progress note sync failed",Le),dt("Unable to save note. Try again.")}finally{Ee(!1)}},[en,Gt,gt.task,He,Et]),Ri=d.useCallback(async()=>{const _=me.trim();if(!_){_t("Enter a note before saving.");return}if(ke)return;bt(!0),_t(null),ut(null);const R=[],ge=[],he=[];for(const we of Ge.tasks){const Re=en(we);if(!Re){R.push("(missing id)");continue}const Le=String(Re),pt=Gt(we),zt=pt||"Updated",ln=new Date().toISOString();try{const Ie=await fetch("http://localhost:5179/progress-notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskId:Le,text:_,taskStatus:zt})});if(!Ie.ok)throw new Error(`HTTP ${Ie.status}`);ge.push(Le),he.push({taskId:Le,previousStatus:pt,nextStatus:zt,note:_,timestamp:ln})}catch(Ie){console.warn("Bulk progress note sync failed",Ie),R.push(Le)}}if(bt(!1),R.length){_t(`Unable to update ${R.length} task${R.length===1?"":"s"}: ${R.join(",")}`),ge.length&&ut(`Saved ${ge.length} task${ge.length===1?"":"s"}`);return}he.length&&typeof document<"u"&&document.dispatchEvent(new CustomEvent("taskforce:tasks-progressed",{detail:{items:he}})),ge.length?ut(`Saved ${ge.length} task${ge.length===1?"":"s"}`):ut("Saved"),Pe(""),setTimeout(()=>{qe()},900)},[qe,en,Gt,Ge.tasks,ke,me]);d.useEffect(()=>{if(!N.open)return;const _=R=>{R.key==="Escape"&&Rt()};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[Rt,N.open]),d.useEffect(()=>{if(!Ge.open)return;const _=R=>{R.key==="Escape"&&qe()};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[qe,Ge.open]),d.useEffect(()=>{if(!gt.open)return;const _=R=>{R.key==="Escape"&&wn()};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[wn,gt.open]),d.useEffect(()=>{u!==void 0&&xt()},[u,xt]),d.useEffect(()=>{xt()},[n,xt]),d.useEffect(()=>{xt()},[T,w,xt]),d.useEffect(()=>{xt()},[G,ie,xt]),d.useEffect(()=>{xt()},[D,xt]),d.useEffect(()=>{const _=ge=>{ge.key==="Escape"&&(zn(),rt())},R=ge=>{var we;const he=ge.target;if(vt.visible){const Re=(we=U.current)==null?void 0:we.contains(he),Le=he.closest('[data-column-button="true"]');!Re&&!Le&&rt()}if(pe.visible){const Re=document.querySelector(".task-context-menu");if(((Re==null?void 0:Re.contains(he))??!1)||ge.button===2)return;zn()}if(A.current&&!A.current.contains(he)){const Re=he.closest("[data-table]"),Le=he.closest(`[data-table="${v}"]`),pt=he.closest('[data-map-root="true"]');if(Re&&!Le||pt)return;xt()}};return window.addEventListener("keydown",_),window.addEventListener("mousedown",R),()=>{window.removeEventListener("keydown",_),window.removeEventListener("mousedown",R)}},[pe.visible,vt.visible,zn,rt,xt]);const $e=s??"calc(100vh - 600px)",Nt=H?1:0,Ni=vt.visible?"blur(1.5px)":"none",[fi,dn]=d.useState(!1);d.useEffect(()=>{const _=xe.current;if(!_)return;const R=()=>dn(_.scrollTop>0);return _.addEventListener("scroll",R),()=>_.removeEventListener("scroll",R)},[]);const Oi=Array.from(ye).map(_=>{const R=(G-1)*ie+_;return lt[R]}).filter(Boolean);d.useEffect(()=>{ae.current&&b&&b(Oi)},[Oi,b]);const gi=pe.clickedRow??null,In=d.useMemo(()=>{const _=M&&M.trim()?M:En[0];return N.tasks.map(R=>{const ge=en(R),he=Gt(R);return{id:ge,currentStatus:he,nextStatus:_,willChange:ui(he)!==ui(_)}})},[en,Gt,N.tasks,M]),Ot=d.useMemo(()=>Ge.tasks.map(_=>{const R=en(_),ge=Gt(_);return{id:R,currentStatus:ge}}),[en,Gt,Ge.tasks]),gn=d.useMemo(()=>{if(!gt.task)return{id:null,status:""};const _=en(gt.task),R=Gt(gt.task);return{id:_?String(_):null,status:R}},[en,Gt,gt.task]),ni=d.useCallback(_=>{try{return new Date(_).toLocaleString("en-GB",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return _}},[]),Mn=d.useMemo(()=>({width:"100%",display:"flex",flexDirection:"column",position:"relative",overflow:"hidden",borderRadius:3,border:`1px solid ${Y(y.palette.primary.main,.12)}`,boxShadow:"0 20px 50px rgba(8, 58, 97, 0.12)",backgroundColor:Y(y.palette.background.paper,.94),backdropFilter:"blur(6px)",outline:"none"}),[y]),zi=d.useMemo(()=>l?Array.isArray(l)?[Mn,...l]:[Mn,l]:Mn,[Mn,l]);return d.useEffect(()=>{if(!Ke.current||X==null)return;const _=Ke.current.querySelector(`tbody tr:nth-child(${X+1})`);_==null||_.scrollIntoView({block:"nearest"})},[X]),a.jsxs(ht,{ref:A,"data-table":v,component:"section",elevation:0,square:!1,tabIndex:0,sx:zi,onKeyDown:_=>{if(pe.visible)return;const R=Xe.length-1;if(R<0)return;const ge=X??(ye.size?Math.min(...Array.from(ye)):0);if(_.key==="ArrowDown"){_.preventDefault();const he=Math.min(R,(ge??-1)+1);ae.current=!0,Me(new Set([he])),Ae(he),b&&b([Xe[he]])}else if(_.key==="ArrowUp"){_.preventDefault();const he=Math.max(0,(ge??0)-1);ae.current=!0,Me(new Set([he])),Ae(he),b&&b([Xe[he]])}else if(_.key==="Enter"){_.preventDefault();const he=ge??0;m&&Xe[he]?m([Xe[he]],Ze,Ue):p&&Xe[he]&&p(Xe[he])}else _.key==="Escape"&&(zn(),rt())},onClick:_=>_.stopPropagation(),children:[a.jsx(Te,{ref:xe,sx:{flexGrow:1,overflow:"auto",filter:Ni,transition:"filter 150ms ease",height:$e,minHeight:$e,maxHeight:$e},children:a.jsxs(gu,{stickyHeader:!0,size:"small",padding:"checkbox",ref:Ke,sx:{tableLayout:"fixed",width:"100%",borderSpacing:0,opacity:Nt,transition:"opacity 200ms ease-in-out","& thead th":{bgcolor:fi?Y(y.palette.background.paper,.98):Y(y.palette.background.paper,.94),borderBottom:`1px solid ${Y(y.palette.primary.main,.16)}`,position:"sticky",top:0,zIndex:1,backdropFilter:"blur(6px)"},"& th, & td":{color:y.palette.text.primary,borderRight:`1px solid ${Y(y.palette.primary.main,.08)}`,"&:last-of-type":{borderRight:"none"}}},children:[a.jsx(yu,{children:a.jsx(ks,{children:D.map(_=>a.jsx(Ps,{sortDirection:T===_?w??!1:!1,sx:{position:"relative",width:j[_]??180,maxWidth:j[_]??180,minWidth:j[_]??180,px:1,py:1,"&.drag-over":{bgcolor:Y(y.palette.primary.main,.12)}},className:re===_?"drag-over":void 0,children:a.jsxs(ve,{direction:"row",alignItems:"center",spacing:1,draggable:!0,onDragStart:R=>J(_,R),onDragOver:R=>$(_,R),onDrop:R=>be(_,R),onDragEnd:Fe,onClick:()=>{if(T!==_)k(_),P("asc");else{const R=gm(w);P(R),R===null&&k(null)}},sx:{cursor:"pointer",userSelect:"none"},children:[a.jsx(ue,{variant:"subtitle2",noWrap:!0,sx:{pl:1},children:i[_]??_}),a.jsx(ue,{variant:"caption",sx:{color:"text.secondary"},children:T===_?w==="asc"?"â–²":"â–¼":""}),a.jsx(Te,{sx:{flexGrow:1}}),a.jsx(cn,{size:"small","data-column-button":"true","aria-label":`Column options for ${i[_]??_}`,onClick:R=>Ye(_,R),children:a.jsx(Iu,{size:16})}),a.jsx(Te,{onMouseDown:R=>Qt(_,R),onDoubleClick:()=>xn(_),sx:{position:"absolute",top:0,right:0,height:"100%",width:6,cursor:"col-resize",zIndex:2}})]})},_))})}),a.jsx(vu,{children:Xe.length===0?a.jsx(ks,{children:a.jsx(Ps,{colSpan:D.length||1,align:"center",sx:{py:6},children:a.jsxs(ve,{spacing:1.5,alignItems:"center",sx:{color:"text.secondary"},children:[a.jsx(ue,{variant:"h4",component:"span",sx:{lineHeight:1},children:"ðŸ”Ž"}),a.jsx(ue,{variant:"body2",children:"No results found"}),a.jsx(ue,{variant:"caption",color:"text.secondary",children:"Try adjusting filters or resetting column layout."}),a.jsx(Mt,{variant:"outlined",size:"small",onClick:sn,sx:{mt:1,borderRadius:2},children:"Reset Columns"})]})})}):Xe.map((_,R)=>{const ge=(G-1)*ie+R,he=ye.has(R);return a.jsx(ks,{hover:!0,"data-row-index":ge,...v?{"data-row-id":_[v]}:{},onContextMenu:we=>Pn(we,R),onDoubleClick:we=>{we.stopPropagation(),m&&m([Xe[R]],we.screenX,we.screenY)},onClick:we=>{if(ae.current=!0,we.preventDefault(),we.shiftKey&&X!==null){const Le=Math.min(X,R),pt=Math.max(X,R),zt=new Set;for(let ln=Le;ln<=pt;ln+=1)zt.add(ln);Me(zt);return}if(we.ctrlKey||we.metaKey){Me(Le=>{const pt=new Set(Le);return pt.has(R)?pt.delete(R):pt.add(R),pt}),Ae(R);return}Me(new Set([R])),Ae(R);const Re=Xe[R];b&&b([Re]),p&&p(Re)},selected:he,sx:{position:"relative",cursor:"pointer",backgroundColor:he?Y(y.palette.primary.light,.14):R%2===0?Y(y.palette.background.paper,.9):Y(y.palette.background.default,.9),"&:hover":{backgroundColor:Y(y.palette.primary.main,.12)},"&::before":he?{content:'""',position:"absolute",top:4,bottom:4,left:2,width:3,borderRadius:999,backgroundColor:y.palette.primary.main}:void 0},children:D.map(we=>a.jsx(Ps,{"data-colkey":we,sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",px:2,py:fe==="comfortable"?1.5:1},children:String(_[we]??"")},we))},R)})})]})}),n.length>0&&a.jsxs(ve,{direction:{xs:"column",sm:"row"},spacing:2,alignItems:"center",justifyContent:"space-between",sx:{borderTop:`1px solid ${Y(y.palette.primary.main,.12)}`,bgcolor:Y(y.palette.background.paper,.92),px:3,py:2,color:"text.secondary"},children:[a.jsxs(ve,{direction:"row",spacing:3,alignItems:"center",flexWrap:"wrap",useFlexGap:!0,children:[a.jsxs(Qi,{size:"small",children:[a.jsx(eo,{id:"density-label",children:"Density"}),a.jsxs(to,{labelId:"density-label",label:"Density",value:fe,onChange:_=>Ht(_.target.value),sx:{minWidth:140},children:[a.jsx(Wt,{value:"compact",children:"Compact"}),a.jsx(Wt,{value:"comfortable",children:"Comfortable"})]})]}),a.jsxs(Qi,{size:"small",children:[a.jsx(eo,{id:"rows-label",children:"Rows"}),a.jsx(to,{labelId:"rows-label",label:"Rows",value:String(ie),onChange:_=>{Je(Number(_.target.value)),ee(1)},sx:{minWidth:120},children:[25,50,100,500].map(_=>a.jsx(Wt,{value:String(_),children:_},_))})]})]}),a.jsxs(ve,{direction:"row",spacing:2,alignItems:"center",children:[a.jsxs(ue,{variant:"body2",color:"text.secondary",children:["Page ",G," of ",tt]}),a.jsxs(ve,{direction:"row",spacing:1,children:[a.jsx(Mt,{size:"small",variant:"outlined",onClick:()=>ee(_=>Math.max(1,_-1)),disabled:G===1,sx:{borderRadius:2},children:"Prev"}),a.jsx(Mt,{size:"small",variant:"outlined",onClick:()=>ee(_=>Math.min(tt,_+1)),disabled:G===tt,sx:{borderRadius:2},children:"Next"})]})]})]}),a.jsx(di,{children:vt.visible&&vt.key&&a.jsx(mn.div,{ref:U,initial:{opacity:0,y:-4,scale:.97},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-4,scale:.97},transition:{duration:.15},style:{position:"absolute",top:vt.y,left:vt.x,width:"clamp(220px,22vw,320px)",zIndex:99999},onClick:_=>_.stopPropagation(),children:a.jsxs(ht,{elevation:10,sx:{borderRadius:2,border:`1px solid ${Y(y.palette.primary.main,.12)}`,boxShadow:"0 18px 40px rgba(8, 58, 97, 0.28)",py:1.5},children:[a.jsxs(ve,{spacing:1.5,sx:{px:2},children:[a.jsx(ue,{variant:"overline",sx:{color:y.palette.text.secondary,letterSpacing:.8,fontWeight:700},children:"Header Settings"}),a.jsx(Jt,{size:"small",placeholder:"Filter columnsâ€¦",value:Yt,onChange:_=>on(_.target.value),InputProps:{startAdornment:a.jsx(Qo,{position:"start",children:a.jsx(ns,{size:16})})}})]}),a.jsx(On,{sx:{my:1.5}}),a.jsx(Te,{sx:{maxHeight:de,overflowY:"auto",px:1.5,pb:1},children:a.jsx(ve,{spacing:.25,children:F.filter(_=>Yt.trim()?(i[_]??_).toLowerCase().includes(Yt.toLowerCase()):!0).map(_=>{const R=D.includes(_);return a.jsx(eh,{control:a.jsx(Ho,{size:"small",checked:R,onChange:()=>Pt(_)}),label:a.jsx(ue,{variant:"body2",noWrap:!0,children:i[_]??_}),sx:{m:0,px:1,py:.75,borderRadius:2,gap:1.5,alignItems:"center","&:hover":{bgcolor:Y(y.palette.primary.main,.06)},"& .MuiFormControlLabel-label":{width:"100%"}}},_)})})}),a.jsx(On,{}),a.jsxs(ve,{direction:"row",spacing:1,justifyContent:"flex-end",sx:{px:2,py:1.5},children:[a.jsx(Mt,{size:"small",variant:"outlined",onClick:()=>{const _=D.length>0;z(_?[]:F)},sx:{borderRadius:2},children:D.length>0?"Unselect All":"Select All"}),a.jsx(Mt,{size:"small",variant:"contained",onClick:sn,sx:{borderRadius:2},children:"Reset Columns"})]})]})})}),a.jsx(pm,{visible:pe.visible,x:pe.x,y:pe.y,selectedRows:Oi,clickedColumnKey:pe.clickedColumnKey,clickedRow:gi,onClose:zn,mouseScreenX:Ze,mouseScreenY:Ue,onOpenPopout:(_,R,ge)=>{m&&m(_,R,ge)},onOpenCalloutIncident:_=>{g&&g(_)},onProgressTasks:It,onProgressNotes:mi}),S&&Di.createPortal(a.jsx(di,{children:N.open&&a.jsx(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.18},onClick:Rt,style:{position:"fixed",inset:0,zIndex:12e4,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.45)",backdropFilter:"blur(6px)",padding:"16px"},children:a.jsx(mn.div,{initial:{opacity:0,y:18,scale:.96},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:18,scale:.96},transition:{duration:.18},onClick:_=>_.stopPropagation(),style:{width:"100%",maxWidth:"880px"},children:a.jsxs(Rs,{open:!0,onClose:Rt,maxWidth:"lg",PaperProps:{sx:{borderRadius:4,border:`1px solid ${Y(y.palette.primary.main,.18)}`,boxShadow:"0 40px 120px rgba(8,58,97,0.35)",backgroundImage:"linear-gradient(180deg, rgba(255,255,255,0.98), rgba(245,247,250,0.96))",overflow:"hidden"}},children:[a.jsxs(zs,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:2},children:[a.jsxs(ve,{direction:"row",spacing:2,alignItems:"center",children:[a.jsx(Te,{sx:{height:48,width:48,borderRadius:"50%",bgcolor:y.palette.primary.main,color:y.palette.primary.contrastText,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 20px rgba(8,58,97,0.35)"},children:a.jsx(ts,{size:22})}),a.jsxs("div",{children:[a.jsx(ue,{variant:"h6",fontWeight:600,color:"text.primary",children:"Progress Tasks"}),a.jsxs(ue,{variant:"body2",color:"text.secondary",children:[N.tasks.length," task",N.tasks.length===1?"":"s"," selected"]})]})]}),a.jsx(cn,{onClick:Rt,children:a.jsx(no,{size:20})})]}),a.jsxs(Os,{dividers:!0,sx:{display:"grid",gap:3,gridTemplateColumns:{lg:"1.6fr 1fr",xs:"1fr"}},children:[a.jsxs(ve,{spacing:2,children:[a.jsx(ue,{variant:"overline",sx:{color:"text.secondary",letterSpacing:1},children:"Selected Tasks"}),a.jsx(ht,{variant:"outlined",sx:{maxHeight:180,overflowY:"auto",borderRadius:3,borderColor:Y(y.palette.primary.main,.12),bgcolor:Y(y.palette.primary.main,.03),p:2},children:a.jsx(ve,{spacing:1.5,children:In.length===0?a.jsx(ue,{variant:"caption",color:"text.secondary",children:"No task identifiers."}):In.map(({id:_,currentStatus:R,nextStatus:ge},he)=>a.jsxs(ve,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",sx:{borderRadius:2,border:`1px solid ${Y(y.palette.primary.main,.12)}`,bgcolor:y.palette.background.paper,px:2,py:1.25},children:[a.jsx(ue,{variant:"subtitle2",color:"primary",noWrap:!0,children:_??"Unknown Task"}),a.jsxs(ue,{variant:"caption",color:"text.secondary",noWrap:!0,children:[R||"â€”",a.jsx(ue,{component:"span",sx:{mx:1,color:"text.disabled"},children:"â†’"}),ge]})]},_??`task-${he}`))})})]}),a.jsxs(ve,{spacing:2.5,children:[a.jsxs(Qi,{fullWidth:!0,size:"small",children:[a.jsx(eo,{id:"target-status-label",children:"Target Status"}),a.jsxs(to,{labelId:"target-status-label",label:"Target Status",value:M,onChange:_=>O(_.target.value),children:[a.jsx(Wt,{disabled:!0,value:"__CORE__",children:a.jsx(ue,{variant:"caption",sx:{fontWeight:700,color:"text.secondary"},children:"Core progression"})}),Pi.map(_=>a.jsx(Wt,{value:_,children:_},_)),a.jsx(On,{component:"li",sx:{my:.5}}),a.jsx(Wt,{disabled:!0,value:"__ADDITIONAL__",children:a.jsx(ue,{variant:"caption",sx:{fontWeight:700,color:"text.secondary"},children:"Additional statuses"})}),Dl.map(_=>a.jsx(Wt,{value:_,children:_},_))]})]}),a.jsxs(wo,{severity:"info",variant:"outlined",sx:{borderRadius:3},children:["Selected tasks will be stamped with the note below and updated to",a.jsxs("strong",{children:[" ",M," "]}),"unless they already match."]})]}),a.jsxs(ve,{spacing:1.5,sx:{gridColumn:"1 / -1"},children:[a.jsx(ue,{variant:"overline",sx:{letterSpacing:1,color:"text.secondary"},children:"Quick Note"}),a.jsx(Jt,{multiline:!0,minRows:4,value:se,onChange:_=>le(_.target.value),placeholder:"Share the next steps, blockers, or field updates for these tasksâ€¦"})]}),(ct||Be)&&a.jsx(wo,{severity:ct?"error":"success",sx:{gridColumn:"1 / -1"},children:ct||Be})]}),a.jsxs(Ns,{sx:{px:3,py:2,gap:1.5},children:[a.jsx(Mt,{variant:"outlined",onClick:Rt,disabled:Ce,sx:{borderRadius:2},children:"Cancel"}),a.jsx(Mt,{variant:"contained",onClick:Jn,disabled:!se.trim()||Ce,sx:{borderRadius:2},startIcon:Ce?a.jsx(Is,{color:"inherit",size:18,thickness:5}):void 0,children:"Save Note"})]})]})},"progress-dialog")},"progress-backdrop")}),document.body),S&&Di.createPortal(a.jsx(di,{children:Ge.open&&a.jsx(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.18},onClick:qe,style:{position:"fixed",inset:0,zIndex:12e4,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.45)",backdropFilter:"blur(6px)",padding:"16px"},children:a.jsx(mn.div,{initial:{opacity:0,y:18,scale:.96},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:18,scale:.96},transition:{duration:.18},onClick:_=>_.stopPropagation(),style:{width:"100%",maxWidth:"760px"},children:a.jsxs(Rs,{open:!0,onClose:qe,fullWidth:!0,maxWidth:"md",hideBackdrop:!0,disablePortal:!0,keepMounted:!0,PaperProps:{sx:{borderRadius:4,border:`1px solid ${Y(y.palette.primary.main,.18)}`,boxShadow:"0 32px 90px rgba(8,58,97,0.34)",backgroundImage:"linear-gradient(180deg, rgba(255,255,255,0.98), rgba(245,247,250,0.96))",overflow:"hidden"}},children:[a.jsxs(zs,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:2},children:[a.jsxs(ve,{direction:"row",spacing:2,alignItems:"center",children:[a.jsx(Te,{sx:{height:48,width:48,borderRadius:"50%",bgcolor:y.palette.primary.main,color:y.palette.primary.contrastText,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 20px rgba(8,58,97,0.35)"},children:a.jsx(Js,{size:22})}),a.jsxs(Te,{children:[a.jsx(ue,{variant:"h6",fontWeight:600,color:"text.primary",children:"Bulk Progress Notes"}),a.jsxs(ue,{variant:"body2",color:"text.secondary",children:[Ge.tasks.length," task",Ge.tasks.length===1?"":"s"," selected"]})]})]}),a.jsx(cn,{onClick:qe,"aria-label":"Close bulk notes dialog",children:a.jsx(no,{size:20})})]}),a.jsxs(Os,{dividers:!0,sx:{display:"flex",flexDirection:"column",gap:3},children:[a.jsxs(ve,{spacing:2,children:[a.jsx(ue,{variant:"overline",sx:{color:"text.secondary",letterSpacing:1},children:"Selected Tasks"}),a.jsx(ht,{variant:"outlined",sx:{maxHeight:180,overflowY:"auto",borderRadius:3,borderColor:Y(y.palette.primary.main,.12),bgcolor:Y(y.palette.primary.main,.03),p:2},children:a.jsx(ve,{spacing:1.5,children:Ot.length===0?a.jsx(ue,{variant:"caption",color:"text.secondary",children:"No task identifiers."}):Ot.map(({id:_,currentStatus:R},ge)=>a.jsxs(ve,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",sx:{borderRadius:2,border:`1px solid ${Y(y.palette.primary.main,.12)}`,bgcolor:y.palette.background.paper,px:2,py:1.25},children:[a.jsx(ue,{variant:"subtitle2",color:"primary",noWrap:!0,children:_??"Unknown Task"}),a.jsx(ei,{size:"small",label:R||"-",variant:"outlined",sx:{borderRadius:2}})]},_??`multi-note-${ge}`))})})]}),a.jsxs(ve,{spacing:1.5,children:[a.jsx(ue,{variant:"overline",sx:{color:"text.secondary",letterSpacing:1},children:"Quick Note"}),a.jsx(Jt,{multiline:!0,minRows:4,value:me,onChange:_=>Pe(_.target.value),placeholder:"Share context that applies to all selected tasksâ€¦"}),a.jsx(ue,{variant:"caption",color:"text.secondary",children:"This note will be added to each selected task without changing its current status."})]}),(st||At)&&a.jsx(wo,{severity:st?"error":"success",children:st||At})]}),a.jsxs(Ns,{sx:{px:3,py:2,gap:1.5},children:[a.jsx(Mt,{variant:"outlined",onClick:qe,disabled:ke,sx:{borderRadius:2},children:"Cancel"}),a.jsx(Mt,{variant:"contained",onClick:Ri,disabled:!me.trim()||ke,sx:{borderRadius:2},startIcon:ke?a.jsx(Is,{color:"inherit",size:18,thickness:5}):void 0,children:"Save Note"})]})]})},"progress-note-dialog")},"progress-note-backdrop")}),document.body),S&&Di.createPortal(a.jsx(di,{children:gt.open&&a.jsx(mn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.18},onClick:wn,style:{position:"fixed",inset:0,zIndex:12e4,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.45)",backdropFilter:"blur(6px)",padding:"16px"},children:a.jsx(mn.div,{initial:{opacity:0,y:18,scale:.96},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:18,scale:.96},transition:{duration:.18},onClick:_=>_.stopPropagation(),style:{width:"100%",maxWidth:"960px"},children:a.jsxs(Rs,{open:!0,onClose:wn,fullWidth:!0,maxWidth:"lg",hideBackdrop:!0,disablePortal:!0,keepMounted:!0,PaperProps:{sx:{borderRadius:4,border:`1px solid ${Y(y.palette.primary.main,.18)}`,boxShadow:"0 32px 90px rgba(8,58,97,0.34)",backgroundImage:"linear-gradient(180deg, rgba(255,255,255,0.98), rgba(245,247,250,0.96))",overflow:"hidden"}},children:[a.jsxs(zs,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:2},children:[a.jsxs(ve,{direction:"row",spacing:2,alignItems:"center",children:[a.jsx(Te,{sx:{height:48,width:48,borderRadius:"50%",bgcolor:y.palette.primary.main,color:y.palette.primary.contrastText,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 20px rgba(8,58,97,0.35)"},children:a.jsx(Js,{size:22})}),a.jsxs(Te,{children:[a.jsx(ue,{variant:"h6",fontWeight:600,color:"text.primary",children:"Progress Notes"}),a.jsx(ue,{variant:"body2",color:"text.secondary",children:gn.id?`Task ${gn.id}`:"Selected task"})]})]}),a.jsx(cn,{onClick:wn,"aria-label":"Close progress note dialog",children:a.jsx(no,{size:20})})]}),a.jsxs(Os,{dividers:!0,sx:{display:"grid",gap:3,gridTemplateColumns:{lg:"1.6fr 1fr",xs:"1fr"}},children:[a.jsxs(ve,{spacing:2,children:[a.jsx(ue,{variant:"overline",sx:{color:"text.secondary",letterSpacing:1},children:"Existing Notes"}),a.jsx(ht,{variant:"outlined",sx:{maxHeight:240,overflowY:"auto",borderRadius:3,borderColor:Y(y.palette.primary.main,.12),bgcolor:Y(y.palette.primary.main,.03),p:2},children:a.jsx(ve,{spacing:1.5,children:gt.notes.length===0?a.jsx(ue,{variant:"body2",color:"text.secondary",children:"No progress notes captured yet."}):gt.notes.map((_,R)=>a.jsxs(ve,{spacing:1,sx:{borderRadius:2,border:`1px solid ${Y(y.palette.primary.main,.12)}`,bgcolor:y.palette.background.paper,px:2,py:1.5,boxShadow:"0 10px 24px rgba(8,58,97,0.1)"},children:[a.jsxs(ve,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[a.jsx(ue,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:ni(_.ts)}),a.jsx(ei,{size:"small",label:_.status||"Logged",color:"primary",sx:{borderRadius:2}})]}),_.source&&a.jsxs(ue,{variant:"caption",sx:{textTransform:"uppercase",letterSpacing:.6,color:"text.secondary"},children:["Source: ",_.source]}),a.jsx(ue,{variant:"body2",sx:{whiteSpace:"pre-wrap",color:"text.primary"},children:_.text})]},`${_.ts}-${R}`))})})]}),a.jsxs(ve,{spacing:2,children:[a.jsx(ue,{variant:"overline",sx:{color:"text.secondary",letterSpacing:1},children:"Selected Task"}),a.jsx(ht,{variant:"outlined",sx:{borderRadius:3,borderColor:Y(y.palette.primary.main,.12),bgcolor:Y(y.palette.primary.main,.03),p:2},children:a.jsxs(ve,{direction:"row",spacing:2,alignItems:"center",justifyContent:"space-between",sx:{borderRadius:2,border:`1px solid ${Y(y.palette.primary.main,.12)}`,bgcolor:y.palette.background.paper,px:2,py:1.25},children:[a.jsx(ue,{variant:"subtitle2",color:"primary",noWrap:!0,children:gn.id??"Unknown Task"}),a.jsx(ei,{size:"small",label:gn.status||"â€”",variant:"outlined",sx:{borderRadius:2}})]})}),a.jsxs(Te,{sx:{borderRadius:3,border:`1px dashed ${Y(y.palette.primary.main,.25)}`,bgcolor:Y(y.palette.primary.main,.06),p:3},children:[a.jsxs(ue,{variant:"body2",color:"primary",children:["Current status remains",a.jsx(ue,{component:"span",sx:{fontWeight:600,ml:.5},children:gn.status||"Unknown"}),"."]}),a.jsx(ue,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1.5},children:"Add a quick note without progressing the task status."})]})]}),a.jsxs(ve,{spacing:1.5,sx:{gridColumn:"1 / -1"},children:[a.jsx(ue,{variant:"overline",sx:{color:"text.secondary",letterSpacing:1},children:"Quick Note"}),a.jsx(Jt,{multiline:!0,minRows:4,value:Et,onChange:_=>Ve(_.target.value),placeholder:"Share new updates, blockers, or field activityâ€¦"}),a.jsx(ue,{variant:"caption",color:"text.secondary",children:"This note will be appended to the task timeline immediately."})]}),(mt||yt)&&a.jsx(wo,{severity:mt?"error":"success",sx:{gridColumn:"1 / -1"},children:mt||yt})]}),a.jsxs(Ns,{sx:{px:3,py:2,gap:1.5},children:[a.jsx(Mt,{variant:"outlined",onClick:wn,disabled:He,sx:{borderRadius:2},children:"Close"}),a.jsx(Mt,{variant:"contained",onClick:Vn,disabled:!Et.trim()||He,sx:{borderRadius:2},startIcon:He?a.jsx(Is,{color:"inherit",size:18,thickness:5}):void 0,children:"Save Note"})]})]})},"progress-note-single-dialog")},"progress-note-single-backdrop")}),document.body)]})}const Ea=["taskId","taskStatus","resourceName","commitmentType","postCode","customerAddress","taskType","primarySkill","importanceScore","taskCreated","appointmentStartDate"];function ym(n){return n.replace(/[_\-]+/g," ").replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/\s+/g," ").trim().replace(/^./,i=>i.toUpperCase())}function vm({data:n,selectedTasks:i,onSelectionChange:s}){const l=$t(),p={height:"100%",display:"flex",flexDirection:"column",borderRadius:3,px:3,py:2.5,border:`1px solid ${Y(l.palette.primary.main,.18)}`,boxShadow:"0 18px 46px rgba(8,58,97,0.18)",backgroundImage:"none"},h=d.useMemo(()=>{if(!n||n.length===0)return{};const m=new Set;n.forEach(v=>Object.keys(v).forEach(x=>m.add(x)));const g=[...Ea.filter(v=>m.has(v)),...[...m].filter(v=>!Ea.includes(v))],b={};return g.forEach(v=>b[v]=ym(v)),b},[n]),u=d.useMemo(()=>i!=null&&i.length?new Set(i.map(m=>String(m.taskId))):new Set,[i]);return!n||n.length===0?a.jsx(ht,{elevation:0,sx:p,children:a.jsx(ve,{spacing:1,alignItems:"center",justifyContent:"center",sx:{flex:1},children:a.jsx(ue,{variant:"body2",color:"text.secondary",textAlign:"center",children:"No tasks loaded yet. Please define filters and press Search."})})}):a.jsx(ht,{elevation:0,sx:p,children:a.jsx(Te,{sx:{flex:1,display:"flex",flexDirection:"column"},children:a.jsx(yr,{rows:n,headerNames:h,sx:{height:"100%"},tableHeight:"100%",rowIdKey:"taskId",controlledSelectedRowIds:u,onSelectionChange:m=>s(m)})})})}const Ra=["resourceId","name","status","calloutGroup","primarySkill","availableAgainAt"];function xm(n){return n.replace(/[_\-]+/g," ").replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/\s+/g," ").trim().replace(/^./,i=>i.toUpperCase())}function bm({data:n,selectedResources:i,onSelectionChange:s}){const l=$t(),p={height:"100%",display:"flex",flexDirection:"column",borderRadius:3,px:3,py:2.5,border:`1px solid ${Y(l.palette.primary.main,.18)}`,boxShadow:"0 18px 46px rgba(8,58,97,0.18)",backgroundImage:"none"},h=d.useMemo(()=>{if(!(n!=null&&n.length))return{};const m=new Set;n.forEach(v=>Object.keys(v).forEach(x=>m.add(x)));const g=[...Ra.filter(v=>m.has(v)),...[...m].filter(v=>!Ra.includes(v))],b={};return g.forEach(v=>b[v]=xm(v)),b},[n]),u=d.useMemo(()=>new Set(i.map(m=>String(m.resourceId))),[i]);return!n||n.length===0?a.jsx(ht,{elevation:0,sx:p,children:a.jsx(ve,{spacing:1,alignItems:"center",justifyContent:"center",sx:{flex:1},children:a.jsx(ue,{variant:"body2",color:"text.secondary",textAlign:"center",children:"No resources loaded. Please define filters and press Search."})})}):a.jsx(ht,{elevation:0,sx:p,children:a.jsx(Te,{sx:{flex:1,display:"flex",flexDirection:"column"},children:a.jsx(yr,{rows:n,headerNames:h,sx:{height:"100%"},tableHeight:"100%",rowIdKey:"resourceId",controlledSelectedRowIds:u,onSelectionChange:m=>s(m)})})})}const is=d.createContext(null);is.displayName="PanelGroupContext";const Zt={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},vr=10,pi=d.useLayoutEffect,Na=wu.useId,_m=typeof Na=="function"?Na:()=>null;let Sm=0;function xr(n=null){const i=_m(),s=d.useRef(n||i||null);return s.current===null&&(s.current=""+Sm++),n??s.current}function Ll({children:n,className:i="",collapsedSize:s,collapsible:l,defaultSize:p,forwardedRef:h,id:u,maxSize:m,minSize:g,onCollapse:b,onExpand:v,onResize:x,order:y,style:S,tagName:T="div",...k}){const w=d.useContext(is);if(w===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:P,expandPanel:F,getPanelSize:D,getPanelStyle:z,groupId:j,isPanelCollapsed:K,reevaluatePanelConstraints:H,registerPanel:oe,resizePanel:W,unregisterPanel:te}=w,q=xr(u),B=d.useRef({callbacks:{onCollapse:b,onExpand:v,onResize:x},constraints:{collapsedSize:s,collapsible:l,defaultSize:p,maxSize:m,minSize:g},id:q,idIsFromProps:u!==void 0,order:y});d.useRef({didLogMissingDefaultSizeWarning:!1}),pi(()=>{const{callbacks:re,constraints:Se}=B.current,ye={...Se};B.current.id=q,B.current.idIsFromProps=u!==void 0,B.current.order=y,re.onCollapse=b,re.onExpand=v,re.onResize=x,Se.collapsedSize=s,Se.collapsible=l,Se.defaultSize=p,Se.maxSize=m,Se.minSize=g,(ye.collapsedSize!==Se.collapsedSize||ye.collapsible!==Se.collapsible||ye.maxSize!==Se.maxSize||ye.minSize!==Se.minSize)&&H(B.current,ye)}),pi(()=>{const re=B.current;return oe(re),()=>{te(re)}},[y,q,oe,te]),d.useImperativeHandle(h,()=>({collapse:()=>{P(B.current)},expand:re=>{F(B.current,re)},getId(){return q},getSize(){return D(B.current)},isCollapsed(){return K(B.current)},isExpanded(){return!K(B.current)},resize:re=>{W(B.current,re)}}),[P,F,D,K,q,W]);const ce=z(B.current,p);return d.createElement(T,{...k,children:n,className:i,id:q,style:{...ce,...S},[Zt.groupId]:j,[Zt.panel]:"",[Zt.panelCollapsible]:l||void 0,[Zt.panelId]:q,[Zt.panelSize]:parseFloat(""+ce.flexGrow).toFixed(1)})}const qi=d.forwardRef((n,i)=>d.createElement(Ll,{...n,forwardedRef:i}));Ll.displayName="Panel";qi.displayName="forwardRef(Panel)";let Ys=null,Oo=-1,Kn=null;function Cm(n,i,s){const l=(i&zl)!==0,p=(i&jl)!==0,h=(i&Bl)!==0,u=(i&Fl)!==0;if(i){if(l)return h?"se-resize":u?"ne-resize":"e-resize";if(p)return h?"sw-resize":u?"nw-resize":"w-resize";if(h)return"s-resize";if(u)return"n-resize"}switch(n){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function wm(){Kn!==null&&(document.head.removeChild(Kn),Ys=null,Kn=null,Oo=-1)}function Bs(n,i,s){var l,p;const h=Cm(n,i);if(Ys!==h){if(Ys=h,Kn===null&&(Kn=document.createElement("style"),document.head.appendChild(Kn)),Oo>=0){var u;(u=Kn.sheet)===null||u===void 0||u.removeRule(Oo)}Oo=(l=(p=Kn.sheet)===null||p===void 0?void 0:p.insertRule(`*{cursor: ${h} !important;}`))!==null&&l!==void 0?l:-1}}function El(n){return n.type==="keydown"}function Rl(n){return n.type.startsWith("pointer")}function Nl(n){return n.type.startsWith("mouse")}function os(n){if(Rl(n)){if(n.isPrimary)return{x:n.clientX,y:n.clientY}}else if(Nl(n))return{x:n.clientX,y:n.clientY};return{x:1/0,y:1/0}}function Tm(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function Am(n,i,s){return n.x<i.x+i.width&&n.x+n.width>i.x&&n.y<i.y+i.height&&n.y+n.height>i.y}function km(n,i){if(n===i)throw new Error("Cannot compare node with itself");const s={a:ja(n),b:ja(i)};let l;for(;s.a.at(-1)===s.b.at(-1);)n=s.a.pop(),i=s.b.pop(),l=n;et(l,"Stacking order can only be calculated for elements with a common ancestor");const p={a:za(Oa(s.a)),b:za(Oa(s.b))};if(p.a===p.b){const h=l.childNodes,u={a:s.a.at(-1),b:s.b.at(-1)};let m=h.length;for(;m--;){const g=h[m];if(g===u.a)return 1;if(g===u.b)return-1}}return Math.sign(p.a-p.b)}const Pm=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Im(n){var i;const s=getComputedStyle((i=Ol(n))!==null&&i!==void 0?i:n).display;return s==="flex"||s==="inline-flex"}function Mm(n){const i=getComputedStyle(n);return!!(i.position==="fixed"||i.zIndex!=="auto"&&(i.position!=="static"||Im(n))||+i.opacity<1||"transform"in i&&i.transform!=="none"||"webkitTransform"in i&&i.webkitTransform!=="none"||"mixBlendMode"in i&&i.mixBlendMode!=="normal"||"filter"in i&&i.filter!=="none"||"webkitFilter"in i&&i.webkitFilter!=="none"||"isolation"in i&&i.isolation==="isolate"||Pm.test(i.willChange)||i.webkitOverflowScrolling==="touch")}function Oa(n){let i=n.length;for(;i--;){const s=n[i];if(et(s,"Missing node"),Mm(s))return s}return null}function za(n){return n&&Number(getComputedStyle(n).zIndex)||0}function ja(n){const i=[];for(;n;)i.push(n),n=Ol(n);return i}function Ol(n){const{parentNode:i}=n;return i&&i instanceof ShadowRoot?i.host:i}const zl=1,jl=2,Bl=4,Fl=8,Dm=Tm()==="coarse";let kn=[],Li=!1,Xn=new Map,ss=new Map;const so=new Set;function Lm(n,i,s,l,p){var h;const{ownerDocument:u}=i,m={direction:s,element:i,hitAreaMargins:l,setResizeHandlerState:p},g=(h=Xn.get(u))!==null&&h!==void 0?h:0;return Xn.set(u,g+1),so.add(m),Jo(),function(){var v;ss.delete(n),so.delete(m);const x=(v=Xn.get(u))!==null&&v!==void 0?v:1;if(Xn.set(u,x-1),Jo(),x===1&&Xn.delete(u),kn.includes(m)){const y=kn.indexOf(m);y>=0&&kn.splice(y,1),rs(),p("up",!0,null)}}}function Em(n){const{target:i}=n,{x:s,y:l}=os(n);Li=!0,br({target:i,x:s,y:l}),Jo(),kn.length>0&&(Vo("down",n),rs(),n.preventDefault(),Wl(i)||n.stopImmediatePropagation())}function Fs(n){const{x:i,y:s}=os(n);if(Li&&n.type!=="pointerleave"&&n.buttons===0&&(Li=!1,Vo("up",n)),!Li){const{target:l}=n;br({target:l,x:i,y:s})}Vo("move",n),rs(),kn.length>0&&n.preventDefault()}function Ws(n){const{target:i}=n,{x:s,y:l}=os(n);ss.clear(),Li=!1,kn.length>0&&(n.preventDefault(),Wl(i)||n.stopImmediatePropagation()),Vo("up",n),br({target:i,x:s,y:l}),rs(),Jo()}function Wl(n){let i=n;for(;i;){if(i.hasAttribute(Zt.resizeHandle))return!0;i=i.parentElement}return!1}function br({target:n,x:i,y:s}){kn.splice(0);let l=null;(n instanceof HTMLElement||n instanceof SVGElement)&&(l=n),so.forEach(p=>{const{element:h,hitAreaMargins:u}=p,m=h.getBoundingClientRect(),{bottom:g,left:b,right:v,top:x}=m,y=Dm?u.coarse:u.fine;if(i>=b-y&&i<=v+y&&s>=x-y&&s<=g+y){if(l!==null&&document.contains(l)&&h!==l&&!h.contains(l)&&!l.contains(h)&&km(l,h)>0){let T=l,k=!1;for(;T&&!T.contains(h);){if(Am(T.getBoundingClientRect(),m)){k=!0;break}T=T.parentElement}if(k)return}kn.push(p)}})}function Zs(n,i){ss.set(n,i)}function rs(){let n=!1,i=!1;kn.forEach(l=>{const{direction:p}=l;p==="horizontal"?n=!0:i=!0});let s=0;ss.forEach(l=>{s|=l}),n&&i?Bs("intersection",s):n?Bs("horizontal",s):i?Bs("vertical",s):wm()}let $s;function Jo(){var n;(n=$s)===null||n===void 0||n.abort(),$s=new AbortController;const i={capture:!0,signal:$s.signal};so.size&&(Li?(kn.length>0&&Xn.forEach((s,l)=>{const{body:p}=l;s>0&&(p.addEventListener("contextmenu",Ws,i),p.addEventListener("pointerleave",Fs,i),p.addEventListener("pointermove",Fs,i))}),Xn.forEach((s,l)=>{const{body:p}=l;p.addEventListener("pointerup",Ws,i),p.addEventListener("pointercancel",Ws,i)})):Xn.forEach((s,l)=>{const{body:p}=l;s>0&&(p.addEventListener("pointerdown",Em,i),p.addEventListener("pointermove",Fs,i))}))}function Vo(n,i){so.forEach(s=>{const{setResizeHandlerState:l}=s,p=kn.includes(s);l(n,p,i)})}function Rm(){const[n,i]=d.useState(0);return d.useCallback(()=>i(s=>s+1),[])}function et(n,i){if(!n)throw console.error(i),Error(i)}function hi(n,i,s=vr){return n.toFixed(s)===i.toFixed(s)?0:n>i?1:-1}function $n(n,i,s=vr){return hi(n,i,s)===0}function vn(n,i,s){return hi(n,i,s)===0}function Nm(n,i,s){if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++){const p=n[l],h=i[l];if(!vn(p,h,s))return!1}return!0}function Ii({panelConstraints:n,panelIndex:i,size:s}){const l=n[i];et(l!=null,`Panel constraints not found for index ${i}`);let{collapsedSize:p=0,collapsible:h,maxSize:u=100,minSize:m=0}=l;if(hi(s,m)<0)if(h){const g=(p+m)/2;hi(s,g)<0?s=p:s=m}else s=m;return s=Math.min(u,s),s=parseFloat(s.toFixed(vr)),s}function Ki({delta:n,initialLayout:i,panelConstraints:s,pivotIndices:l,prevLayout:p,trigger:h}){if(vn(n,0))return i;const u=[...i],[m,g]=l;et(m!=null,"Invalid first pivot index"),et(g!=null,"Invalid second pivot index");let b=0;if(h==="keyboard"){{const x=n<0?g:m,y=s[x];et(y,`Panel constraints not found for index ${x}`);const{collapsedSize:S=0,collapsible:T,minSize:k=0}=y;if(T){const w=i[x];if(et(w!=null,`Previous layout not found for panel index ${x}`),vn(w,S)){const P=k-w;hi(P,Math.abs(n))>0&&(n=n<0?0-P:P)}}}{const x=n<0?m:g,y=s[x];et(y,`No panel constraints found for index ${x}`);const{collapsedSize:S=0,collapsible:T,minSize:k=0}=y;if(T){const w=i[x];if(et(w!=null,`Previous layout not found for panel index ${x}`),vn(w,k)){const P=w-S;hi(P,Math.abs(n))>0&&(n=n<0?0-P:P)}}}}{const x=n<0?1:-1;let y=n<0?g:m,S=0;for(;;){const k=i[y];et(k!=null,`Previous layout not found for panel index ${y}`);const P=Ii({panelConstraints:s,panelIndex:y,size:100})-k;if(S+=P,y+=x,y<0||y>=s.length)break}const T=Math.min(Math.abs(n),Math.abs(S));n=n<0?0-T:T}{let y=n<0?m:g;for(;y>=0&&y<s.length;){const S=Math.abs(n)-Math.abs(b),T=i[y];et(T!=null,`Previous layout not found for panel index ${y}`);const k=T-S,w=Ii({panelConstraints:s,panelIndex:y,size:k});if(!vn(T,w)&&(b+=T-w,u[y]=w,b.toFixed(3).localeCompare(Math.abs(n).toFixed(3),void 0,{numeric:!0})>=0))break;n<0?y--:y++}}if(Nm(p,u))return p;{const x=n<0?g:m,y=i[x];et(y!=null,`Previous layout not found for panel index ${x}`);const S=y+b,T=Ii({panelConstraints:s,panelIndex:x,size:S});if(u[x]=T,!vn(T,S)){let k=S-T,P=n<0?g:m;for(;P>=0&&P<s.length;){const F=u[P];et(F!=null,`Previous layout not found for panel index ${P}`);const D=F+k,z=Ii({panelConstraints:s,panelIndex:P,size:D});if(vn(F,z)||(k-=z-F,u[P]=z),vn(k,0))break;n>0?P--:P++}}}const v=u.reduce((x,y)=>y+x,0);return vn(v,100)?u:p}function Om({layout:n,panelsArray:i,pivotIndices:s}){let l=0,p=100,h=0,u=0;const m=s[0];et(m!=null,"No pivot index found"),i.forEach((x,y)=>{const{constraints:S}=x,{maxSize:T=100,minSize:k=0}=S;y===m?(l=k,p=T):(h+=k,u+=T)});const g=Math.min(p,100-h),b=Math.max(l,100-u),v=n[m];return{valueMax:g,valueMin:b,valueNow:v}}function ro(n,i=document){return Array.from(i.querySelectorAll(`[${Zt.resizeHandleId}][data-panel-group-id="${n}"]`))}function Zl(n,i,s=document){const p=ro(n,s).findIndex(h=>h.getAttribute(Zt.resizeHandleId)===i);return p??null}function $l(n,i,s){const l=Zl(n,i,s);return l!=null?[l,l+1]:[-1,-1]}function zm(n){return n instanceof HTMLElement?!0:typeof n=="object"&&n!==null&&"tagName"in n&&"getAttribute"in n}function Hl(n,i=document){if(zm(i)&&i.dataset.panelGroupId==n)return i;const s=i.querySelector(`[data-panel-group][data-panel-group-id="${n}"]`);return s||null}function as(n,i=document){const s=i.querySelector(`[${Zt.resizeHandleId}="${n}"]`);return s||null}function jm(n,i,s,l=document){var p,h,u,m;const g=as(i,l),b=ro(n,l),v=g?b.indexOf(g):-1,x=(p=(h=s[v])===null||h===void 0?void 0:h.id)!==null&&p!==void 0?p:null,y=(u=(m=s[v+1])===null||m===void 0?void 0:m.id)!==null&&u!==void 0?u:null;return[x,y]}function Bm({committedValuesRef:n,eagerValuesRef:i,groupId:s,layout:l,panelDataArray:p,panelGroupElement:h,setLayout:u}){d.useRef({didWarnAboutMissingResizeHandle:!1}),pi(()=>{if(!h)return;const m=ro(s,h);for(let g=0;g<p.length-1;g++){const{valueMax:b,valueMin:v,valueNow:x}=Om({layout:l,panelsArray:p,pivotIndices:[g,g+1]}),y=m[g];if(y!=null){const S=p[g];et(S,`No panel data found for index "${g}"`),y.setAttribute("aria-controls",S.id),y.setAttribute("aria-valuemax",""+Math.round(b)),y.setAttribute("aria-valuemin",""+Math.round(v)),y.setAttribute("aria-valuenow",x!=null?""+Math.round(x):"")}}return()=>{m.forEach((g,b)=>{g.removeAttribute("aria-controls"),g.removeAttribute("aria-valuemax"),g.removeAttribute("aria-valuemin"),g.removeAttribute("aria-valuenow")})}},[s,l,p,h]),d.useEffect(()=>{if(!h)return;const m=i.current;et(m,"Eager values not found");const{panelDataArray:g}=m,b=Hl(s,h);et(b!=null,`No group found for id "${s}"`);const v=ro(s,h);et(v,`No resize handles found for group id "${s}"`);const x=v.map(y=>{const S=y.getAttribute(Zt.resizeHandleId);et(S,"Resize handle element has no handle id attribute");const[T,k]=jm(s,S,g,h);if(T==null||k==null)return()=>{};const w=P=>{if(!P.defaultPrevented)switch(P.key){case"Enter":{P.preventDefault();const F=g.findIndex(D=>D.id===T);if(F>=0){const D=g[F];et(D,`No panel data found for index ${F}`);const z=l[F],{collapsedSize:j=0,collapsible:K,minSize:H=0}=D.constraints;if(z!=null&&K){const oe=Ki({delta:vn(z,j)?H-j:j-z,initialLayout:l,panelConstraints:g.map(W=>W.constraints),pivotIndices:$l(s,S,h),prevLayout:l,trigger:"keyboard"});l!==oe&&u(oe)}}break}}};return y.addEventListener("keydown",w),()=>{y.removeEventListener("keydown",w)}});return()=>{x.forEach(y=>y())}},[h,n,i,s,l,p,u])}function Ba(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s]!==i[s])return!1;return!0}function Gl(n,i){const s=n==="horizontal",{x:l,y:p}=os(i);return s?l:p}function Fm(n,i,s,l,p){const h=s==="horizontal",u=as(i,p);et(u,`No resize handle element found for id "${i}"`);const m=u.getAttribute(Zt.groupId);et(m,"Resize handle element has no group id attribute");let{initialCursorPosition:g}=l;const b=Gl(s,n),v=Hl(m,p);et(v,`No group element found for id "${m}"`);const x=v.getBoundingClientRect(),y=h?x.width:x.height;return(b-g)/y*100}function Wm(n,i,s,l,p,h){if(El(n)){const u=s==="horizontal";let m=0;n.shiftKey?m=100:p!=null?m=p:m=10;let g=0;switch(n.key){case"ArrowDown":g=u?0:m;break;case"ArrowLeft":g=u?-m:0;break;case"ArrowRight":g=u?m:0;break;case"ArrowUp":g=u?0:-m;break;case"End":g=100;break;case"Home":g=-100;break}return g}else return l==null?0:Fm(n,i,s,l,h)}function Zm({panelDataArray:n}){const i=Array(n.length),s=n.map(h=>h.constraints);let l=0,p=100;for(let h=0;h<n.length;h++){const u=s[h];et(u,`Panel constraints not found for index ${h}`);const{defaultSize:m}=u;m!=null&&(l++,i[h]=m,p-=m)}for(let h=0;h<n.length;h++){const u=s[h];et(u,`Panel constraints not found for index ${h}`);const{defaultSize:m}=u;if(m!=null)continue;const g=n.length-l,b=p/g;l++,i[h]=b,p-=b}return i}function Ti(n,i,s){i.forEach((l,p)=>{const h=n[p];et(h,`Panel data not found for index ${p}`);const{callbacks:u,constraints:m,id:g}=h,{collapsedSize:b=0,collapsible:v}=m,x=s[g];if(x==null||l!==x){s[g]=l;const{onCollapse:y,onExpand:S,onResize:T}=u;T&&T(l,x),v&&(y||S)&&(S&&(x==null||$n(x,b))&&!$n(l,b)&&S(),y&&(x==null||!$n(x,b))&&$n(l,b)&&y())}})}function Po(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s]!=i[s])return!1;return!0}function $m({defaultSize:n,dragState:i,layout:s,panelData:l,panelIndex:p,precision:h=3}){const u=s[p];let m;return u==null?m=n!=null?n.toFixed(h):"1":l.length===1?m="1":m=u.toFixed(h),{flexBasis:0,flexGrow:m,flexShrink:1,overflow:"hidden",pointerEvents:i!==null?"none":void 0}}function Hm(n,i=10){let s=null;return(...p)=>{s!==null&&clearTimeout(s),s=setTimeout(()=>{n(...p)},i)}}function Fa(n){try{if(typeof localStorage<"u")n.getItem=i=>localStorage.getItem(i),n.setItem=(i,s)=>{localStorage.setItem(i,s)};else throw new Error("localStorage not supported in this environment")}catch(i){console.error(i),n.getItem=()=>null,n.setItem=()=>{}}}function Jl(n){return`react-resizable-panels:${n}`}function Vl(n){return n.map(i=>{const{constraints:s,id:l,idIsFromProps:p,order:h}=i;return p?l:h?`${h}:${JSON.stringify(s)}`:JSON.stringify(s)}).sort((i,s)=>i.localeCompare(s)).join(",")}function Ul(n,i){try{const s=Jl(n),l=i.getItem(s);if(l){const p=JSON.parse(l);if(typeof p=="object"&&p!=null)return p}}catch{}return null}function Gm(n,i,s){var l,p;const h=(l=Ul(n,s))!==null&&l!==void 0?l:{},u=Vl(i);return(p=h[u])!==null&&p!==void 0?p:null}function Jm(n,i,s,l,p){var h;const u=Jl(n),m=Vl(i),g=(h=Ul(n,p))!==null&&h!==void 0?h:{};g[m]={expandToSizes:Object.fromEntries(s.entries()),layout:l};try{p.setItem(u,JSON.stringify(g))}catch(b){console.error(b)}}function Wa({layout:n,panelConstraints:i}){const s=[...n],l=s.reduce((h,u)=>h+u,0);if(s.length!==i.length)throw Error(`Invalid ${i.length} panel layout: ${s.map(h=>`${h}%`).join(", ")}`);if(!vn(l,100)&&s.length>0)for(let h=0;h<i.length;h++){const u=s[h];et(u!=null,`No layout data found for index ${h}`);const m=100/l*u;s[h]=m}let p=0;for(let h=0;h<i.length;h++){const u=s[h];et(u!=null,`No layout data found for index ${h}`);const m=Ii({panelConstraints:i,panelIndex:h,size:u});u!=m&&(p+=u-m,s[h]=m)}if(!vn(p,0))for(let h=0;h<i.length;h++){const u=s[h];et(u!=null,`No layout data found for index ${h}`);const m=u+p,g=Ii({panelConstraints:i,panelIndex:h,size:m});if(u!==g&&(p-=g-u,s[h]=g,vn(p,0)))break}return s}const Vm=100,Xi={getItem:n=>(Fa(Xi),Xi.getItem(n)),setItem:(n,i)=>{Fa(Xi),Xi.setItem(n,i)}},Za={};function ql({autoSaveId:n=null,children:i,className:s="",direction:l,forwardedRef:p,id:h=null,onLayout:u=null,keyboardResizeBy:m=null,storage:g=Xi,style:b,tagName:v="div",...x}){const y=xr(h),S=d.useRef(null),[T,k]=d.useState(null),[w,P]=d.useState([]),F=Rm(),D=d.useRef({}),z=d.useRef(new Map),j=d.useRef(0),K=d.useRef({autoSaveId:n,direction:l,dragState:T,id:y,keyboardResizeBy:m,onLayout:u,storage:g}),H=d.useRef({layout:w,panelDataArray:[],panelDataArrayChanged:!1});d.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),d.useImperativeHandle(p,()=>({getId:()=>K.current.id,getLayout:()=>{const{layout:N}=H.current;return N},setLayout:N=>{const{onLayout:V}=K.current,{layout:M,panelDataArray:O}=H.current,se=Wa({layout:N,panelConstraints:O.map(le=>le.constraints)});Ba(M,se)||(P(se),H.current.layout=se,V&&V(se),Ti(O,se,D.current))}}),[]),pi(()=>{K.current.autoSaveId=n,K.current.direction=l,K.current.dragState=T,K.current.id=y,K.current.onLayout=u,K.current.storage=g}),Bm({committedValuesRef:K,eagerValuesRef:H,groupId:y,layout:w,panelDataArray:H.current.panelDataArray,setLayout:P,panelGroupElement:S.current}),d.useEffect(()=>{const{panelDataArray:N}=H.current;if(n){if(w.length===0||w.length!==N.length)return;let V=Za[n];V==null&&(V=Hm(Jm,Vm),Za[n]=V);const M=[...N],O=new Map(z.current);V(n,M,O,w,g)}},[n,w,g]),d.useEffect(()=>{});const oe=d.useCallback(N=>{const{onLayout:V}=K.current,{layout:M,panelDataArray:O}=H.current;if(N.constraints.collapsible){const se=O.map(ct=>ct.constraints),{collapsedSize:le=0,panelSize:Ce,pivotIndices:We}=ai(O,N,M);if(et(Ce!=null,`Panel size not found for panel "${N.id}"`),!$n(Ce,le)){z.current.set(N.id,Ce);const Ne=ki(O,N)===O.length-1?Ce-le:le-Ce,Be=Ki({delta:Ne,initialLayout:M,panelConstraints:se,pivotIndices:We,prevLayout:M,trigger:"imperative-api"});Po(M,Be)||(P(Be),H.current.layout=Be,V&&V(Be),Ti(O,Be,D.current))}}},[]),W=d.useCallback((N,V)=>{const{onLayout:M}=K.current,{layout:O,panelDataArray:se}=H.current;if(N.constraints.collapsible){const le=se.map(je=>je.constraints),{collapsedSize:Ce=0,panelSize:We=0,minSize:ct=0,pivotIndices:Ne}=ai(se,N,O),Be=V??ct;if($n(We,Ce)){const je=z.current.get(N.id),Ge=je!=null&&je>=Be?je:Be,me=ki(se,N)===se.length-1?We-Ge:Ge-We,Pe=Ki({delta:me,initialLayout:O,panelConstraints:le,pivotIndices:Ne,prevLayout:O,trigger:"imperative-api"});Po(O,Pe)||(P(Pe),H.current.layout=Pe,M&&M(Pe),Ti(se,Pe,D.current))}}},[]),te=d.useCallback(N=>{const{layout:V,panelDataArray:M}=H.current,{panelSize:O}=ai(M,N,V);return et(O!=null,`Panel size not found for panel "${N.id}"`),O},[]),q=d.useCallback((N,V)=>{const{panelDataArray:M}=H.current,O=ki(M,N);return $m({defaultSize:V,dragState:T,layout:w,panelData:M,panelIndex:O})},[T,w]),B=d.useCallback(N=>{const{layout:V,panelDataArray:M}=H.current,{collapsedSize:O=0,collapsible:se,panelSize:le}=ai(M,N,V);return et(le!=null,`Panel size not found for panel "${N.id}"`),se===!0&&$n(le,O)},[]),ce=d.useCallback(N=>{const{layout:V,panelDataArray:M}=H.current,{collapsedSize:O=0,collapsible:se,panelSize:le}=ai(M,N,V);return et(le!=null,`Panel size not found for panel "${N.id}"`),!se||hi(le,O)>0},[]),re=d.useCallback(N=>{const{panelDataArray:V}=H.current;V.push(N),V.sort((M,O)=>{const se=M.order,le=O.order;return se==null&&le==null?0:se==null?-1:le==null?1:se-le}),H.current.panelDataArrayChanged=!0,F()},[F]);pi(()=>{if(H.current.panelDataArrayChanged){H.current.panelDataArrayChanged=!1;const{autoSaveId:N,onLayout:V,storage:M}=K.current,{layout:O,panelDataArray:se}=H.current;let le=null;if(N){const We=Gm(N,se,M);We&&(z.current=new Map(Object.entries(We.expandToSizes)),le=We.layout)}le==null&&(le=Zm({panelDataArray:se}));const Ce=Wa({layout:le,panelConstraints:se.map(We=>We.constraints)});Ba(O,Ce)||(P(Ce),H.current.layout=Ce,V&&V(Ce),Ti(se,Ce,D.current))}}),pi(()=>{const N=H.current;return()=>{N.layout=[]}},[]);const Se=d.useCallback(N=>{let V=!1;const M=S.current;return M&&window.getComputedStyle(M,null).getPropertyValue("direction")==="rtl"&&(V=!0),function(se){se.preventDefault();const le=S.current;if(!le)return()=>null;const{direction:Ce,dragState:We,id:ct,keyboardResizeBy:Ne,onLayout:Be}=K.current,{layout:je,panelDataArray:Ge}=H.current,{initialLayout:wt}=We??{},me=$l(ct,N,le);let Pe=Wm(se,N,Ce,We,Ne,le);const ke=Ce==="horizontal";ke&&V&&(Pe=-Pe);const bt=Ge.map(At=>At.constraints),st=Ki({delta:Pe,initialLayout:wt??je,panelConstraints:bt,pivotIndices:me,prevLayout:je,trigger:El(se)?"keyboard":"mouse-or-touch"}),_t=!Po(je,st);(Rl(se)||Nl(se))&&j.current!=Pe&&(j.current=Pe,!_t&&Pe!==0?ke?Zs(N,Pe<0?zl:jl):Zs(N,Pe<0?Bl:Fl):Zs(N,0)),_t&&(P(st),H.current.layout=st,Be&&Be(st),Ti(Ge,st,D.current))}},[]),ye=d.useCallback((N,V)=>{const{onLayout:M}=K.current,{layout:O,panelDataArray:se}=H.current,le=se.map(je=>je.constraints),{panelSize:Ce,pivotIndices:We}=ai(se,N,O);et(Ce!=null,`Panel size not found for panel "${N.id}"`);const Ne=ki(se,N)===se.length-1?Ce-V:V-Ce,Be=Ki({delta:Ne,initialLayout:O,panelConstraints:le,pivotIndices:We,prevLayout:O,trigger:"imperative-api"});Po(O,Be)||(P(Be),H.current.layout=Be,M&&M(Be),Ti(se,Be,D.current))},[]),Me=d.useCallback((N,V)=>{const{layout:M,panelDataArray:O}=H.current,{collapsedSize:se=0,collapsible:le}=V,{collapsedSize:Ce=0,collapsible:We,maxSize:ct=100,minSize:Ne=0}=N.constraints,{panelSize:Be}=ai(O,N,M);Be!=null&&(le&&We&&$n(Be,se)?$n(se,Ce)||ye(N,Ce):Be<Ne?ye(N,Ne):Be>ct&&ye(N,ct))},[ye]),X=d.useCallback((N,V)=>{const{direction:M}=K.current,{layout:O}=H.current;if(!S.current)return;const se=as(N,S.current);et(se,`Drag handle element not found for id "${N}"`);const le=Gl(M,V);k({dragHandleId:N,dragHandleRect:se.getBoundingClientRect(),initialCursorPosition:le,initialLayout:O})},[]),Ae=d.useCallback(()=>{k(null)},[]),ae=d.useCallback(N=>{const{panelDataArray:V}=H.current,M=ki(V,N);M>=0&&(V.splice(M,1),delete D.current[N.id],H.current.panelDataArrayChanged=!0,F())},[F]),pe=d.useMemo(()=>({collapsePanel:oe,direction:l,dragState:T,expandPanel:W,getPanelSize:te,getPanelStyle:q,groupId:y,isPanelCollapsed:B,isPanelExpanded:ce,reevaluatePanelConstraints:Me,registerPanel:re,registerResizeHandle:Se,resizePanel:ye,startDragging:X,stopDragging:Ae,unregisterPanel:ae,panelGroupElement:S.current}),[oe,T,l,W,te,q,y,B,ce,Me,re,Se,ye,X,Ae,ae]),Z={display:"flex",flexDirection:l==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return d.createElement(is.Provider,{value:pe},d.createElement(v,{...x,children:i,className:s,id:h,ref:S,style:{...Z,...b},[Zt.group]:"",[Zt.groupDirection]:l,[Zt.groupId]:y}))}const zo=d.forwardRef((n,i)=>d.createElement(ql,{...n,forwardedRef:i}));ql.displayName="PanelGroup";zo.displayName="forwardRef(PanelGroup)";function ki(n,i){return n.findIndex(s=>s===i||s.id===i.id)}function ai(n,i,s){const l=ki(n,i),h=l===n.length-1?[l-1,l]:[l,l+1],u=s[l];return{...i.constraints,panelSize:u,pivotIndices:h}}function Um({disabled:n,handleId:i,resizeHandler:s,panelGroupElement:l}){d.useEffect(()=>{if(n||s==null||l==null)return;const p=as(i,l);if(p==null)return;const h=u=>{if(!u.defaultPrevented)switch(u.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{u.preventDefault(),s(u);break}case"F6":{u.preventDefault();const m=p.getAttribute(Zt.groupId);et(m,`No group element found for id "${m}"`);const g=ro(m,l),b=Zl(m,i,l);et(b!==null,`No resize element found for id "${i}"`);const v=u.shiftKey?b>0?b-1:g.length-1:b+1<g.length?b+1:0;g[v].focus();break}}};return p.addEventListener("keydown",h),()=>{p.removeEventListener("keydown",h)}},[l,n,i,s])}function jo({children:n=null,className:i="",disabled:s=!1,hitAreaMargins:l,id:p,onBlur:h,onClick:u,onDragging:m,onFocus:g,onPointerDown:b,onPointerUp:v,style:x={},tabIndex:y=0,tagName:S="div",...T}){var k,w;const P=d.useRef(null),F=d.useRef({onClick:u,onDragging:m,onPointerDown:b,onPointerUp:v});d.useEffect(()=>{F.current.onClick=u,F.current.onDragging=m,F.current.onPointerDown=b,F.current.onPointerUp=v});const D=d.useContext(is);if(D===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:z,groupId:j,registerResizeHandle:K,startDragging:H,stopDragging:oe,panelGroupElement:W}=D,te=xr(p),[q,B]=d.useState("inactive"),[ce,re]=d.useState(!1),[Se,ye]=d.useState(null),Me=d.useRef({state:q});pi(()=>{Me.current.state=q}),d.useEffect(()=>{if(s)ye(null);else{const pe=K(te);ye(()=>pe)}},[s,te,K]);const X=(k=l==null?void 0:l.coarse)!==null&&k!==void 0?k:15,Ae=(w=l==null?void 0:l.fine)!==null&&w!==void 0?w:5;d.useEffect(()=>{if(s||Se==null)return;const pe=P.current;et(pe,"Element ref not attached");let Z=!1;return Lm(te,pe,z,{coarse:X,fine:Ae},(V,M,O)=>{if(!M){B("inactive");return}switch(V){case"down":{B("drag"),Z=!1,et(O,'Expected event to be defined for "down" action'),H(te,O);const{onDragging:se,onPointerDown:le}=F.current;se==null||se(!0),le==null||le();break}case"move":{const{state:se}=Me.current;Z=!0,se!=="drag"&&B("hover"),et(O,'Expected event to be defined for "move" action'),Se(O);break}case"up":{B("hover"),oe();const{onClick:se,onDragging:le,onPointerUp:Ce}=F.current;le==null||le(!1),Ce==null||Ce(),Z||se==null||se();break}}})},[X,z,s,Ae,K,te,Se,H,oe]),Um({disabled:s,handleId:te,resizeHandler:Se,panelGroupElement:W});const ae={touchAction:"none",userSelect:"none"};return d.createElement(S,{...T,children:n,className:i,id:p,onBlur:()=>{re(!1),h==null||h()},onFocus:()=>{re(!0),g==null||g()},ref:P,role:"separator",style:{...ae,...x},tabIndex:y,[Zt.groupDirection]:z,[Zt.groupId]:j,[Zt.resizeHandle]:"",[Zt.resizeHandleActive]:q==="drag"?"pointer":ce?"keyboard":void 0,[Zt.resizeHandleEnabled]:!s,[Zt.resizeHandleId]:te,[Zt.resizeHandleState]:q})}jo.displayName="PanelResizeHandle";function qm(n=["timeline","map","resources","tasks"]){const[i,s]=d.useState(n),[l,p]=d.useState(null),h=v=>{s(x=>x.includes(v)?x.filter(y=>y!==v):[...x,v])},u=v=>{s(x=>x.filter(y=>y!==v)),l===v&&p(null)},m=v=>{i.length<=1||p(x=>x===v?null:v)},g=d.useMemo(()=>n.filter(v=>!i.includes(v)),[i,n]);return{visiblePanels:i,maximizedPanel:l,collapsedPanels:g,isPanelMaximized:v=>l===v,togglePanel:h,closePanel:u,maximizePanel:m}}function $a({title:n,icon:i,isMaximized:s,onMaximize:l,onClose:p,children:h,visibleCount:u}){const m=$t(),g=Y(m.palette.primary.main,.12),b=Y(m.palette.primary.main,.05),v=Y(m.palette.text.primary,.6);return a.jsxs(ht,{elevation:s?6:1,sx:{display:"flex",flexDirection:"column",height:"100%",width:"100%",borderRadius:2,border:`1px solid ${g}`,overflow:"hidden",backgroundImage:"none"},children:[a.jsxs(ve,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{px:1.5,py:.75,borderBottom:`1px solid ${g}`,backgroundColor:b},children:[a.jsxs(ve,{direction:"row",spacing:1,alignItems:"center",children:[a.jsx(i,{size:16,color:v}),a.jsx(ue,{variant:"subtitle2",sx:{fontWeight:600,color:m.palette.text.primary},children:n})]}),a.jsxs(ve,{direction:"row",alignItems:"center",spacing:.5,children:[u>1&&a.jsx(cn,{size:"small",onClick:l,title:s?"Restore":"Maximize",sx:{borderRadius:1.5,border:`1px solid ${Y(m.palette.primary.main,.12)}`,bgcolor:s?Y(m.palette.primary.main,.12):m.palette.common.white,"&:hover":{bgcolor:Y(m.palette.primary.main,.18)}},children:a.jsx(Mu,{size:16,color:m.palette.text.primary,style:{transform:s?"rotate(180deg)":"none",transition:"transform 150ms ease"}})}),a.jsx(cn,{size:"small",onClick:p,title:"Close",sx:{borderRadius:1.5,border:`1px solid ${Y(m.palette.primary.main,.12)}`,bgcolor:m.palette.common.white,"&:hover":{bgcolor:Y(m.palette.primary.main,.18)}},children:a.jsx(no,{size:16,color:m.palette.text.primary})})]})]}),a.jsx(Te,{sx:{flex:1,minHeight:0,overflow:"hidden"},children:h})]})}const li=[{id:"tasksByCommit",label:"Active Tasks by Commit",group:"task"},{id:"resource-active",label:"Active Resources",group:"resource"}];function Km(){var v;const[n,i]=d.useState("task"),[s,l]=d.useState(((v=li.find(x=>x.group==="task"))==null?void 0:v.id)??li[0].id),p=x=>{i(x);const y=li.find(S=>S.group===x);y&&l(y.id)},h=x=>n===x,u=x=>{l(x);const y=li.find(S=>S.id===x);y&&i(y.group)},m=x=>x===s,g=li.filter(x=>x.group==="task"),b=li.filter(x=>x.group==="resource");return{MENU:li,activeTab:n,selectedMode:s,selectTab:p,isTab:h,select:u,isActive:m,taskItems:g,resourceItems:b}}function Xm(){const[n,i]=d.useState([]),[s,l]=d.useState([]),[p,h]=d.useState(!0),u=d.useRef(null),m=d.useRef(!1),g=d.useRef(!1),b=d.useRef(0),v=200,x=n.length===1?n[0]:null,y=s.length===1?s[0]:null;d.useEffect(()=>{console.log("â†’ SELECTED TASKS:",n.map(j=>j.taskId)),console.log("â†’ SELECTED RESOURCES:",s.map(j=>j.resourceId))},[n,s]);const S=(j,K,H)=>{console.log("APPLY SELECTION (origin:",H,")",j),u.current=H,K(j),setTimeout(()=>{u.current=null},0)};return{selectedTasks:n,selectedTask:x,handleTaskMapClick:(j,K=!1)=>{console.log("MAP CLICK TASK:",j.taskId,"multi:",K),h(!1),u.current="map",m.current=!0,b.current=Date.now(),i(H=>K?H.some(W=>W.taskId===j.taskId)?H.filter(W=>W.taskId!==j.taskId):[...H,j]:[j]),setTimeout(()=>{u.current=null,m.current=!1},30)},handleTaskTableSelect:j=>{if(console.log("TABLE SELECT TASKS:",j.map(H=>H.taskId)),!j||j.length===0){console.log("TABLE SELECT TASKS ignored (empty selection)");return}const K=Date.now()-b.current<v;if(m.current||u.current==="map"||g.current||K){console.log("TABLE IGNORED â€” map is selecting/dragging/suppress window");return}h(!0),S(j,i,"table")},selectedResources:s,selectedResource:y,handleResourceMapClick:(j,K=!1)=>{console.log("MAP CLICK RESOURCE:",j.resourceId,"multi:",K),h(!1),u.current="map",m.current=!0,b.current=Date.now(),l(H=>K?H.some(W=>W.resourceId===j.resourceId)?H.filter(W=>W.resourceId!==j.resourceId):[...H,j]:[j]),setTimeout(()=>{u.current=null,m.current=!1},30)},handleResourceTableSelect:j=>{if(console.log("TABLE SELECT RESOURCES:",j.map(H=>H.resourceId)),!j||j.length===0){console.log("TABLE SELECT RESOURCES ignored (empty selection)");return}const K=Date.now()-b.current<v;if(m.current||u.current==="map"||g.current||K){console.log("TABLE IGNORED â€” map is selecting/dragging/suppress window");return}h(!0),S(j,l,"table")},shouldZoom:p,notifyMapDragStart:()=>{console.log("MAP DRAG START"),g.current=!0,b.current=Date.now()},notifyMapDragEnd:()=>{console.log("MAP DRAG END"),setTimeout(()=>{g.current=!1},80)},clearAll:()=>{console.log("CLEAR ALL"),u.current="clear",i([]),l([]),h(!0),setTimeout(()=>{u.current=null},0)}}}const Ji={timeline:{label:"Gantt Timeline",icon:Nu},map:{label:"Map View",icon:Ru},resources:{label:"Resource Table",icon:es},tasks:{label:"Task Table",icon:ar}};function Ha(n){return n==="resource-active"?"resource-active":"task-default"}function Ym(){const n=$t(),i=n.palette.primary.main,s=n.palette.primary.dark,l=Y(i,.1),p=Y(i,.18),h="0 24px 54px rgba(8,58,97,0.22)",[u,m]=d.useState(""),[g,b]=d.useState(""),[v,x]=d.useState(!1),[y,S]=d.useState(!1),[T,k]=d.useState(!1),[w,P]=d.useState(!1),F=d.useRef(null),[D,z]=d.useState(""),j=d.useRef({}),[K,H]=d.useState([]),[oe,W]=d.useState([]),te=Sl,[q,B]=d.useState({statuses:[],pwa:[],capabilities:[],commitmentTypes:[]}),[ce,re]=d.useState(0),{selectedMode:Se,select:ye,isActive:Me,taskItems:X,resourceItems:Ae}=Km(),{selectedTasks:ae,selectedTask:pe,handleTaskMapClick:Z,handleTaskTableSelect:N,selectedResources:V,selectedResource:M,handleResourceMapClick:O,handleResourceTableSelect:se,shouldZoom:le,clearAll:Ce,notifyMapDragStart:We,notifyMapDragEnd:ct}=Xm(),Ne=d.useMemo(()=>{const A=new Set;return tn.forEach(U=>U.division&&A.add(U.division)),Array.from(A).sort()},[]),Be=d.useMemo(()=>{const A=new Set;return tn.forEach(U=>U.domain&&A.add(String(U.domain).toUpperCase())),Array.from(A).sort()},[]);function je(A){const U=new Set,xe=new Set,Ke=new Set,Ze=new Set;for(const De of A)De.taskStatus&&U.add(De.taskStatus),De.pwa&&xe.add(De.pwa),Array.isArray(De.capabilities)&&De.capabilities.forEach(Ue=>Ke.add(Ue)),De.commitmentType&&Ze.add(De.commitmentType);return{statuses:[...U].sort(),pwa:[...xe].sort(),capabilities:[...Ke].sort(),commitmentTypes:[...Ze].sort()}}const Ge=A=>{if(b(A),H([]),W([]),re(U=>U+1),A){const U=tn.filter(xe=>xe.division===A);B(je(U))}else B({statuses:[],pwa:[],capabilities:[],commitmentTypes:[]});z("")},wt=A=>{m(A),H([]),W([]),re(xe=>xe+1);let U=[...tn];A&&(U=U.filter(xe=>String(xe.domain).toUpperCase()===A)),g&&(U=U.filter(xe=>xe.division===g)),B(je(U)),z("")},{visiblePanels:me,maximizedPanel:Pe,collapsedPanels:ke,isPanelMaximized:bt,togglePanel:st,closePanel:_t,maximizePanel:At}=qm(),ut=()=>{k(!1),P(!1)},gt=()=>{g&&k(A=>{const U=!A;return P(U),U})},jt=F.current,Et=!!(T&&g&&jt),Ve=A=>{jt&&jt.contains(A.target)||ut()},He=A=>{var xe,Ke,Ze,De;let U=[...tn];u&&(U=U.filter(Ue=>String(Ue.domain).toUpperCase()===u)),g&&(U=U.filter(Ue=>Ue.division===g)),(xe=A.statuses)!=null&&xe.length&&(U=U.filter(Ue=>A.statuses.includes(Ue.taskStatus))),(Ke=A.pwa)!=null&&Ke.length&&(U=U.filter(Ue=>A.pwa.includes(Ue.pwa))),(Ze=A.capabilities)!=null&&Ze.length&&(U=U.filter(Ue=>{var Q;return(Q=Ue.capabilities)==null?void 0:Q.some(G=>A.capabilities.includes(G))})),(De=A.commitmentTypes)!=null&&De.length&&(U=U.filter(Ue=>A.commitmentTypes.includes(Ue.commitmentType))),U.sort((Ue,Q)=>{const G=Number(Ue.importanceScore??0),ee=Number(Q.importanceScore??0);if(ee!==G)return ee-G;const ie=Ue.appointmentStartDate?new Date(Ue.appointmentStartDate).getTime():0,Je=Q.appointmentStartDate?new Date(Q.appointmentStartDate).getTime():0;return ie-Je}),H(U),ut()},Ee=A=>{var Ke,Ze;if(!g){W([]),ut();return}let U=[...te];U=U.filter(De=>De.division===g),u&&(U=U.filter(De=>String(De.domain).toUpperCase()===u)),(Ke=A.statuses)!=null&&Ke.length&&(U=U.filter(De=>A.statuses.includes(De.status))),(Ze=A.pwa)!=null&&Ze.length&&(U=U.filter(De=>A.pwa.includes(De.pwa)));const xe={Available:1,Busy:2,Offline:3};U.sort((De,Ue)=>{const Q=xe[De.status]??99,G=xe[Ue.status]??99;if(Q!==G)return Q-G;const ee=De.availableAgainAt?new Date(De.availableAgainAt).getTime():Number.POSITIVE_INFINITY,ie=Ue.availableAgainAt?new Date(Ue.availableAgainAt).getTime():Number.POSITIVE_INFINITY;return ee-ie}),W(U),ut()},mt=()=>{const A=D.trim().toLowerCase();if(!A)return;let U=!1;const xe=tn.filter(Ze=>Ze.taskId&&Ze.taskId.toLowerCase()===A);xe.length&&(H(xe),U=!0);const Ke=te.filter(Ze=>Ze.resourceId&&String(Ze.resourceId).toLowerCase()===A);Ke.length&&(W(Ke),U=!0),U||console.log("No match found."),ut()},dt=()=>{if(Ce(),z(""),H([]),W([]),re(A=>A+1),g){const A=tn.filter(U=>U.division===g);B(je(A))}else B({statuses:[],pwa:[],capabilities:[],commitmentTypes:[]});ut()},yt=A=>{switch(A){case"timeline":return a.jsx($h,{});case"map":return a.jsx(dm,{tasks:K,resources:oe,selectedTask:pe,selectedTasks:ae,selectedResource:M,selectedResources:V,shouldZoom:le,handleTaskMapClick:Z,handleResourceMapClick:O,notifyMapDragStart:We,notifyMapDragEnd:ct});case"resources":return a.jsx(bm,{data:oe,selectedResources:V,onSelectionChange:se});case"tasks":return a.jsx(vm,{data:K,selectedTasks:ae,onSelectionChange:N});default:return null}},Xt=["timeline","map"],vt=["resources","tasks"],Bt=Xt.filter(A=>me.includes(A)),Yt=vt.filter(A=>me.includes(A)),on=Pe?[Pe]:Bt,qt=Pe?[]:Yt,Ft=a.jsxs(ht,{elevation:0,sx:{width:"100%",borderBottom:`1px solid ${Y(n.palette.primary.main,.1)}`,px:2.5,py:1.5,display:"flex",alignItems:"center",gap:2,backgroundImage:"none",borderRadius:0},children:[a.jsxs(Jt,{select:!0,size:"small",label:"Division",value:g,onChange:A=>Ge(A.target.value),sx:{minWidth:140},children:[a.jsx(Wt,{value:"",children:"All"}),Ne.map(A=>a.jsx(Wt,{value:A,children:A},A))]}),a.jsxs(Jt,{select:!0,size:"small",label:"Domain",value:u,onChange:A=>wt(A.target.value),sx:{minWidth:140},children:[a.jsx(Wt,{value:"",children:"All"}),Be.map(A=>a.jsx(Wt,{value:A,children:A},A))]}),a.jsx(Jt,{size:"small",value:D,onChange:A=>z(A.target.value),onKeyDown:A=>A.key==="Enter"&&mt(),placeholder:"Search anywhereâ€¦",sx:{minWidth:240},InputProps:{startAdornment:a.jsx(Qo,{position:"start",sx:{color:Y(n.palette.text.primary,.6)},children:a.jsx(ns,{size:16})})}}),a.jsx(Mt,{ref:F,onClick:gt,variant:w?"contained":"outlined",color:"primary",size:"small",startIcon:a.jsx(Du,{size:16}),disabled:!g,sx:{boxShadow:w?"0 14px 36px rgba(8,58,97,0.25)":"none",bgcolor:w?l:void 0,borderColor:w?i:void 0},children:"Search Tool"}),a.jsx(cn,{size:"small",onClick:()=>x(A=>!A),sx:{borderRadius:2,border:`1px solid ${p}`,boxShadow:v?"0 14px 36px rgba(8,58,97,0.2)":"none",bgcolor:v?i:"white",color:v?n.palette.common.white:n.palette.text.primary,"&:hover":{bgcolor:v?s:Y(i,.08)}},children:a.jsx(Lu,{size:16})}),a.jsx(cn,{size:"small",onClick:()=>S(A=>!A),sx:{borderRadius:2,border:`1px solid ${p}`,boxShadow:y?"0 14px 36px rgba(8,58,97,0.2)":"none",bgcolor:y?i:"white",color:y?n.palette.common.white:n.palette.text.primary,"&:hover":{bgcolor:y?s:Y(i,.08)}},title:"Map Legend",children:a.jsx(Eu,{size:16})}),a.jsx(Te,{sx:{flexGrow:1}}),a.jsx(Mt,{variant:"outlined",size:"small",onClick:dt,children:"Clear All"}),ke.length>0&&a.jsx(ve,{direction:"row",spacing:1.5,ml:2,alignItems:"center",children:ke.map(A=>a.jsx(cn,{size:"small",onClick:()=>st(A),sx:{width:32,height:32,borderRadius:1.5,border:`1px solid ${Y(n.palette.primary.main,.12)}`,bgcolor:"white","&:hover":{bgcolor:Y(n.palette.primary.main,.08)}},children:Nn.createElement(Ji[A].icon,{size:15})},A))})]}),de=a.jsx(Ko,{open:Et,anchorEl:jt,placement:"bottom-start",transition:!0,modifiers:[{name:"offset",options:{offset:[0,10]}}],children:({TransitionProps:A})=>a.jsx(oo,{...A,timeout:160,children:a.jsx(Te,{children:a.jsx(gl,{onClickAway:Ve,children:a.jsxs(ht,{elevation:16,sx:{borderRadius:3,p:3,border:`1px solid ${p}`,boxShadow:h,backgroundImage:"none",display:"flex",flexDirection:"column",gap:3},style:{width:"min(95vw, 760px)"},children:[a.jsxs(ve,{direction:{xs:"column",md:"row"},spacing:3,children:[a.jsxs(ht,{elevation:0,sx:{width:{xs:"100%",md:"clamp(200px,24vw,240px)"},borderRadius:2,border:`1px solid ${Y(i,.12)}`,boxShadow:"0 18px 42px rgba(8,58,97,0.18)",backgroundImage:"none",p:2.5,display:"flex",flexDirection:"column",gap:3},children:[a.jsxs(Te,{children:[a.jsx(ue,{variant:"overline",sx:{fontWeight:700,color:Y(n.palette.text.secondary,.9)},children:"Task Searches"}),a.jsx(ve,{spacing:1,mt:1.5,children:X.map(U=>a.jsx(Mt,{onClick:()=>ye(U.id),fullWidth:!0,size:"small",variant:Me(U.id)?"contained":"outlined",color:"primary",sx:{justifyContent:"flex-start",textTransform:"none",fontSize:12,fontWeight:600,borderRadius:1.5},children:U.label},U.id))})]}),a.jsx(On,{flexItem:!0,sx:{my:1}}),a.jsxs(Te,{children:[a.jsx(ue,{variant:"overline",sx:{fontWeight:700,color:Y(n.palette.text.secondary,.9)},children:"Resource Searches"}),a.jsx(ve,{spacing:1,mt:1.5,children:Ae.map(U=>a.jsx(Mt,{onClick:()=>ye(U.id),fullWidth:!0,size:"small",variant:Me(U.id)?"contained":"outlined",color:"primary",sx:{justifyContent:"flex-start",textTransform:"none",fontSize:12,fontWeight:600,borderRadius:1.5},children:U.label},U.id))})]})]}),a.jsx(ht,{elevation:0,sx:{flex:1,borderRadius:2,border:`1px solid ${Y(i,.12)}`,boxShadow:"0 18px 42px rgba(8,58,97,0.18)",backgroundImage:"none",p:3},children:a.jsx(Zh,{mode:Ha(Se),onSearch:U=>{j.current=U},onClear:()=>{H([]),W([]),re(U=>U+1)},dropdownData:{...q,resourceStatuses:Array.from(new Set(te.map(U=>U.status))).sort()},resetKey:ce})})]}),a.jsx(ve,{direction:"row",justifyContent:"flex-end",children:a.jsx(Mt,{variant:"contained",size:"medium",onClick:()=>{const U=j.current;Ha(Se).startsWith("task")?He(U):Ee(U)},sx:{px:3.5,fontWeight:700,boxShadow:"0 18px 38px rgba(8,58,97,0.24)"},children:"Search"})})]})})})})});return a.jsxs(Te,{sx:{flex:1,minHeight:0,display:"flex",flexDirection:"column",position:"relative",backgroundColor:Y(n.palette.primary.light,.08)},children:[Ft,a.jsx(jh,{visible:y,onClose:()=>S(!1)}),de,a.jsx(Te,{sx:{flex:1,minHeight:0,px:1,pt:1},children:a.jsxs(zo,{direction:"vertical",style:{height:"100%"},children:[on.length>0&&a.jsxs(a.Fragment,{children:[a.jsx(qi,{defaultSize:50,children:a.jsx(zo,{direction:"horizontal",style:{height:"100%"},children:on.map((A,U)=>a.jsxs(Nn.Fragment,{children:[U>0&&a.jsx(jo,{style:{width:4,backgroundColor:Y(n.palette.primary.main,.08),cursor:"col-resize"}}),a.jsx(qi,{children:a.jsx($a,{title:Ji[A].label,icon:Ji[A].icon,isMaximized:bt(A),onMaximize:()=>At(A),onClose:()=>_t(A),visibleCount:me.length,children:yt(A)})})]},A))})}),qt.length>0&&a.jsx(jo,{style:{height:4,backgroundColor:Y(n.palette.primary.main,.08),cursor:"row-resize"}})]}),qt.length>0&&a.jsx(qi,{defaultSize:50,children:a.jsx(zo,{direction:"horizontal",style:{height:"100%"},children:qt.map((A,U)=>a.jsxs(Nn.Fragment,{children:[U>0&&a.jsx(jo,{style:{width:4,backgroundColor:Y(n.palette.primary.main,.08),cursor:"col-resize"}}),a.jsx(qi,{children:a.jsx($a,{title:Ji[A].label,icon:Ji[A].icon,isMaximized:bt(A),onMaximize:()=>At(A),onClose:()=>_t(A),visibleCount:me.length,children:yt(A)})})]},A))})})]},me.join("-"))})]})}let Qm={data:""},ef=n=>{if(typeof window=="object"){let i=(n?n.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return i.nonce=window.__nonce__,i.parentNode||(n||document.head).appendChild(i),i.firstChild}return n||Qm},tf=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,nf=/\/\*[^]*?\*\/|  +/g,Ga=/\n+/g,Yn=(n,i)=>{let s="",l="",p="";for(let h in n){let u=n[h];h[0]=="@"?h[1]=="i"?s=h+" "+u+";":l+=h[1]=="f"?Yn(u,h):h+"{"+Yn(u,h[1]=="k"?"":i)+"}":typeof u=="object"?l+=Yn(u,i?i.replace(/([^,])+/g,m=>h.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,g=>/&/.test(g)?g.replace(/&/g,m):m?m+" "+g:g)):h):u!=null&&(h=/^--/.test(h)?h:h.replace(/[A-Z]/g,"-$&").toLowerCase(),p+=Yn.p?Yn.p(h,u):h+":"+u+";")}return s+(i&&p?i+"{"+p+"}":p)+l},Zn={},Kl=n=>{if(typeof n=="object"){let i="";for(let s in n)i+=s+Kl(n[s]);return i}return n},of=(n,i,s,l,p)=>{let h=Kl(n),u=Zn[h]||(Zn[h]=(g=>{let b=0,v=11;for(;b<g.length;)v=101*v+g.charCodeAt(b++)>>>0;return"go"+v})(h));if(!Zn[u]){let g=h!==n?n:(b=>{let v,x,y=[{}];for(;v=tf.exec(b.replace(nf,""));)v[4]?y.shift():v[3]?(x=v[3].replace(Ga," ").trim(),y.unshift(y[0][x]=y[0][x]||{})):y[0][v[1]]=v[2].replace(Ga," ").trim();return y[0]})(n);Zn[u]=Yn(p?{["@keyframes "+u]:g}:g,s?"":"."+u)}let m=s&&Zn.g?Zn.g:null;return s&&(Zn.g=Zn[u]),((g,b,v,x)=>{x?b.data=b.data.replace(x,g):b.data.indexOf(g)===-1&&(b.data=v?g+b.data:b.data+g)})(Zn[u],i,l,m),u},sf=(n,i,s)=>n.reduce((l,p,h)=>{let u=i[h];if(u&&u.call){let m=u(s),g=m&&m.props&&m.props.className||/^go/.test(m)&&m;u=g?"."+g:m&&typeof m=="object"?m.props?"":Yn(m,""):m===!1?"":m}return l+p+(u??"")},"");function ls(n){let i=this||{},s=n.call?n(i.p):n;return of(s.unshift?s.raw?sf(s,[].slice.call(arguments,1),i.p):s.reduce((l,p)=>Object.assign(l,p&&p.call?p(i.p):p),{}):s,ef(i.target),i.g,i.o,i.k)}let Xl,Qs,er;ls.bind({g:1});let Hn=ls.bind({k:1});function rf(n,i,s,l){Yn.p=i,Xl=n,Qs=s,er=l}function ti(n,i){let s=this||{};return function(){let l=arguments;function p(h,u){let m=Object.assign({},h),g=m.className||p.className;s.p=Object.assign({theme:Qs&&Qs()},m),s.o=/ *go\d+/.test(g),m.className=ls.apply(s,l)+(g?" "+g:"");let b=n;return n[0]&&(b=m.as||n,delete m.as),er&&b[0]&&er(m),Xl(b,m)}return p}}var af=n=>typeof n=="function",Uo=(n,i)=>af(n)?n(i):n,lf=(()=>{let n=0;return()=>(++n).toString()})(),Yl=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let i=matchMedia("(prefers-reduced-motion: reduce)");n=!i||i.matches}return n}})(),cf=20,_r="default",Ql=(n,i)=>{let{toastLimit:s}=n.settings;switch(i.type){case 0:return{...n,toasts:[i.toast,...n.toasts].slice(0,s)};case 1:return{...n,toasts:n.toasts.map(u=>u.id===i.toast.id?{...u,...i.toast}:u)};case 2:let{toast:l}=i;return Ql(n,{type:n.toasts.find(u=>u.id===l.id)?1:0,toast:l});case 3:let{toastId:p}=i;return{...n,toasts:n.toasts.map(u=>u.id===p||p===void 0?{...u,dismissed:!0,visible:!1}:u)};case 4:return i.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(u=>u.id!==i.toastId)};case 5:return{...n,pausedAt:i.time};case 6:let h=i.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(u=>({...u,pauseDuration:u.pauseDuration+h}))}}},Bo=[],ec={toasts:[],pausedAt:void 0,settings:{toastLimit:cf}},Rn={},tc=(n,i=_r)=>{Rn[i]=Ql(Rn[i]||ec,n),Bo.forEach(([s,l])=>{s===i&&l(Rn[i])})},nc=n=>Object.keys(Rn).forEach(i=>tc(n,i)),uf=n=>Object.keys(Rn).find(i=>Rn[i].toasts.some(s=>s.id===n)),cs=(n=_r)=>i=>{tc(i,n)},df={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},pf=(n={},i=_r)=>{let[s,l]=d.useState(Rn[i]||ec),p=d.useRef(Rn[i]);d.useEffect(()=>(p.current!==Rn[i]&&l(Rn[i]),Bo.push([i,l]),()=>{let u=Bo.findIndex(([m])=>m===i);u>-1&&Bo.splice(u,1)}),[i]);let h=s.toasts.map(u=>{var m,g,b;return{...n,...n[u.type],...u,removeDelay:u.removeDelay||((m=n[u.type])==null?void 0:m.removeDelay)||(n==null?void 0:n.removeDelay),duration:u.duration||((g=n[u.type])==null?void 0:g.duration)||(n==null?void 0:n.duration)||df[u.type],style:{...n.style,...(b=n[u.type])==null?void 0:b.style,...u.style}}});return{...s,toasts:h}},hf=(n,i="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:i,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...s,id:(s==null?void 0:s.id)||lf()}),co=n=>(i,s)=>{let l=hf(i,n,s);return cs(l.toasterId||uf(l.id))({type:2,toast:l}),l.id},Tt=(n,i)=>co("blank")(n,i);Tt.error=co("error");Tt.success=co("success");Tt.loading=co("loading");Tt.custom=co("custom");Tt.dismiss=(n,i)=>{let s={type:3,toastId:n};i?cs(i)(s):nc(s)};Tt.dismissAll=n=>Tt.dismiss(void 0,n);Tt.remove=(n,i)=>{let s={type:4,toastId:n};i?cs(i)(s):nc(s)};Tt.removeAll=n=>Tt.remove(void 0,n);Tt.promise=(n,i,s)=>{let l=Tt.loading(i.loading,{...s,...s==null?void 0:s.loading});return typeof n=="function"&&(n=n()),n.then(p=>{let h=i.success?Uo(i.success,p):void 0;return h?Tt.success(h,{id:l,...s,...s==null?void 0:s.success}):Tt.dismiss(l),p}).catch(p=>{let h=i.error?Uo(i.error,p):void 0;h?Tt.error(h,{id:l,...s,...s==null?void 0:s.error}):Tt.dismiss(l)}),n};var mf=1e3,ff=(n,i="default")=>{let{toasts:s,pausedAt:l}=pf(n,i),p=d.useRef(new Map).current,h=d.useCallback((x,y=mf)=>{if(p.has(x))return;let S=setTimeout(()=>{p.delete(x),u({type:4,toastId:x})},y);p.set(x,S)},[]);d.useEffect(()=>{if(l)return;let x=Date.now(),y=s.map(S=>{if(S.duration===1/0)return;let T=(S.duration||0)+S.pauseDuration-(x-S.createdAt);if(T<0){S.visible&&Tt.dismiss(S.id);return}return setTimeout(()=>Tt.dismiss(S.id,i),T)});return()=>{y.forEach(S=>S&&clearTimeout(S))}},[s,l,i]);let u=d.useCallback(cs(i),[i]),m=d.useCallback(()=>{u({type:5,time:Date.now()})},[u]),g=d.useCallback((x,y)=>{u({type:1,toast:{id:x,height:y}})},[u]),b=d.useCallback(()=>{l&&u({type:6,time:Date.now()})},[l,u]),v=d.useCallback((x,y)=>{let{reverseOrder:S=!1,gutter:T=8,defaultPosition:k}=y||{},w=s.filter(D=>(D.position||k)===(x.position||k)&&D.height),P=w.findIndex(D=>D.id===x.id),F=w.filter((D,z)=>z<P&&D.visible).length;return w.filter(D=>D.visible).slice(...S?[F+1]:[0,F]).reduce((D,z)=>D+(z.height||0)+T,0)},[s]);return d.useEffect(()=>{s.forEach(x=>{if(x.dismissed)h(x.id,x.removeDelay);else{let y=p.get(x.id);y&&(clearTimeout(y),p.delete(x.id))}})},[s,h]),{toasts:s,handlers:{updateHeight:g,startPause:m,endPause:b,calculateOffset:v}}},gf=Hn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,yf=Hn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,vf=Hn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,xf=ti("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${gf} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${yf} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${vf} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,bf=Hn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,_f=ti("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${bf} 1s linear infinite;
`,Sf=Hn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Cf=Hn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,wf=ti("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Sf} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Cf} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Tf=ti("div")`
  position: absolute;
`,Af=ti("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,kf=Hn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Pf=ti("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${kf} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,If=({toast:n})=>{let{icon:i,type:s,iconTheme:l}=n;return i!==void 0?typeof i=="string"?d.createElement(Pf,null,i):i:s==="blank"?null:d.createElement(Af,null,d.createElement(_f,{...l}),s!=="loading"&&d.createElement(Tf,null,s==="error"?d.createElement(xf,{...l}):d.createElement(wf,{...l})))},Mf=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Df=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,Lf="0%{opacity:0;} 100%{opacity:1;}",Ef="0%{opacity:1;} 100%{opacity:0;}",Rf=ti("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Nf=ti("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Of=(n,i)=>{let s=n.includes("top")?1:-1,[l,p]=Yl()?[Lf,Ef]:[Mf(s),Df(s)];return{animation:i?`${Hn(l)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Hn(p)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},zf=d.memo(({toast:n,position:i,style:s,children:l})=>{let p=n.height?Of(n.position||i||"top-center",n.visible):{opacity:0},h=d.createElement(If,{toast:n}),u=d.createElement(Nf,{...n.ariaProps},Uo(n.message,n));return d.createElement(Rf,{className:n.className,style:{...p,...s,...n.style}},typeof l=="function"?l({icon:h,message:u}):d.createElement(d.Fragment,null,h,u))});rf(d.createElement);var jf=({id:n,className:i,style:s,onHeightUpdate:l,children:p})=>{let h=d.useCallback(u=>{if(u){let m=()=>{let g=u.getBoundingClientRect().height;l(n,g)};m(),new MutationObserver(m).observe(u,{subtree:!0,childList:!0,characterData:!0})}},[n,l]);return d.createElement("div",{ref:h,className:i,style:s},p)},Bf=(n,i)=>{let s=n.includes("top"),l=s?{top:0}:{bottom:0},p=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Yl()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${i*(s?1:-1)}px)`,...l,...p}},Ff=ls`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Io=16,Wf=({reverseOrder:n,position:i="top-center",toastOptions:s,gutter:l,children:p,toasterId:h,containerStyle:u,containerClassName:m})=>{let{toasts:g,handlers:b}=ff(s,h);return d.createElement("div",{"data-rht-toaster":h||"",style:{position:"fixed",zIndex:9999,top:Io,left:Io,right:Io,bottom:Io,pointerEvents:"none",...u},className:m,onMouseEnter:b.startPause,onMouseLeave:b.endPause},g.map(v=>{let x=v.position||i,y=b.calculateOffset(v,{reverseOrder:n,gutter:l,defaultPosition:i}),S=Bf(x,y);return d.createElement(jf,{id:v.id,key:v.id,onHeightUpdate:b.updateHeight,className:v.visible?Ff:"",style:S},v.type==="custom"?Uo(v.message,v):p?p(v):d.createElement(zf,{toast:v,position:x}))}))},Mo=Tt;const Zf=[{label:"Operation Toolkit",icon:ar},{label:"General Settings",icon:Zo}],$f=[{label:"Task Admin",icon:ts},{label:"Jeopardy Admin",icon:rr}],Hf=[{label:"Resource Admin",icon:es},{label:"Self Service Admin",icon:Zo},{label:"User Admin",icon:al}],Gf=[{label:"Domain Admin",icon:ll},{label:"Schedule Admin",icon:cl},{label:"System Admin",icon:ul}],Jf=d.memo(function({currentMenu:i,onMenuClick:s,activeSubPage:l}){const p=$t(),[h,u]=d.useState(!1),[m,g]=d.useState(null),b=d.useRef(h);d.useEffect(()=>{i!=null&&i.label&&g(i.label.trim())},[i]);const v=d.useCallback(()=>{u(S=>!S)},[]);d.useEffect(()=>{const S=()=>v();return window.addEventListener("toggleSidebar",S),()=>window.removeEventListener("toggleSidebar",S)},[v]),d.useEffect(()=>{const S=()=>g(null);return window.addEventListener("resetSidebarSelection",S),()=>window.removeEventListener("resetSidebarSelection",S)},[]),d.useEffect(()=>(h&&!b.current&&document.body.classList.add("sidebar-open"),!h&&b.current&&document.body.classList.remove("sidebar-open"),b.current=h,()=>{document.body.classList.remove("sidebar-open")}),[h]);const x=d.useMemo(()=>[{title:"User Section",menus:Zf},{title:"Task Admin",menus:$f},{title:"People Admin",menus:Hf},{title:"System Admin",menus:Gf}],[]),y=d.useCallback(S=>{const T=S.label.trim();if(m===T&&!(l!==null)){u(!1);return}g(T),s({...S,label:T}),u(!1)},[m,l,s]);return a.jsxs(qp,{variant:"temporary",open:h,onClose:()=>u(!1),ModalProps:{keepMounted:!0},PaperProps:{sx:{width:300,backgroundColor:"background.paper",borderRight:`1px solid ${Y(p.palette.text.primary,.08)}`,boxShadow:"8px 0 24px rgba(0,0,0,0.16)",display:"flex",flexDirection:"column"}},children:[a.jsx(Te,{sx:{px:3,py:2.5,borderBottom:`1px solid ${Y(p.palette.text.primary,.12)}`},children:a.jsx(ue,{variant:"h6",fontWeight:600,color:"text.primary",children:"Navigation"})}),a.jsx(Te,{sx:{flex:1,overflowY:"auto",py:1},children:x.map(({title:S,menus:T})=>a.jsxs(Nn.Fragment,{children:[a.jsx(Vf,{title:S,menus:T,activeMenuLabel:m,onMenuClick:y}),a.jsx(On,{sx:{mx:2,my:2,borderColor:Y(p.palette.text.primary,.08)}})]},S))}),a.jsx(Uf,{})]})}),Vf=d.memo(function({title:i,menus:s,activeMenuLabel:l,onMenuClick:p}){const h=$t();return a.jsxs(Te,{sx:{px:2,py:1},children:[a.jsx(ue,{variant:"overline",color:"text.secondary",sx:{px:1.5,mb:1,letterSpacing:1.4},children:i}),a.jsx(sl,{disablePadding:!0,children:s.map(u=>{const m=u.icon,g=l===u.label;return a.jsxs(_l,{onClick:()=>p(u),selected:g,sx:{borderRadius:2,mb:1,alignItems:"center",px:2.5,py:1.5,position:"relative",...g?{backgroundColor:Y(h.palette.primary.main,.12),color:h.palette.primary.main,"&::before":{content:'""',position:"absolute",left:12,top:10,bottom:10,width:4,borderRadius:999,backgroundColor:h.palette.primary.main}}:{color:h.palette.text.primary,"&:hover":{backgroundColor:Y(h.palette.primary.main,.08)}}},children:[a.jsx(qs,{sx:{minWidth:36,color:"inherit"},children:Nn.createElement(m,{size:18,strokeWidth:2.2})}),a.jsx(Go,{primary:u.label,primaryTypographyProps:{fontSize:14,fontWeight:g?600:500}})]},u.label)})})]})}),Uf=d.memo(function(){const i=$t();return a.jsxs(Te,{sx:{px:3,py:2.5,borderTop:`1px solid ${Y(i.palette.text.primary,.1)}`,backgroundColor:Y(i.palette.background.paper,.85)},children:[a.jsxs(ve,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:1.5,children:[a.jsx(ue,{variant:"subtitle2",fontWeight:600,color:"text.primary",children:"System Info"}),a.jsx(Te,{sx:{color:"text.secondary"},children:a.jsx(Ou,{size:16})})]}),a.jsxs(ve,{spacing:.5,sx:{color:"text.secondary",fontSize:12},children:[a.jsxs("span",{children:[a.jsx("strong",{children:"Client Version:"})," 1"]}),a.jsxs("span",{children:[a.jsx("strong",{children:"Build #:"})," 11.11.2025"]}),a.jsxs("span",{children:[a.jsx("strong",{children:"Node:"})," 20.0.0"]})]}),a.jsx(On,{sx:{my:1.5,borderColor:Y(i.palette.text.primary,.08)}}),a.jsx(ue,{variant:"caption",color:"text.secondary",display:"block",textAlign:"center",children:"Brandon Virtual | Â© 2025"})]})}),qf=mn(ml),Ai="__SELECT_ALL__",Ja={taskSearch:"",division:[],domainId:[],taskStatuses:[],requester:"",responseCode:[],commitType:[],capabilities:[],pwa:[],jobType:"",scoreCondition:"",scoreValue:"",locationType:"",locationValue:"",fromDate:"",fromTime:"",toDate:"",toTime:""},Do={taskSearch:"Search",division:"Division",domainId:"Domain",taskStatuses:"Task Status",requester:"Requester",responseCode:"Response",commitType:"Commitment",capabilities:"Capabilities",pwa:"PWA",jobType:"Job Type",scoreCondition:"IMP Condition",scoreValue:"IMP Value",locationType:"Location Type",locationValue:"Location Value",fromDate:"From Date",fromTime:"From Time",toDate:"To Date",toTime:"To Time"};function Kf({onSearch:n,onClear:i,onCopy:s,onExport:l,canCopy:p=!1}){const h=$t(),[u,m]=d.useState(()=>({...Ja})),[g,b]=d.useState(!1),[v,x]=d.useState(!1),[y,S]=d.useState("basic"),[T,k]=d.useState(null),w=Z=>Array.from(new Set(Z.filter(Boolean))),P=d.useMemo(()=>w(tn.map(Z=>Z.division)).sort(),[]),F=d.useMemo(()=>w(tn.map(Z=>Z.domain)).sort(),[]),D=d.useMemo(()=>w(tn.map(N=>N.taskStatus)).sort((N,V)=>{const M=N.match(/\(([^)]+)\)\s*$/),O=V.match(/\(([^)]+)\)\s*$/),se=(M==null?void 0:M[1])??N,le=(O==null?void 0:O[1])??V;return se.localeCompare(le)}),[]),z=d.useMemo(()=>w(tn.map(Z=>Z.responseCode)).sort(),[]),j=d.useMemo(()=>w(tn.map(Z=>Z.commitmentType)).sort(),[]),K=d.useMemo(()=>w(tn.flatMap(Z=>Z.capabilities||[])).sort(),[]),H=d.useMemo(()=>w(tn.map(Z=>Z.pwa)).sort(),[]),oe=d.useMemo(()=>w(tn.map(Z=>Z.resourceName)).sort(),[]),W=d.useMemo(()=>w(tn.map(Z=>Z.taskType)).sort(),[]),te=d.useMemo(()=>u.taskSearch.trim().length>0?!0:u.division.length>0&&u.domainId.length>0,[u.division.length,u.domainId.length,u.taskSearch]),q=d.useMemo(()=>{const Z=[];return["taskSearch","requester","jobType","scoreCondition","scoreValue","locationType","locationValue"].forEach(M=>{const O=u[M];typeof O=="string"&&O.trim()&&Z.push({key:M,label:Do[M],displayValue:O,isArray:!1})}),["division","domainId","taskStatuses","responseCode","commitType","capabilities","pwa"].forEach(M=>{const O=u[M];O.length&&Z.push({key:M,label:Do[M],displayValue:O.join(", "),isArray:!0})}),u.fromDate&&Z.push({key:"fromDate",label:Do.fromDate,displayValue:u.fromDate,isArray:!1}),u.toDate&&Z.push({key:"toDate",label:Do.toDate,displayValue:u.toDate,isArray:!1}),Z},[u]),B=d.useCallback(Z=>{const{name:N,value:V}=Z.target;m(M=>({...M,[N]:V}))},[]),ce=d.useCallback((Z,N)=>{m(V=>({...V,[Z]:N}))},[]),re=d.useCallback(Z=>{m(N=>{const V={...N},M=V[Z];return Array.isArray(M)?V[Z]=[]:V[Z]="",Z==="fromDate"&&(V.fromTime=""),Z==="toDate"&&(V.toTime=""),V})},[]),Se=d.useCallback(()=>{n(u)},[u,n]),ye=d.useCallback(()=>{m({...Ja}),i()},[i]),Me=d.useCallback(Z=>{k(Z.currentTarget)},[]),X=d.useCallback(()=>{k(null)},[]),Ae=d.useCallback(()=>{p&&s?s():Mo.error("No data to copy"),X()},[p,X,s]),ae=d.useCallback(()=>{p&&l?l():Mo.error("No data to export"),X()},[p,X,l]),pe=d.useMemo(()=>[{label:"My Tasks",action:()=>Mo("Preset: My Tasks")},{label:"Due Today",action:()=>Mo("Preset: Due Today")},{label:"High IMP",action:()=>m(Z=>({...Z,scoreCondition:"greater",scoreValue:"80"}))}],[]);return a.jsxs(qf,{initial:{opacity:0,y:-6},animate:{opacity:1,y:0},transition:{duration:.25},sx:{borderRadius:3,boxShadow:"0 18px 35px rgba(10, 74, 122, 0.12)",overflow:"hidden"},children:[a.jsxs(Te,{sx:{position:"relative",px:3,pt:3,pb:3,background:`linear-gradient(135deg, ${h.palette.primary.main}, ${h.palette.primary.dark})`,color:h.palette.primary.contrastText},children:[a.jsxs(ve,{direction:"row",alignItems:"flex-start",justifyContent:"space-between",spacing:2,children:[a.jsxs(Te,{children:[a.jsx(ue,{variant:"subtitle1",fontWeight:600,sx:{letterSpacing:.4},children:"Search Tasks"}),a.jsx(ue,{variant:"caption",sx:{opacity:.8},children:"Use global search or set Division + Domain."})]}),a.jsxs(ve,{direction:"row",spacing:2,sx:{display:{xs:"none",md:"flex"}},alignItems:"flex-end",children:[a.jsxs(ve,{spacing:.5,children:[a.jsx(ue,{variant:"caption",fontWeight:600,children:"From"}),a.jsxs(ve,{direction:"row",spacing:1,children:[a.jsx(Jt,{type:"date",name:"fromDate",value:u.fromDate,onChange:B,size:"small",InputLabelProps:{shrink:!0},sx:{width:150,"& .MuiInputBase-input":{color:"inherit"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.35)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.55)"},"& .MuiInputBase-input::placeholder":{color:"rgba(255,255,255,0.65)"}}}),a.jsx(Jt,{type:"time",name:"fromTime",value:u.fromTime,onChange:B,size:"small",sx:{width:110,"& .MuiInputBase-input":{color:"inherit"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.35)"}}})]})]}),a.jsxs(ve,{spacing:.5,children:[a.jsx(ue,{variant:"caption",fontWeight:600,children:"To"}),a.jsxs(ve,{direction:"row",spacing:1,children:[a.jsx(Jt,{type:"date",name:"toDate",value:u.toDate,onChange:B,size:"small",InputLabelProps:{shrink:!0},sx:{width:150,"& .MuiInputBase-input":{color:"inherit"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.35)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.55)"}}}),a.jsx(Jt,{type:"time",name:"toTime",value:u.toTime,onChange:B,size:"small",sx:{width:110,"& .MuiInputBase-input":{color:"inherit"},"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.35)"}}})]})]})]})]}),a.jsxs(ve,{direction:"row",spacing:1,alignItems:"center",sx:{position:"absolute",top:16,right:16},children:[a.jsx(cn,{onClick:()=>x(Z=>!Z),sx:{color:"inherit","&:hover":{backgroundColor:"rgba(255,255,255,0.12)"}},size:"small",children:a.jsx(zu,{size:18,fill:v?"#facc15":"none"})}),a.jsx(cn,{onClick:()=>b(Z=>!Z),sx:{color:"inherit","&:hover":{backgroundColor:"rgba(255,255,255,0.12)"}},size:"small",children:g?a.jsx(ju,{size:18}):a.jsx(rl,{size:18})})]}),a.jsx(Jt,{fullWidth:!0,name:"taskSearch",value:u.taskSearch,onChange:B,placeholder:"Search by Work ID, Resource ID, or Task ID",size:"small",sx:{mt:3,"& .MuiOutlinedInput-root":{color:"inherit",backgroundColor:"rgba(255,255,255,0.18)",borderRadius:2,"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.25)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.4)"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(255,255,255,0.6)"}},"& .MuiInputBase-input::placeholder":{color:"rgba(255,255,255,0.75)"}},InputProps:{startAdornment:a.jsx(Qo,{position:"start",children:a.jsx(ns,{size:16,color:"rgba(255,255,255,0.75)"})})}}),a.jsx(ve,{direction:"row",spacing:1,mt:2,flexWrap:"wrap",children:pe.map(Z=>a.jsx(ei,{label:Z.label,onClick:Z.action,size:"small",sx:{color:h.palette.primary.contrastText,borderColor:"rgba(255,255,255,0.35)",backgroundColor:"rgba(255,255,255,0.18)","&:hover":{backgroundColor:"rgba(255,255,255,0.26)"}},variant:"outlined"},Z.label))})]}),a.jsx(xu,{in:!g,timeout:220,unmountOnExit:!0,children:a.jsxs(fl,{sx:{pt:3,pb:1,px:3},children:[a.jsx(ve,{direction:"row",flexWrap:"wrap",gap:1,minHeight:32,children:q.map(Z=>a.jsx(ei,{label:`${Z.label}: ${Z.displayValue}`,onDelete:()=>re(Z.key),size:"small",variant:"outlined"},`${Z.key}-${Z.displayValue}`))}),a.jsxs(Rh,{value:y,onChange:(Z,N)=>S(N),sx:{mt:2},children:[a.jsx(ba,{value:"basic",label:"Basic"}),a.jsx(ba,{value:"advanced",label:"Advanced"})]}),y==="basic"&&a.jsx(Te,{mt:3,children:a.jsxs(ve,{spacing:2,children:[a.jsxs(ve,{direction:{xs:"column",md:"row"},spacing:2,children:[a.jsx(ci,{label:"Division",options:P,value:u.division,onChange:Z=>ce("division",Z),required:!0}),a.jsx(ci,{label:"Domain ID",options:F,value:u.domainId,onChange:Z=>ce("domainId",Z),required:!0}),a.jsx(ci,{label:"Task Status",options:D,value:u.taskStatuses,onChange:Z=>ce("taskStatuses",Z)}),a.jsx(ci,{label:"Commit Type",options:j,value:u.commitType,onChange:Z=>ce("commitType",Z)})]}),a.jsxs(ve,{direction:{xs:"column",md:"row"},spacing:2,children:[a.jsx(ci,{label:"Response Code",options:z,value:u.responseCode,onChange:Z=>ce("responseCode",Z)}),a.jsx(ci,{label:"PWA Selector",options:H,value:u.pwa,onChange:Z=>ce("pwa",Z)}),a.jsx(ci,{label:"Capabilities",options:K,value:u.capabilities,onChange:Z=>ce("capabilities",Z)})]})]})}),y==="advanced"&&a.jsx(Te,{mt:3,children:a.jsxs(ve,{spacing:2,children:[a.jsxs(ve,{direction:{xs:"column",md:"row"},spacing:2,children:[a.jsx($o,{options:oe,value:u.requester,inputValue:u.requester,onChange:(Z,N)=>m(V=>({...V,requester:N??""})),onInputChange:(Z,N)=>m(V=>({...V,requester:N})),freeSolo:!0,renderInput:Z=>a.jsx(Jt,{...Z,label:"Requester",size:"small"})}),a.jsx($o,{options:W,value:u.jobType,inputValue:u.jobType,onChange:(Z,N)=>m(V=>({...V,jobType:N??""})),onInputChange:(Z,N)=>m(V=>({...V,jobType:N})),freeSolo:!0,renderInput:Z=>a.jsx(Jt,{...Z,label:"Job Type",size:"small"})}),a.jsxs(Qi,{size:"small",sx:{minWidth:160},children:[a.jsx(eo,{id:"location-type-label",children:"Location Type"}),a.jsxs(to,{labelId:"location-type-label",label:"Location Type",value:u.locationType,onChange:Z=>m(N=>({...N,locationType:Z.target.value})),children:[a.jsx(Wt,{value:"",disabled:!0,children:"Select type"}),a.jsx(Wt,{value:"postCode",children:"Postcode"}),a.jsx(Wt,{value:"location",children:"Location"}),a.jsx(Wt,{value:"groupCode",children:"Group Code"})]})]}),a.jsx(Jt,{label:"Location Value",name:"locationValue",value:u.locationValue,onChange:B,size:"small"})]}),a.jsxs(ve,{direction:{xs:"column",md:"row"},spacing:2,children:[a.jsxs(Qi,{size:"small",sx:{minWidth:160},children:[a.jsx(eo,{id:"imp-condition-label",children:"IMP Condition"}),a.jsxs(to,{labelId:"imp-condition-label",label:"IMP Condition",value:u.scoreCondition,onChange:Z=>m(N=>({...N,scoreCondition:Z.target.value})),children:[a.jsx(Wt,{value:"",disabled:!0,children:"Select condition"}),a.jsx(Wt,{value:"greater",children:"Greater Than"}),a.jsx(Wt,{value:"less",children:"Less Than"})]})]}),a.jsx(Jt,{label:"IMP Value",name:"scoreValue",value:u.scoreValue,onChange:B,size:"small"})]})]})})]})}),a.jsx(On,{}),a.jsxs(Kd,{sx:{px:3,py:2,bgcolor:h.palette.grey[50],display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs(Te,{children:[a.jsx(Mt,{variant:"outlined",size:"small",onClick:Me,endIcon:a.jsx(sr,{size:16}),sx:{borderRadius:2,textTransform:"none"},children:"More"}),a.jsxs(ol,{anchorEl:T,open:!!T,onClose:X,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:[a.jsx(Wt,{onClick:Ae,children:p?"Copy":"Copy (empty)"}),a.jsx(Wt,{onClick:ae,children:p?"Export":"Export (empty)"})]})]}),a.jsxs(ve,{direction:"row",spacing:2,alignItems:"center",children:[!te&&a.jsx(ue,{variant:"caption",color:"text.secondary",children:"Select Division and Domain ID, or type in the global search."}),a.jsx(Mt,{variant:"outlined",size:"small",onClick:ye,sx:{borderRadius:2,textTransform:"none"},children:"Clear"}),a.jsx(Mt,{variant:"contained",size:"small",onClick:Se,disabled:!te,sx:{borderRadius:2,textTransform:"none",boxShadow:"none"},children:"Search"})]})]})]})}const ci=({label:n,options:i,value:s,onChange:l,required:p=!1})=>{const[h,u]=d.useState(""),m=h.trim().toLowerCase(),g=d.useMemo(()=>m?i.filter(S=>S.toLowerCase().includes(m)):i,[m,i]),b=g.filter(S=>s.includes(S)).length,v=g.length>0&&b===g.length,x=b>0&&!v,y=(S,T,k,w)=>{if((w==null?void 0:w.option)===Ai){if(!g.length)return;const F=v?s.filter(D=>!g.includes(D)):Array.from(new Set([...s,...g]));l(F);return}const P=T.filter(F=>F!==Ai);l(P)};return a.jsx($o,{multiple:!0,disableCloseOnSelect:!0,options:[Ai,...i],value:s,inputValue:h,onInputChange:(S,T)=>u(T),filterOptions:S=>S.filter(T=>T===Ai||T.toLowerCase().includes(m)),onChange:y,getOptionLabel:S=>S===Ai?"Select Filtered":S,renderOption:(S,T)=>T===Ai?a.jsxs("li",{...S,children:[a.jsx(qs,{sx:{minWidth:32},children:a.jsx(Ho,{edge:"start",checked:v,indeterminate:x,size:"small"})}),a.jsx(Go,{primary:v?"Clear Filtered":"Select Filtered"})]}):a.jsxs("li",{...S,children:[a.jsx(qs,{sx:{minWidth:32},children:a.jsx(Ho,{edge:"start",checked:s.includes(T),size:"small"})}),a.jsx(Go,{primary:T})]}),renderTags:(S,T)=>{const w=S.slice(0,2).map((P,F)=>d.createElement(ei,{...T({index:F}),key:P,label:P,size:"small"}));return S.length>2&&w.push(a.jsx(ei,{label:`+${S.length-2}`,size:"small"},"more")),w},renderInput:S=>a.jsx(Jt,{...S,label:n,placeholder:n,size:"small",required:p}),ListboxProps:{sx:{maxHeight:320}}})},Yi={"Operation Toolkit":[{name:"Resource Management",description:"Manage all available resources, teams, and assets."},{name:"Task Management",description:"Oversee and assign operational tasks efficiently."},{name:"Schedule Live",description:"Monitor and adjust live schedules in real-time."},{name:"Schedule Explorer",description:"Browse and analyze upcoming schedules and plans."},{name:"Callout Overview",description:"Review all ongoing and past callout events."},{name:"Callout Launch",description:"Initiate and configure new callout operations."}],"General Settings":[{name:"System Preferences",description:"Modify user-level settings, preferences, and themes."},{name:"API Keys",description:"Manage access tokens and integrations securely."}],"Task Admin":[{name:"Task Type",description:"Define and manage task categories and types."},{name:"Task Routing",description:"Configure task routing and escalation rules."},{name:"Task Importance",description:"Set and manage task priority and importance levels."}],"Jeopardy Admin":[{name:"Alert Definitions",description:"Define and manage all alert templates."},{name:"Alert Action Definition",description:"Configure automated or manual alert responses."},{name:"Alert Parameter Definition",description:"Set up variable parameters and alert thresholds."},{name:"Alert Ranking",description:"Prioritize and rank alerts by severity or impact."},{name:"Alert Exclusion",description:"Manage exceptions and exclusion rules for alerts."}],"Resource Admin":[{name:"Rota Day Record",description:"Manage and track individual rota day records."},{name:"Rota Week Record",description:"Oversee weekly rota summaries and status tracking."},{name:"Rota Template Record",description:"Design and configure rota templates for scheduling."},{name:"Closure User Group",description:"Administer closure groups for specific operations."},{name:"Access Restriction",description:"Set user and role-based access limitations."},{name:"Personal Overtime",description:"Monitor and manage personal overtime records."},{name:"Business Overtime",description:"Control and review business-wide overtime data."}],"Self Service Admin":[{name:"Self Selection Settings Admin",description:"Configure system-wide self-selection settings."},{name:"Self Selection Task Rating Admin",description:"Manage task rating parameters."},{name:"Self Selection Patch Admin",description:"Handle patch management for self-selection."},{name:"Self Selection Work Type Admin",description:"Control available work types."}],"User Admin":[{name:"User Account",description:"Create and manage system user accounts and credentials."},{name:"User ID",description:"View and assign unique user identification numbers."},{name:"Unbar User",description:"Unblock or reinstate restricted user accounts."},{name:"User Role Profile",description:"Define user roles and associated permissions."},{name:"Supervisor Change Password",description:"Allow supervisors to reset/change passwords."}],"Domain Admin":[{name:"Domain Building",description:"Configure and structure operational domains."},{name:"Post Areas",description:"Define post boundaries, checkpoints, and zones."},{name:"Travel Areas",description:"Set travel regions and mobility zones."},{name:"Asset",description:"Manage fixed and movable assets."},{name:"Workforce",description:"Assign and monitor domain workforce allocations."},{name:"Division",description:"Oversee structural divisions."}],"Schedule Admin":[{name:"MSS Admin",description:"Manage and configure the Master Schedule System."},{name:"SRM Admin",description:"Administer SRM modules & permissions."},{name:"SRM Audit",description:"Audit SRM changes and scheduling history."}],"System Admin":[{name:"Algorithm Parameters",description:"Configure algorithm behaviors & weights."},{name:"System Code Editor",description:"Maintain scripts, triggers & automation."},{name:"Record Audit",description:"Review detailed audit trails."},{name:"Public Holiday",description:"Manage holiday dates affecting schedules."},{name:"General Travel Times",description:"Configure default travel time settings."}]};Object.entries(Yi).flatMap(([n,i])=>i.map(s=>({...s,menuLabel:n})));function Xf(){const n=d.useRef(null),[i,s]=d.useState(null),[l,p]=d.useState(null),[h,u]=d.useState([]),m=520,g=720,b=16,v=24,x=1900,y=1e3,S=900,T=760,k=820,w=(z,j)=>{const K=window.screen.availWidth,H=window.screen.availHeight;if(z==="resource"){const B=Math.min(T,K-40,x),ce=Math.min(k,H-80,y);return{width:B,height:ce}}if(j===1){const B=Math.min(g+v*2,K-40,x),ce=Math.min(S,H-80,y);return{width:B,height:ce}}const oe=Math.min(j,3),W=m*oe+b*(oe-1)+v*2,te=Math.min(W,K-40,x),q=Math.min(y,H-80);return{width:te,height:q}},P=d.useCallback(()=>{const z=n.current;z&&!z.closed&&z.close(),n.current=null,s(null),p(null),u([])},[]),F=d.useCallback((z,j,K)=>{if(!z||z.length===0)return;n.current&&!n.current.closed&&n.current.close();const{width:H,height:oe}=w("tasks",z.length),W=window.screen.availWidth,te=window.screen.availHeight,q=Math.max(0,(W-H)/2),B=Math.max(0,(te-oe)/2),ce=`
        width=${H},
        height=${oe},
        left=${q},
        top=${B},
        toolbar=0,
        menubar=0,
        location=0,
        status=0,
        scrollbars=1,
        resizable=1
      `,re=window.open("/popup.html","_blank",ce);if(!re)return;n.current=re;const Se={mode:"tasks",tasks:z,expanded:h};re.__POPUP_DATA__=Se,re.__POPUP_CLOSE__=()=>P(),re.onload=()=>{try{re.__POPUP_DATA__=Se}catch{}},p(z),u([]),s(null)},[h,P]),D=d.useCallback((z,j)=>{if(!z)return;n.current&&!n.current.closed&&n.current.close();const{width:K,height:H}=w("resource",1),oe=window.screen.availWidth,W=window.screen.availHeight,te=Math.max(0,(oe-K)/2),q=Math.max(0,(W-H)/2),B=`
        width=${K},
        height=${H},
        left=${te},
        top=${q},
        toolbar=0,
        menubar=0,
        location=0,
        status=0,
        scrollbars=1,
        resizable=1
      `,ce=window.open("/popup.html","_blank",B);if(!ce)return;n.current=ce;const re={mode:"resource",resource:z,history:j,expanded:[]};ce.__POPUP_DATA__=re,ce.__POPUP_CLOSE__=()=>P(),ce.onload=()=>{try{ce.__POPUP_DATA__=re}catch{}},p(null),u([]),s(null)},[P]);return{externalContainer:i,externalTasks:l,externalExpandedSections:h,openExternalWindow:F,openResourceWindow:D,closeExternalWindow:P,setExternalExpandedSections:u}}const Va=[{id:"DEMO-001",taskId:"RG-AB30001",workId:"WK-790218",resourceId:"SWBXA12",outcome:"CalloutDispatchedAWI",status:"Dispatched (AWI)",availableAgainAt:null,note:"John Evans (SWBXA12) outcome set to Callout â†’ Dispatched (AWI).",timestamp:"2025-12-08T11:00:00.000Z"},{id:"DEMO-002",taskId:"RG-AB30002",workId:"WK-729320",resourceId:"QWERB33",outcome:"Unavailable",status:"Awaiting Resource",availableAgainAt:"2025-12-08T13:30:00.000Z",note:"Ffion Hughes (QWERB33) outcome set to Unavailable.",timestamp:"2025-12-08T10:51:00.000Z"},{id:"DEMO-003",taskId:"RG-AB30003",workId:"WK-703093",resourceId:"PLMKC14",outcome:"NoReply",status:"Callout Failed",availableAgainAt:null,note:"Owain Roberts (PLMKC14) outcome set to No Reply.",timestamp:"2025-12-08T10:42:00.000Z"},{id:"DEMO-004",taskId:"RG-AB30004",workId:"WK-746808",resourceId:"GHJTQ55",outcome:"AssignDispatchedAWI",status:"Dispatched (AWI)",availableAgainAt:null,note:"Carys Morgan (GHJTQ55) outcome set to Assignment â†’ Dispatched (AWI).",timestamp:"2025-12-08T10:33:00.000Z"},{id:"DEMO-005",taskId:"RG-AB30005",workId:"WK-734734",resourceId:"MNBGD82",outcome:"Disturbance",status:"Incident Flagged",availableAgainAt:null,note:"Rhys Davies (MNBGD82) outcome set to Disturbance.",timestamp:"2025-12-08T10:24:00.000Z"},{id:"DEMO-006",taskId:"RG-AB30006",workId:"WK-728071",resourceId:"LKJHF22",outcome:"CalloutDispatchedAWI",status:"Dispatched (AWI)",availableAgainAt:null,note:"Lowri Jenkins (LKJHF22) outcome set to Callout â†’ Dispatched (AWI).",timestamp:"2025-12-08T10:15:00.000Z"},{id:"DEMO-007",taskId:"RG-AB30007",workId:"WK-781809",resourceId:"ASDFR91",outcome:"Refusal",status:"Refused",availableAgainAt:null,note:"Tomos Hughes (ASDFR91) outcome set to Refusal.",timestamp:"2025-12-08T10:06:00.000Z"},{id:"DEMO-008",taskId:"RG-AB30008",workId:"WK-764130",resourceId:"ZXCVS67",outcome:"CalloutDispatchedAWI",status:"Dispatched (AWI)",availableAgainAt:null,note:"Bethan Evans (ZXCVS67) outcome set to Callout â†’ Dispatched (AWI).",timestamp:"2025-12-08T09:57:00.000Z"},{id:"DEMO-009",taskId:"RG-AB30009",workId:"WK-797851",resourceId:"BNMAS49",outcome:"Refusal",status:"Refused",availableAgainAt:null,note:"Steffan Price (BNMAS49) outcome set to Refusal.",timestamp:"2025-12-08T09:48:00.000Z"},{id:"DEMO-010",taskId:"RG-AB30010",workId:"WK-728959",resourceId:"POIUY73",outcome:"Disturbance",status:"Incident Flagged",availableAgainAt:null,note:"Aled Thomas (POIUY73) outcome set to Disturbance.",timestamp:"2025-12-08T09:39:00.000Z"},{id:"DEMO-011",taskId:"RG-AB30011",workId:"WK-775917",resourceId:"UJMKL89",outcome:"CalloutDispatchedAWI",status:"Dispatched (AWI)",availableAgainAt:null,note:"Lauren Evans (UJMKL89) outcome set to Callout â†’ Dispatched (AWI).",timestamp:"2025-12-08T09:30:00.000Z"},{id:"DEMO-012",taskId:"RG-AB30012",workId:"WK-758165",resourceId:"KJHGF02",outcome:"CalloutDispatchedAWI",status:"Dispatched (AWI)",availableAgainAt:null,note:"Nia James (KJHGF02) outcome set to Callout â†’ Dispatched (AWI).",timestamp:"2025-12-08T09:21:00.000Z"},{id:"DEMO-013",taskId:"RG-AB30013",workId:"WK-790116",resourceId:"RTYHN44",outcome:"NoReply",status:"Callout Failed",availableAgainAt:null,note:"Chloe Davies (RTYHN44) outcome set to No Reply.",timestamp:"2025-12-08T09:12:00.000Z"},{id:"DEMO-014",taskId:"RG-AB30014",workId:"WK-785274",resourceId:"SDNEW21",outcome:"Refusal",status:"Refused",availableAgainAt:null,note:"Gareth Bowen (SDNEW21) outcome set to Refusal.",timestamp:"2025-12-08T09:03:00.000Z"},{id:"DEMO-015",taskId:"RG-AB30015",workId:"WK-703787",resourceId:"SDNEW22",outcome:"Unavailable",status:"Awaiting Resource",availableAgainAt:"2025-12-08T20:00:00.000Z",note:"Megan Griffiths (SDNEW22) outcome set to Unavailable.",timestamp:"2025-12-08T08:54:00.000Z"},{id:"DEMO-016",taskId:"RG-AB30016",workId:"WK-723933",resourceId:"SDNEW23",outcome:"CalloutDispatchedAWI",status:"Dispatched (AWI)",availableAgainAt:null,note:"Ieuan Watkins (SDNEW23) outcome set to Callout â†’ Dispatched (AWI).",timestamp:"2025-12-08T08:45:00.000Z"},{id:"DEMO-017",taskId:"RG-AB30017",workId:"WK-705434",resourceId:"SDNEW24",outcome:"AssignDispatchedAWI",status:"Dispatched (AWI)",availableAgainAt:null,note:"Seren Powell (SDNEW24) outcome set to Assignment â†’ Dispatched (AWI).",timestamp:"2025-12-08T08:36:00.000Z"},{id:"DEMO-018",taskId:"RG-AB30018",workId:"WK-772532",resourceId:"SDNEW25",outcome:"Unavailable",status:"Awaiting Resource",availableAgainAt:"2025-12-08T21:30:00.000Z",note:"Rhys Llewellyn (SDNEW25) outcome set to Unavailable.",timestamp:"2025-12-08T08:27:00.000Z"},{id:"DEMO-019",taskId:"RG-AB30019",workId:"WK-765705",resourceId:"SDNEW26",outcome:"Refusal",status:"Refused",availableAgainAt:null,note:"Catrin Rees (SDNEW26) outcome set to Refusal.",timestamp:"2025-12-08T08:18:00.000Z"},{id:"DEMO-020",taskId:"RG-AB30020",workId:"WK-731785",resourceId:"SDNEW27",outcome:"Disturbance",status:"Incident Flagged",availableAgainAt:null,note:"Gwenllian Thomas (SDNEW27) outcome set to Disturbance.",timestamp:"2025-12-08T08:09:00.000Z"},{id:"DEMO-021",taskId:"RG-AB30021",workId:"WK-716640",resourceId:"FJNEW28",outcome:"CalloutDispatchedAWI",status:"Dispatched (AWI)",availableAgainAt:null,note:"Eleri Hopkins (FJNEW28) outcome set to Callout â†’ Dispatched (AWI).",timestamp:"2025-12-08T08:00:00.000Z"},{id:"DEMO-022",taskId:"RG-AB30022",workId:"WK-783470",resourceId:"FJNEW29",outcome:"PendingACT",status:"Assigned (ACT)",availableAgainAt:null,note:"Geraint Morgan (FJNEW29) outcome set to Pending Callout â†’ Assigned (ACT).",timestamp:"2025-12-08T07:51:00.000Z"},{id:"DEMO-023",taskId:"RG-AB30023",workId:"WK-736499",resourceId:"FJNEW30",outcome:"CalloutDispatchedAWI",status:"Dispatched (AWI)",availableAgainAt:null,note:"Non Davies (FJNEW30) outcome set to Callout â†’ Dispatched (AWI).",timestamp:"2025-12-08T07:42:00.000Z"}];function ic(n){if(!n)return null;const i=typeof n.resourceId=="string"?n.resourceId:String(n.resourceId??"").trim();if(!i)return null;const s=typeof n.id=="string"?n.id:String(n.id??`${i}-${Date.now()}`),l=typeof n.timestamp=="string"&&n.timestamp?n.timestamp:new Date().toISOString();return{id:s,taskId:n.taskId??null,workId:n.workId??null,resourceId:i,outcome:n.outcome??"",status:n.status??null,availableAgainAt:n.availableAgainAt??null,note:n.note??null,timestamp:l}}function Ua(){const i=(Array.isArray(Va)?Va:[]).map(s=>ic(s)).filter(s=>!!s);return i.sort((s,l)=>{const p=Date.parse(s.timestamp),h=Date.parse(l.timestamp),u=!Number.isNaN(p),m=!Number.isNaN(h);return u&&m?h-p:u?-1:m?1:0}),i}function Yf(){const[n,i]=d.useState(()=>Ua()),[s,l]=d.useState(!1),[p,h]=d.useState(null),u=d.useCallback(async()=>(l(!0),h(null),new Promise(v=>{setTimeout(()=>{i(Ua()),l(!1),v()},120)})),[]),m=d.useCallback(v=>{i(x=>{const y=ic(v);if(!y)return x;const S=x.filter(T=>T.id!==y.id);return[y,...S]})},[]),g=d.useCallback(v=>{if(!v&&v!==0)return[];const x=String(v);return n.filter(y=>String(y.taskId??"")===x)},[n]),b=d.useCallback(v=>{if(!v&&v!==0)return[];const x=String(v);return n.filter(y=>String(y.workId??"")===x)},[n]);return d.useMemo(()=>({history:n,loading:s,error:p,refresh:u,appendLocal:m,getByTaskId:g,getByWorkId:b}),[m,p,g,b,n,s,u])}const Hs={"Operation Toolkit":ar,"General Settings":Zo,"Task Admin":ts,"Jeopardy Admin":rr,"Resource Admin":es,"Self Service Admin":Zo,"User Admin":al,"Domain Admin":ll,"Schedule Admin":cl,"System Admin":ul},io={taskId:"Task ID",taskStatus:"Task Status",taskType:"Task Type",primarySkill:"Primary Skill",importanceScore:"Importance Score",msc:"MSC",taskCreated:"Task Created",groupCode:"Group Code",systemType:"System Type",employeeId:"Employee ID",resourceName:"Resource Name",asset:"Asset",assetName:"Asset Name",commitmentDate:"Commitment Date",commitmentType:"Commitment Type",arrivedAtDate:"Arrived At Date",domain:"Domain",estimatedDuration:"Estimated Duration",lastProgression:"Last Progression",category:"Category",description:"Description",responseCode:"Response Code",postCode:"Post Code",appointmentStartDate:"Appointment Start Date",linkedTask:"Linked Task",customerAddress:"Customer Address",expectedStartDate:"Expected Start Date",expectedFinishDate:"Expected Finish Date",externalQueueId:"External Queue Id",workId:"Work Id",estimateNumber:"Estimate Number",startDate:"Start Date"},Qf=["Work Details","Commitments / Customer / Location","Scheduling / Resources","Access Restrictions","Job Notes","Progress Notes","Closure"],eg=mn(ml);function tg(n,i){var l,p,h,u,m,g,b,v,x;let s=[...n];if((l=i.taskSearch)!=null&&l.trim()){const y=i.taskSearch.toLowerCase();s=s.filter(S=>[S.taskId,S.resourceName,S.workId,S.assetName,S.description].join(" ").toLowerCase().includes(y))}if((p=i.division)!=null&&p.length&&(s=s.filter(y=>i.division.includes(y.groupCode))),(h=i.domainId)!=null&&h.length&&(s=s.filter(y=>i.domainId.includes(String(y.domain||"").toUpperCase()))),(u=i.taskStatuses)!=null&&u.length&&(s=s.filter(y=>i.taskStatuses.includes(y.taskStatus))),(m=i.responseCode)!=null&&m.length&&(s=s.filter(y=>i.responseCode.includes(y.responseCode))),(g=i.requester)!=null&&g.trim()){const y=i.requester.toLowerCase();s=s.filter(S=>String(S.resourceName||"").toLowerCase().includes(y))}if((b=i.commitType)!=null&&b.length&&(s=s.filter(y=>i.commitType.includes(y.commitmentType))),(v=i.capabilities)!=null&&v.length&&(s=s.filter(y=>i.capabilities.includes(y.primarySkill))),(x=i.jobType)!=null&&x.trim()){const y=i.jobType.toLowerCase();s=s.filter(S=>String(S.taskType||"").toLowerCase().includes(y))}return s}function ng(n,i){return`
    <table border="1" cellpadding="4" cellspacing="0">
      <thead><tr>${n.map(s=>`<th>${io[s]}</th>`).join("")}</tr></thead>
      <tbody>${i.map(s=>`<tr>${n.map(l=>`<td>${s[l]??""}</td>`).join("")}</tr>`).join("")}</tbody>
    </table>`}function ig(n,i){const s=n.map(p=>io[p]).join(","),l=i.map(p=>n.map(h=>p[h]??"").join(","));return[s,...l].join(`
`)}const oc=d.memo(({currentMenu:n,windowWidth:i,searchQuery:s,setSearchQuery:l,globalResults:p,showDropdown:h,setShowDropdown:u,onSelectResult:m,onToggleSidebar:g})=>{const b=$t(),v=d.useMemo(()=>n!=null&&n.label?i<950?n.label.split(" ")[0]:n.label:"Dashboard",[n,i]);return a.jsx(cd,{position:"sticky",color:"primary",sx:{zIndex:b.zIndex.drawer+1,boxShadow:"0 18px 35px rgba(0,0,0,0.22)","&::after":{content:'""',position:"absolute",left:0,right:0,bottom:-10,height:10,background:`linear-gradient(to bottom, ${Y(b.palette.common.black,.18)}, transparent)`,pointerEvents:"none"}},children:a.jsxs(fh,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:70,px:{xs:2,sm:3}},children:[a.jsxs(Te,{sx:{display:"flex",alignItems:"center",gap:2},children:[a.jsx(cn,{edge:"start",onClick:g,sx:{width:44,height:44,borderRadius:2,bgcolor:Y(b.palette.common.white,.12),color:b.palette.common.white,"&:hover":{bgcolor:Y(b.palette.common.white,.2)}},children:a.jsx(Bu,{size:26,strokeWidth:3})}),a.jsx(ue,{variant:"h6",sx:{fontWeight:600,letterSpacing:.2,display:{xs:"none",sm:"block"}},children:v})]}),a.jsxs(Te,{sx:{display:"flex",alignItems:"center",gap:3},children:[a.jsxs(Te,{sx:{position:"relative",minWidth:190},children:[a.jsx(Jt,{value:s,size:"small",onChange:x=>l(x.target.value),onFocus:()=>u(p.length>0),placeholder:"Search anywhere...",variant:"outlined",InputProps:{startAdornment:a.jsx(Qo,{position:"start",children:a.jsx(ns,{size:18,color:Y(b.palette.common.white,.75)})}),sx:{color:b.palette.common.white,"& .MuiOutlinedInput-notchedOutline":{borderColor:Y(b.palette.common.white,.3)},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:Y(b.palette.common.white,.5)},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:Y(b.palette.common.white,.6)},"& input::placeholder":{color:Y(b.palette.common.white,.7)},backgroundColor:Y(b.palette.common.white,.1),borderRadius:2}},sx:{width:{xs:210,sm:260}}}),a.jsx(oo,{in:h&&p.length>0,timeout:120,unmountOnExit:!0,children:a.jsx(ht,{elevation:8,sx:{position:"absolute",right:0,left:0,mt:1,borderRadius:2,overflow:"hidden",zIndex:b.zIndex.tooltip},children:a.jsx(sl,{dense:!0,disablePadding:!0,children:p.map((x,y)=>a.jsx(_l,{onMouseDown:()=>m(x),sx:{alignItems:"flex-start"},children:a.jsx(Go,{primary:a.jsx(ue,{variant:"subtitle2",fontWeight:600,children:x.name}),secondary:a.jsx(ue,{component:"span",variant:"caption",sx:{color:"text.secondary"},children:x.category})})},y))})})})]}),a.jsx(jd,{sx:{width:42,height:42,bgcolor:Y(b.palette.common.black,.85),border:`1px solid ${Y(b.palette.common.white,.25)}`,boxShadow:"0px 0px 0px 2px rgba(255,255,255,0.08)"},children:a.jsx(Fu,{size:18,color:"#FFFFFF"})})]})]})})});oc.displayName="Header";const sc=d.memo(({currentMenu:n,filteredItems:i,windowWidth:s,onCardClick:l})=>{var u;const p=$t(),h=((u=n==null?void 0:n.label)==null?void 0:u.split(" ")[0])??"Dashboard";return a.jsxs(Te,{sx:{width:"100%",maxWidth:1200,mx:"auto",px:{xs:3,sm:6,md:8},py:{xs:6,md:8}},children:[a.jsxs(Te,{textAlign:"center",mb:6,children:[a.jsxs(Te,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:2,mb:1.5},children:[Nn.createElement((n==null?void 0:n.icon)||Ro,{size:32,color:p.palette.primary.main}),a.jsx(ue,{component:"h1",variant:"h4",fontWeight:700,children:s<950?h:n==null?void 0:n.label})]}),a.jsx(ue,{variant:"body2",color:"text.secondary",children:n!=null&&n.label?`${n.label} Overview`:"Overview of your workspace"})]}),a.jsx(di,{mode:"wait",children:a.jsx(mn.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},exit:{opacity:0,y:-12},transition:{duration:.25},children:a.jsx(yn,{container:!0,spacing:{xs:3,md:4},justifyContent:"center",children:i.length?i.map((m,g)=>a.jsx(yn,{item:!0,xs:12,sm:6,md:4,children:a.jsx(eg,{whileHover:{scale:1.02},transition:{duration:.2},elevation:3,children:a.jsx(Jd,{onClick:()=>l(m),children:a.jsxs(fl,{sx:{minHeight:150,display:"flex",flexDirection:"column",gap:1.5,textAlign:"center",px:4,py:3},children:[a.jsx(ue,{variant:"h6",fontWeight:600,children:m.name}),a.jsx(ue,{variant:"body2",color:"text.secondary",children:m.description})]})})})},g)):a.jsx(yn,{item:!0,xs:12,children:a.jsx(ht,{variant:"outlined",sx:{py:8,textAlign:"center",color:"text.secondary"},children:a.jsx(ue,{variant:"body2",children:"No results found."})})})})},(n==null?void 0:n.label)||"default")})]})});sc.displayName="MainContent";function og(){const n="Operation Toolkit",[i,s]=d.useState({label:n,icon:Hs[n]||Ro}),[l,p]=d.useState(Yi[n]||[]),[h,u]=d.useState(null),[m,g]=d.useState(""),[b,v]=d.useState([]),[x,y]=d.useState(!1),[S,T]=d.useState(""),[k,w]=d.useState(""),[P,F]=d.useState(window.innerWidth),[D,z]=d.useState(window.innerHeight),[j,K]=d.useState(1),[H,oe]=d.useState([]),[W,te]=d.useState([]),[q,B]=d.useState(!1),[ce,re]=d.useState([]),[Se,ye]=d.useState(!1),Me=d.useMemo(()=>{const de=ce.map(A=>A.calloutGroup).filter(A=>!!A);return Array.from(new Set(de)).sort()},[ce]),[X,Ae]=d.useState([]),{externalContainer:ae,externalTasks:pe,externalExpandedSections:Z,openExternalWindow:N,openResourceWindow:V,closeExternalWindow:M,setExternalExpandedSections:O}=Xf(),[se,le]=d.useState(!1),[Ce,We]=d.useState(null);d.useEffect(()=>()=>M(),[M]),d.useEffect(()=>{const de=A=>{const xe=A.detail||{},Ke=xe.taskId,Ze=xe.workId;let De;if(Ke){const G=String(Ke);De=H.find(ee=>{const ie=(ee==null?void 0:ee.taskId)??(ee==null?void 0:ee.TaskID)??(ee==null?void 0:ee.TaskId)??(ee==null?void 0:ee.id)??null;return ie!=null&&String(ie)===G})}if(!De&&Ze){const G=String(Ze);De=H.find(ee=>{const ie=(ee==null?void 0:ee.workId)??(ee==null?void 0:ee.WorkID)??(ee==null?void 0:ee.WorkId)??(ee==null?void 0:ee.workID)??null;return ie!=null&&String(ie)===G})}if(!De)return;O(["Progress Notes"]);const Ue=window.innerWidth/2,Q=window.innerHeight/2;N([De],Ue,Q)};return window.addEventListener("taskforce:view-progress-notes",de),()=>{window.removeEventListener("taskforce:view-progress-notes",de)}},[H,N,O]),d.useEffect(()=>{const de=A=>{var Ue;const xe=((Ue=A.detail)==null?void 0:Ue.items)??[];if(!xe.length)return;const Ke=new Map;for(const Q of xe)Q!=null&&Q.taskId&&Ke.set(String(Q.taskId),Q);if(!Ke.size)return;const Ze=(Q,G)=>{const ee={ts:G.timestamp,status:G.nextStatus||G.previousStatus||"Updated",text:G.note,source:"Quick Progress"},ie=Q.progressNotes;return Array.isArray(ie)?[...ie,ee]:typeof ie=="string"&&ie.trim()?[{ts:Q.taskCreated??G.timestamp,status:Q.taskStatus??Q.status??"",text:ie.trim(),source:"Imported"},ee]:[ee]},De=Q=>Q.map(G=>{const ee=(G==null?void 0:G.taskId)??(G==null?void 0:G.TaskID)??(G==null?void 0:G.TaskId)??(G==null?void 0:G.id)??(G==null?void 0:G.ID)??(G==null?void 0:G.Id)??null;if(ee==null)return G;const ie=Ke.get(String(ee));if(!ie)return G;const Je=ie.nextStatus||G.taskStatus||G.status;return{...G,taskStatus:Je,lastProgression:Je||G.lastProgression,updatedAt:ie.timestamp,progressNotes:Ze(G,ie)}});oe(Q=>De(Q)),te(Q=>De(Q))};return document.addEventListener("taskforce:tasks-progressed",de),()=>{document.removeEventListener("taskforce:tasks-progressed",de)}},[oe,te]);const[ct,Ne]=d.useState(!1),[Be,je]=d.useState([]),[Ge,wt]=d.useState(null),{history:me,loading:Pe,error:ke,refresh:bt,appendLocal:st}=Yf(),_t=d.useCallback(de=>{We(de),Ne(!0)},[]);d.useEffect(()=>{oe(tn),B(!0)},[]),d.useEffect(()=>{try{re(Sl),ye(!0)}catch{Tt.error("Error loading resource data.")}},[]),d.useEffect(()=>{const de=()=>{const Ze=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${Ze}px`)},A=()=>{F(window.innerWidth),z(window.innerHeight),de();const Ze=window.innerHeight,De=Math.max(.75,Math.min(1,Ze/900));K(Number(De.toFixed(2))),document.documentElement.style.setProperty("--ui-scale",String(De));const Ue=Math.max(13,Math.min(16,Math.round(Ze/60)));document.documentElement.style.fontSize=`${Ue}px`};de();const U=window.innerHeight,xe=Math.max(.75,Math.min(1,U/900));K(Number(xe.toFixed(2))),document.documentElement.style.setProperty("--ui-scale",String(xe));const Ke=Math.max(13,Math.min(16,Math.round(U/60)));return document.documentElement.style.fontSize=`${Ke}px`,window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[]);const At=d.useMemo(()=>Object.entries(Yi).flatMap(([de,A])=>A.map(U=>({...U,category:de}))),[]);d.useEffect(()=>{if(!m.trim()){v([]),y(!1);return}const de=At.filter(A=>A.name.toLowerCase().includes(m.toLowerCase()));v(de),y(de.length>0)},[m,At]);const ut=d.useCallback(de=>{const A=de.label;s({label:A,icon:Hs[A]||Ro}),p(Yi[A]||[]),te([]),u(null),g(""),v([]),y(!1)},[]),gt=d.useCallback(de=>{de.name==="Task Management"&&(u("TaskManagement"),te([])),de.name==="Schedule Live"&&u("ScheduleLive")},[]),jt=d.useCallback(de=>{if(!q){Tt.error("Data not loaded yet.");return}const A=tg(H,de);if(A.length===0){te([]),Tt.error("No matching tasks found.");return}te(A)},[H,q]),Et=d.useCallback(()=>{te([]),Ae([]),Tt.success("Filters cleared.",{id:"clear-toast",icon:"ðŸ§¹"})},[]),Ve=W.length>0,He=d.useCallback(async()=>{if(!Ve){Tt.error("No data to copy.");return}const de=Object.keys(io),A=ng(de,W);await navigator.clipboard.writeText(A),Tt.success("Copied",{icon:"ðŸ“‹"})},[W,Ve]),Ee=d.useCallback(()=>{if(!Ve){Tt.error("No data to export.");return}const de=Object.keys(io),A=ig(de,W),U=new Blob([A],{type:"text/csv;charset=utf-8;"}),xe=document.createElement("a");xe.href=URL.createObjectURL(U),xe.download="FilteredTasks.csv",xe.click(),Tt.success("Exported",{icon:"ðŸ’¾"})},[W,Ve]),mt=d.useCallback(de=>{g(""),y(!1);const A=de.category,U=Yi[A]||[];s({label:A,icon:Hs[A]||Ro}),p(U),u(de.name==="Task Management"?"TaskManagement":null)},[]);d.useMemo(()=>{const de=new Set;return tn.forEach(A=>{const U=String(A.domain||"").toUpperCase();U&&de.add(U)}),Array.from(de).sort()},[]),d.useMemo(()=>{const de=new Set;return tn.forEach(A=>{const U=String(A.groupCode||"").toUpperCase();U&&de.add(U)}),Array.from(de).sort()},[]),d.useCallback(de=>{T(de)},[]),d.useCallback(de=>{w(de)},[]);const dt=d.useCallback((de,A,U)=>{!de||de.length===0||N(de,A,U)},[N]),yt=d.useCallback((de,A)=>{if(!de)return;const U=A.length?A:me.filter(xe=>xe.resourceId===de.resourceId);V(de,U)},[me,V]),Xt=d.useCallback(()=>{if(!Ce)return;const de=window.innerWidth/2,A=window.innerHeight/2;N([Ce],de,A)},[Ce,N]),vt=(de,A)=>{switch(A){case"AssignDispatchedAWI":case"CalloutDispatchedAWI":return"Dispatched (AWI)";case"PendingACT":return"Assigned (ACT)";case"Disturbance":case"NoReply":return"Callout Failed";case"Refusal":return"Refused";case"Unavailable":return"Awaiting Resource";default:return de}},Bt=(de,A)=>{switch(A){case"AssignDispatchedAWI":case"CalloutDispatchedAWI":return"Busy";case"PendingACT":return"Pending";case"Disturbance":return"Flagged";case"NoReply":return"No Reply";case"Refusal":return"Refused";case"Unavailable":return"Unavailable";default:return de||"Available"}},Yt=d.useCallback(async de=>{const{taskId:A,resourceId:U,outcome:xe,availableAgainAt:Ke}=de,Ze=new Date().toISOString(),De=ee=>{if(!ee)return null;try{const ie=new Date(ee);if(Number.isNaN(ie.getTime()))return ee;const Je=String(ie.getDate()).padStart(2,"0"),tt=String(ie.getMonth()+1).padStart(2,"0"),fe=ie.getFullYear(),Ht=String(ie.getHours()).padStart(2,"0"),xt=String(ie.getMinutes()).padStart(2,"0");return`${Je}/${tt}/${fe} ${Ht}:${xt}`}catch{return ee}},Ue=(ee,ie)=>ie?[...Array.isArray(ee.progressNotes)?[...ee.progressNotes]:typeof ee.progressNotes=="string"&&ee.progressNotes.trim()?[{ts:ee.taskCreated||Ze,status:"",text:ee.progressNotes.trim(),source:"Imported"}]:[],ie]:ee.progressNotes;let Q=null;re(ee=>ee.map(ie=>{if(ie.resourceId!==U)return ie;const Je=ie.lastOutcome??null,tt=ie.availableAgainAt??null;return{...ie,status:Bt(ie.status,xe),lastOutcome:xe,availableAgainAt:xe==="Unavailable"?Ke??null:null,history:[...ie.history??[],{previousOutcome:Je,previousAvailableAgainAt:tt,changedAt:Ze,taskIdUsed:A??null,outcomeApplied:xe,availableAgainAt:xe==="Unavailable"?Ke??null:null}]}}));const G=ee=>ee.map(ie=>{var Qt;if(ie.taskId!==A)return ie;const Je=ie.taskStatus,tt=ie.employeeId??null,fe=vt(ie.taskStatus,xe),Ht=ie.resourceName?`${ie.resourceName} (${U})`:U,xt=((Qt=Su[xe])==null?void 0:Qt.label)??String(xe);let lt=null,Xe=`${Ht} outcome set to ${xt}.`;if(A){if(xe==="Unavailable"){const xn=De(Ke);lt={ts:Ze,status:"Unavailable",text:xn?`${Ht} marked unavailable. Next availability ${xn}.`:`${Ht} marked unavailable.`,source:"Callout"},Xe=lt.text}else fe&&fe.includes("AWI")&&(lt={ts:Ze,status:xe,text:`${Ht} set to ${xt}.`,source:"Callout"},Xe=lt.text);Q||(Q={taskId:A,workId:ie.workId??null,resourceId:U,outcome:xe,status:fe??null,availableAgainAt:xe==="Unavailable"?Ke??null:null,note:Xe,timestamp:Ze})}return{...ie,taskStatus:fe,employeeId:U,lastOutcome:xe,availableAgainAt:xe==="Unavailable"?Ke??null:null,updatedAt:Ze,history:[...ie.history??[],{previousTaskStatus:Je,previousEmployeeId:tt,changedAt:Ze,outcomeApplied:xe,resourceIdUsed:U,availableAgainAt:xe==="Unavailable"?Ke??null:null}],progressNotes:Ue(ie,lt)}});if(oe(ee=>G(ee)),te(ee=>G(ee)),Q){const ee=Q,ie={id:`SESSION-${U}-${Date.now()}`,...ee};st(ie)}},[st]),on=d.useCallback(de=>{O(A=>A.includes(de)?A.filter(U=>U!==de):[...A,de])},[O]),qt=d.useCallback(()=>{O(Qf)},[O]),Ft=d.useCallback(()=>{O([])},[O]);return a.jsxs(Te,{sx:{position:"relative",overflow:"hidden",bgcolor:"background.default",color:"text.primary",fontFamily:'"Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif',width:"100%",height:`calc(var(--vh, 1vh) * 100 / ${j})`,transform:`scale(${j})`,transformOrigin:"top left"},children:[a.jsx(Wf,{position:"top-center"}),a.jsx(Jf,{currentMenu:i,onMenuClick:ut,activeSubPage:h}),a.jsxs(Te,{component:"main",sx:{display:"flex",flexDirection:"column",minWidth:0,height:"100%"},children:[a.jsx(oc,{currentMenu:i,windowWidth:P,searchQuery:m,setSearchQuery:g,globalResults:b,showDropdown:x,setShowDropdown:y,onSelectResult:mt,onToggleSidebar:()=>window.dispatchEvent(new CustomEvent("toggleSidebar"))}),a.jsxs(Te,{sx:{flex:1,minHeight:0,bgcolor:"background.paper",display:"flex",flexDirection:"column"},children:[h==="TaskManagement"&&a.jsxs(Te,{component:"section",sx:{py:{xs:4,md:6},px:{xs:3,md:6},display:"flex",flexDirection:"column",gap:3},children:[a.jsx(Kf,{onSearch:jt,onClear:Et,onCopy:He,onExport:Ee,canCopy:Ve}),q?W.length>0?a.jsx(yr,{rows:W,headerNames:io,onOpenPopout:dt,onOpenCalloutIncident:_t}):a.jsx(ht,{variant:"outlined",sx:{p:6,textAlign:"center",borderStyle:"dashed",borderColor:"divider",bgcolor:"background.default"},children:a.jsxs(ue,{variant:"body2",color:"text.secondary",children:["No tasks loaded yet. Please apply filters and press ",a.jsx("b",{children:"Search"}),"."]})}):a.jsx(ht,{variant:"outlined",sx:{p:6,textAlign:"center",color:"text.secondary"},children:a.jsx(ue,{variant:"body2",children:"Loading task data..."})})]}),h==="ScheduleLive"&&a.jsx(Ym,{}),!h&&a.jsx(sc,{currentMenu:i,filteredItems:l,windowWidth:P,onCardClick:gt})]})]}),ct&&a.jsx(Oh,{allResources:ce,calloutGroups:Me,onStart:de=>{const U=ce.filter(xe=>xe.calloutGroup===de).slice(0,6);je(U),wt(de),Ne(!1),le(!0)},onDismiss:()=>{Ne(!1),je([]),wt(null)}}),a.jsx(bu,{open:se,task:Ce,resources:ce,primaryResourceIds:Be.map(de=>de.resourceId),selectedGroup:Ge,onOpenResourcePopout:yt,onOpenTaskPopout:Xt,onClose:()=>{le(!1),je([]),wt(null)},history:me,historyLoading:Pe,historyError:ke,onRefreshHistory:bt,onSaveRow:Yt}),ae&&pe&&pe.length>0&&Di.createPortal(a.jsx(_u,{open:!0,tasks:pe,expanded:Z,onToggleSection:on,onExpandAll:qt,onCollapseAll:Ft,onClose:M}),ae)]})}function sg(){return a.jsx(og,{})}const qa="#003F87",rg="#FFC20E",Ka="#F5F7FA",ag=Ya({palette:{mode:"light",primary:{main:qa,light:"#2E68A6",dark:"#001E4D",contrastText:"#FFFFFF"},secondary:{main:rg,light:"#FFD54A",dark:"#C79400",contrastText:qa},background:{default:Ka,paper:"#FFFFFF"},text:{primary:"#1F2933",secondary:"#52606D"},divider:"rgba(0, 63, 135, 0.12)"},typography:{fontFamily:'"Inter", "Roboto", "Helvetica", "Arial", sans-serif',h1:{fontWeight:600},h2:{fontWeight:600},h3:{fontWeight:600},button:{textTransform:"none",fontWeight:600},subtitle1:{color:"#394B59"},subtitle2:{color:"#52606D"}},shape:{borderRadius:12},components:{MuiCssBaseline:{styleOverrides:{body:{backgroundColor:Ka}}},MuiPaper:{styleOverrides:{root:{borderRadius:16}}},MuiButton:{styleOverrides:{root:{borderRadius:999}}},MuiCard:{styleOverrides:{root:{borderRadius:18,boxShadow:"0 10px 25px rgba(0, 63, 135, 0.08)"}}},MuiAppBar:{styleOverrides:{root:{boxShadow:"0 10px 24px rgba(0, 0, 0, 0.18)"}}}}});Cu.createRoot(document.getElementById("root")).render(a.jsxs(sd,{theme:ag,children:[a.jsx(xp,{}),a.jsx(sg,{})]}));
